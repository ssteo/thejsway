{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"The JavaScript Way","text":"<p>An open source book written by Baptiste Pesquet with the help of many people. Translated to French, Spanish and Indonesian. Published under a Creative Commons license and free to read online here. All code licensed under an MIT license. Contributions are most welcome.</p> <p>This book is also available on Leanpub (PDF, EPUB), Amazon (Kindle, paperback) and Educative (interactive course).</p> <p></p>"},{"location":"#overview","title":"Overview","text":"<p>This book will be a useful companion for anyone wishing to explore the many facets of JavaScript. Numerous brain cycles were spent to make it:</p> <ul> <li>Beginner-friendly yet comprehensive. From the very basics of programming up to front-end and back-end web development, a lot of topics are covered in a simple and approachable way. No prior knowledge needed!</li> <li>Standards-aligned. The book is entirely written using the recent ES2016 syntax, giving you future-proof knowledge. From start to finish, it enforces good programming habits, embraces the ubiquitous JavaScript tools ESLint and Prettier.</li> <li>Hands-on. No real learning happens without practicing! Each chapter is accompanied by a series of exercises to put your newly acquired skills into action. A three-part project will guide you in the creation of a social news web application (see it in action).</li> <li>Easy to follow. Code along directly in your browser or build an efficient JavaScript development environment on your local machine.</li> </ul>"},{"location":"#supporting-this-work","title":"Supporting this work","text":"<p>A lot of time and energy went into this content. If you find it useful and want to support this effort, here's what you can do:</p> <ul> <li>Buy it under one of the available formats (see above). Any financial contribution would be much appreciated.</li> <li>Rate it or leave a review on Goodreads or Amazon.</li> <li>Spread the word about it.</li> </ul> <p>Thanks in advance for your support!</p>"},{"location":"appendix02/","title":"Style guide","text":"<p>Here are the coding rules and principles used throughout the book.</p> <p>Note</p> <p>This chapter is by nature a bit subjective and opinionated. Feel free to make your own choices.</p>"},{"location":"appendix02/#naming","title":"Naming","text":"<p>Naming things right goes a long way into making code cleaner and easier to understand. Some general naming rules are presented below.</p>"},{"location":"appendix02/#choose-meaningful-names","title":"Choose meaningful names","text":"<p>The most important rule is to give each element (variable, function, class, etc) a specific name that reflects its role. A variable holding the value of a circle radius should be named <code>radius</code> rather than <code>num</code> or <code>myVal</code>.</p> <p>Brevity should be limited to short-lived elements, like loop counters.</p>"},{"location":"appendix02/#dont-use-reserved-words","title":"Don\u2019t use reserved words","text":"<p>Each JavaScript keyword is a reserved name. They should not be used as variable names. Here's the list of reserved words in JavaScript.</p>"},{"location":"appendix02/#follow-a-naming-convention","title":"Follow a naming convention","text":"<p>It can take several words to describe precisely the role of certain elements. This book adopts the popular camelCase naming convention, based on two main principles:</p> <ul> <li>All names begin with a lowercase letter.</li> <li>If a name consists of several words, the first letter of each word (except the first word) is uppercase.</li> </ul> <p>In addition, this book uses the following naming rules:</p> <ul> <li>Functions and method names include an action verb: <code>computeTotal()</code>, <code>findFirstParent()</code>, <code>attackTarget()</code>, etc.</li> <li>To be consistent with other programming languages, class names start with an uppercase letter: <code>User</code> instead of <code>user</code>.</li> <li>Since they may contain multiple elements, arrays are named plurally or suffixed with <code>List</code>: <code>movies</code> or <code>movieList</code>, but not <code>movie</code>.</li> <li>To distinguish them from other variables, DOM elements are suffixed with <code>Element</code> (or <code>Elements</code> for array-like variables): <code>divElement</code> rather than simply <code>div</code>.</li> </ul> <p>Warning</p> <p>Like many other languages, JavaScript is case sensitive. For example, <code>myVariable</code> and <code>myvariable</code> are two different variable names. Be careful!</p>"},{"location":"appendix02/#code-formatting","title":"Code formatting","text":"<p>This is a subject of many debates in the JavaScript community: using spaces or tabulations for indenting, omitting semicolons, simple vs double quotes for strings, and so on.</p> <p>A simple and efficient solution is to rely on a tool to automate the low-level task of formatting code, so that you can concentrate on more high-level work. This book uses Prettier with default configuration (double quotes and semicolons).</p>"},{"location":"appendix02/#code-quality","title":"Code quality","text":"<p>Since JavaScript is a dynamically typed language, a number of errors don\u2019t show up until execution: misnaming a function, loading a nonexistent module, etc. In addition, many other mistakes like declaring a variable without ever using it won\u2019t affect execution outcome, but make your code harder to read and lower its overall quality.</p> <p>Fortunately, specialized tools called linters can check your code against rules during edition and warn about potential defects. By allowing to fix many bugs before they happen, linters greatly enhance developer productivity.</p> <p>This book uses ESLint for linting code. ESLint is a very flexible tool and you can tailor it to your specific needs, and different set of ESLint rules have emerged.</p> <p>This book's ESLint configuration extends the recommended settings, with a few necessary deviations. Here is the content of the book's <code>.eslintrc</code> configuration file.</p> <pre><code>{\n \"root\": true,\n \"env\": {\n  \"node\": true,\n  \"es2016\": true,\n  \"browser\": true\n },\n \"rules\": {\n  \"no-console\": 0,\n  \"eqeqeq\":\"warn\",\n  \"no-cond-assign\": 0,\n  \"no-unused-vars\": 1,\n  \"no-extra-semi\": \"warn\",\n  \"semi\": \"warn\"\n },\n \"extends\": \"eslint:recommended\",\n \"parserOptions\": {\n  \"ecmaFeatures\": {\n   \"experimentalObjectRestSpread\": true\n  }\n }\n}\n</code></pre>"},{"location":"chapter01/","title":"3, 2, 1... Code","text":"<p>Let's get started! This chapter will introduce you to the fundamentals of programming including values, types, and program structure.</p>"},{"location":"chapter01/#your-first-program","title":"Your first program","text":"<p>Here's our very first JavaScript program.</p> <pre><code>console.log(\"Hello from JavaScript!\");\n</code></pre> <p>This program displays the text <code>\"Hello from JavaScript!\"</code> in the console, a zone displaying textual information available in most JavaScript environments, such as browsers.</p> <p>To achieve this, it uses a JavaScript command named <code>console.log()</code>, whose role is to display a piece of information. The text to be displayed is placed between parentheses and followed by a semicolon, which marks the end of the line.</p> <p>Displaying a text on the screen (the famous Hello World all programmers know) is often the first thing you'll do when you learn a new programming language. It's the classic example. You've already taken that first step!</p>"},{"location":"chapter01/#values-and-types","title":"Values and types","text":"<p>A value is a piece of information used in a computer program. Values exist in different forms called types. The type of a value determines its role and operations available to it.</p> <p>Every computer language has its own types and values. Let's look at two of the types available in JavaScript.</p>"},{"location":"chapter01/#number","title":"Number","text":"<p>A number is a numerical value (thanks Captain Obvious). Let's go beyond that though! Like mathematics, you can use integer values (or whole numbers) such as 0, 1, 2, 3, etc, or real numbers with decimals for greater accuracy.</p> <p>Numbers are mainly used for counting. The main operations you'll see are summarized in the following table. All of them produce a number result.</p> Operator Role <code>+</code> Addition <code>-</code> Subtraction <code>*</code> Multiplication <code>/</code> Division"},{"location":"chapter01/#string","title":"String","text":"<p>A string in JavaScript is text surrounded by quotation marks, such as <code>\"This is a string\"</code>.</p> <p>You can also define strings with a pair of single quotes: <code>'This is another string'</code>. The best practice for single or double quotes is a whole political thing. Use whichever you like, but don\u2019t mix the two in the same program!</p> <p>Warning</p> <p>Always remember to close a string with the same type of quotation marks you started it with.</p> <p>To include special characters in a string, use the <code>\\</code> character (backslash) before the character. For example, type <code>\\n</code> to add a new line within a string: <code>\"This is\\na multiline string\"</code>.</p> <p>You cannot add or subtract string values like you'd do with numbers. However, the <code>+</code> operator has a special meaning when applied to two string values. It will join the two chains together, and this operation is called a concatenation. For example, <code>\"Hel\" + \"lo\"</code> produces the result <code>\"Hello\"</code>.</p>"},{"location":"chapter01/#program-structure","title":"Program structure","text":"<p>We already defined a computer program as a list of commands telling a computer what to do. These orders are written as text files and make up what's called the \"source code\" of the program. The lines of text in a source code file are called lines of code.</p> <p>The source code may include empty lines: these will be ignored when the program executes.</p>"},{"location":"chapter01/#statements","title":"Statements","text":"<p>Each instruction inside a program is called a statement. A statement in JavaScript usually ends with a semicolon (albeit it's not strictly mandatory). Your program will be made up of a series of these statements.</p> <p>Tip</p> <p>You usually write only one statement per line.</p>"},{"location":"chapter01/#execution-flow","title":"Execution flow","text":"<p>When a program is executed, the statements in it are \"read\" one after another. It's the combination of these individual results that produces the final result of the program.</p> <p>Here's an example of a JavaScript program including several statements, followed by the result of its execution.</p> <pre><code>console.log(\"Hello from JavaScript!\");\nconsole.log(\"Let's do some math\");\nconsole.log(4 + 7);\nconsole.log(12 / 0);\nconsole.log(\"Goodbye!\");\n</code></pre> <p></p> <p>Depending on your work environment, the execution result may not include quotes around text.</p> <p></p> <p>Note</p> <p>As expected, a division by zero (<code>12/0</code>) results in an <code>Infinity</code> value.</p>"},{"location":"chapter01/#comments","title":"Comments","text":"<p>By default, each line of text in the source files of a program is considered a statement that should be executed. You can prevent certain lines from executing by putting a double slash before them: <code>//</code>. This turns the code into a comment.</p> <pre><code>console.log(\"Hello from JavaScript!\");\n// console.log(\"Let's do some math\");\nconsole.log(4 + 7);\n// console.log(12 / 0);\nconsole.log(\"Goodbye!\");\n</code></pre> <p>During execution, the commented-out lines no longer produce results. As we hoped, they weren\u2019t executed.</p> <p></p> <p>Comments are great for developers so you can write comments to yourself, explanations about your code, and more, without the computer actually executing any of it.</p> <p>You can also write comments by typing <code>/*  */</code> around the code you want commented out.</p> <pre><code>/* A comment\nwritten on\nseveral lines */\n\n// A one line comment\n</code></pre> <p>Comments are a great source of info about a program's purpose or structure. Adding comments to complicated or critical parts is a good habit you should build right now!</p>"},{"location":"chapter01/#tldr","title":"TL;DR","text":"<ul> <li> <p>The JavaScript command <code>console.log()</code> shows a message in the console, an information zone available in most JavaScript environments.</p> </li> <li> <p>A value is a piece of information. The type of a value defines its role and the operations applicable to it.</p> </li> <li> <p>The JavaScript language uses the number type to represent a numerical value (with or without decimals) and the string type to represent text.</p> </li> <li> <p>A string value is surrounded by a pair of single quotes (<code>'...'</code>) or a pair of quotation marks (<code>\"...\"</code>).</p> </li> <li> <p>Arithmetic operations between numbers are provided by the <code>+</code>, <code>-</code>, <code>*</code> and <code>/</code> operators. Applied to two strings, the <code>+</code> operator joins them together. This operation is called concatenation.</p> </li> <li> <p>A computer program is made of several lines of code read sequentially during execution.</p> </li> <li> <p>Comments (<code>// ...</code> or <code>/* ... */</code>) are non-executed parts of code. They form a useful program documentation.</p> </li> </ul>"},{"location":"chapter01/#coding-time","title":"Coding time!","text":"<p>Let's put your brand new coding skills into practice.</p>"},{"location":"chapter01/#presentation","title":"Presentation","text":"<p>Write a program that displays your name and age. Here's the result for mine.</p> <p></p>"},{"location":"chapter01/#minimalistic-calculator","title":"Minimalistic calculator","text":"<p>Write a program that displays the results of adding, subtracting, multiplying and dividing 6 by 3.</p>"},{"location":"chapter01/#values-prediction","title":"Values prediction","text":"<p>Observe the following program and try to predict the values it displays.</p> <pre><code>console.log(4 + 5);\nconsole.log(\"4 + 5\");\nconsole.log(\"4\" + \"5\");\n</code></pre> <p>Check your prediction by executing it.</p>"},{"location":"chapter02/","title":"Play with variables","text":"<p>You know how to use JavaScript to display values. However, for a program to be truly useful, it must be able to store data, like information entered by a user. Let's check that out.</p>"},{"location":"chapter02/#variables","title":"Variables","text":""},{"location":"chapter02/#role-of-a-variable","title":"Role of a variable","text":"<p>A computer program stores data using variables. A variable is an information storage area. We can imagine it as a box in which you can put and store things!</p>"},{"location":"chapter02/#variable-properties","title":"Variable properties","text":"<p>A variable has three main properties:</p> <ul> <li>Its name, which identifies it. A variable name may contain upper and lower case letters, numbers (not in the first position) and characters like the dollar sign (<code>$</code>) or underscore (<code>_</code>).</li> <li>Its value, which is the data stored in the variable.</li> <li>Its type, which determines the role and actions available to the variable.</li> </ul> <p>Info</p> <p>You don\u2019t have to define a variable type explicitly in JavaScript. Its type is deduced from the value stored in the variable and may change while the program runs. That's why we say that JavaScript is a dynamically typed language. Other languages, like C or Java, require variable types to always be defined. This is called static typing.</p>"},{"location":"chapter02/#declaring-a-variable","title":"Declaring a variable","text":"<p>Before you can store information in a variable, you have to create it! This is called declaring a variable. Declaring a variable means the computer reserves memory in which to store the variable. The program can then read or write data in this memory area by manipulating the variable.</p> <p>Here's a code example that declares a variable and shows its contents:</p> <pre><code>let a;\nconsole.log(a);\n</code></pre> <p>In JavaScript, you declare a variable with the <code>let</code>  keyword followed by the variable name. In this example, the variable created is called <code>a</code>.</p> <p>Note</p> <p>Previously, JavaScript variables were declared using the <code>var</code> keyword. It's still possible, but in most cases it's simpler to use <code>let</code> and <code>const</code> instead.</p> <p>Here's the execution result for this program.</p> <p></p> <p>Note that the result is <code>undefined</code>. This is a special JavaScript type indicating no value. I declared the variable, calling it <code>a</code>, but didn\u2019t give it a value!</p>"},{"location":"chapter02/#assign-values-to-variables","title":"Assign values to variables","text":"<p>While a program is running, the value stored in a variable can change. To give a new value to a variable, use the <code>=</code> operator called the assignment operator.</p> <p>Check out the example below:</p> <pre><code>let a;\na = 3.14;\nconsole.log(a);\n</code></pre> <p></p> <p>We modified the variable by assigning it a value. <code>a = 3.14</code> reads as \"a receives the value 3.14\".</p> <p>Warning</p> <p>Be careful not to confuse the assignment operator <code>=</code> with mathematical equality! You'll soon see how to express equality in JavaScript.</p> <p>You can also combine declaring a variable and assigning it a value in one line. Just know that, within this line, you're doing two different things at once:</p> <pre><code>let a = 3.14;\nconsole.log(a);\n</code></pre>"},{"location":"chapter02/#declaring-a-constant-variable","title":"Declaring a constant variable","text":"<p>If the initial value of a variable won\u2019t ever change during the rest of program execution, this variable is called a constant. This constantness can be enforced by using the keyword <code>const</code> instead of <code>let</code> to declare it. Thus, the program is more expressive and further attempts to modify the variable can be detected as errors.</p> <pre><code>const a = 3.14; // The value of a cannot be modified\na = 6.28;       // Impossible!\n</code></pre> <p></p>"},{"location":"chapter02/#increment-a-number-variable","title":"Increment a number variable","text":"<p>You can also increase the value of a number with <code>+=</code> and <code>++</code>. The latter is called the increment operator, as it allows incrementation (increase by 1) of a variable's value.</p> <p>In the following example, lines 2 and 3 each increase the value of variable b  by 1.</p> <pre><code>let b = 0;      // b contains 0\nb += 1;         // b contains 1\nb++;            // b contains 2\nconsole.log(b); // Shows 2\n</code></pre>"},{"location":"chapter02/#variable-scope","title":"Variable scope","text":"<p>The scope of a variable is the part of the program where the variable is visible and usable. Variables declared with <code>let</code> or <code>const</code> are block-scoped: their visibility is limited to the block where they are declared (and every sub-block, if any). In JavaScript and many other programming languages, a code block is a portion of a program delimited by a pair of opening and closing braces. By default, a JavaScript program forms one block of code.</p> <pre><code>let num1 = 0;\n{\n  num1 = 1; // OK : num1 is declared in the parent block\n  const num2 = 0;\n}\nconsole.log(num1); // OK : num1 is declared in the current block\nconsole.log(num2); // Error! num2 is not visible here\n</code></pre>"},{"location":"chapter02/#expressions","title":"Expressions","text":"<p>An expression is a piece of code that produces a value. An expression is created by combining variables, values and operators. Every expression has a value and thus a type. Calculating an expression's value is called evaluation. During evaluation, variables are replaced by their values.</p> <pre><code>// c is an expression whose value is 3\nconst c = 3;\n// d is an expression whose value is the value of c (3 here)\nlet d = c;\n// (d + 1) is an expression whose value is d's + 1 (4 here)\nd = d + 1; // d now contains the value 4\nconsole.log(d); // Show 4\n</code></pre> <p>Operator priority inside an expression is the same as in math. However, an expression can integrate parenthesis that modify these priorities.</p> <pre><code>let e = 3 + 2 * 4; // e contains 11 (3 + 8)\ne = (3 + 2) * 4;   // e contains 20 (5 * 4)\n</code></pre> <p>It is possible to include expressions in a string by using backticks (`) to delimit the string. Such a string is called a template literal. Inside a template literal, expressions are identified by the <code>${expression}</code> syntax.</p> <p>This is often used to create strings containing the values of some variables.</p> <pre><code>const country = \"France\";\nconsole.log(`I live in ${country}`); // Show \"I live in France\"\nconst x = 3;\nconst y = 7;\nconsole.log(`${x} + ${y} = ${x + y}`); // Show \"3 + 7 = 10\"\n</code></pre>"},{"location":"chapter02/#type-conversions","title":"Type conversions","text":"<p>An expression's evaluation can result in type conversions. These are called implicit conversions, as they happen automatically without the programmer's intervention. For example, using the <code>+</code> operator between a string and a number causes the concatenation of the two values into a string result.</p> <pre><code>const f = 100;\n// Show \"Variable f contains the value 100\"\nconsole.log(\"Variable f contains the value \" + f);\n</code></pre> <p>JavaScript is extremely tolerant in terms of type conversion. However, sometimes conversion isn\u2019t possible. If a value fails to convert into a number, you'll get the result <code>NaN</code> (Not a Number).</p> <pre><code>const g = \"five\" * 2;\nconsole.log(g); // Show NaN\n</code></pre> <p>Sometimes you'll wish to convert the value of another type. This is called explicit conversion. JavaScript has the <code>Number()</code>  and <code>String()</code> commands that convert the value between the parenthesis to a number or a string.</p> <pre><code>const h = \"5\";\nconsole.log(h + 1); // Concatenation: show the string \"51\"\nconst i = Number(\"5\");\nconsole.log(i + 1); // Numerical addition: show the number 6\n</code></pre>"},{"location":"chapter02/#user-interactions","title":"User interactions","text":""},{"location":"chapter02/#entering-information","title":"Entering information","text":"<p>Once you start using variables, you can write programs that exchange information with the user.</p> <pre><code>const name = prompt(\"Enter your first name:\");\nalert(`Hello, ${name}`);\n</code></pre> <p>During execution, a dialog box pops up, asking for your name.</p> <p></p> <p>This is the result of the JavaScript command <code>prompt(\"Enter your first name:\")</code>.</p> <p>Type your name and click OK. You'll then get a personalized greeting.</p> <p></p> <p>The value you entered in the first dialog box has been stored as a string in the variable <code>name</code>. The JavaScript command <code>alert()</code>  then triggered the display of the second box, containing the result of the concatenation of the string <code>\"Hello, \"</code>  with the value of the <code>name</code> variable.</p>"},{"location":"chapter02/#displaying-information","title":"Displaying information","text":"<p>Both <code>console.log()</code> (encountered in the previous chapter) and <code>alert()</code> can be used to display information to the user. Unlike <code>alert()</code>, <code>console.log()</code> does not stop program execution and is often a better choice.</p> <p><code>console.log()</code> can also display several comma-separated values at once.</p> <pre><code>const temp1 = 36.9;\nconst temp2 = 37.6;\nconst temp3 = 37.1;\nconsole.log(temp1, temp2, temp3); // Show \"36.9 37.6 37.1\"\n</code></pre>"},{"location":"chapter02/#entering-a-number","title":"Entering a number","text":"<p>Regardless of the entered data, the <code>prompt()</code> command always returns a string value. If this value is to be used in numerical expressions, it must be converted into a number with the <code>Number()</code> command.</p> <pre><code>const input = prompt(\"Enter a number:\"); // input's type is string\nconst nb = Number(input); // nb's type is number\n</code></pre> <p>Both operations can be combined in one line for the same result.</p> <pre><code>const nb = Number(prompt(\"Enter a number:\")); // nb's type is number\n</code></pre> <p>In this example, the user input is directly converted in a number value by the <code>Number()</code> command and stored in the <code>nb</code> variable.</p>"},{"location":"chapter02/#variable-naming","title":"Variable naming","text":"<p>To close this chapter, let's discuss variable naming. The computer doesn\u2019t care about variable names. You could name your variables using the classic example of a single letter (<code>a</code>, <code>b</code>, <code>c</code>...) or choose absurd names like <code>burrito</code>  or <code>puppieskittens90210</code>.</p> <p>Nonetheless, naming variables well can make your code much easier to read. Check out these two examples:</p> Bad naming<pre><code>const a = 5.5;\nconst b = 3.14;\nconst c = 2 * a * b;\nconsole.log(c);\n</code></pre> Better naming<pre><code>const radius = 5.5;\nconst pi = 3.14;\nconst perimeter = 2 * pi * radius;\nconsole.log(perimeter);\n</code></pre> <p>They function in the same way, but the second version is much easier to understand.</p> <p>When the variable represents something complex (for example, the maximum expected score in a game), it should be named using more than just a single word. In that case, you should capitalize all starting letters, except the first one (example: <code>maxExpectedScore</code>). This popular naming convention called camelCase will be used throughout this book.</p> <p>Info</p> <p>Naming things well is an important part of the programmer's job. Refer to the style guide for some useful advice.</p>"},{"location":"chapter02/#tldr","title":"TL;DR","text":"<ul> <li> <p>A variable is an information storage area. Every variable has a name, a value and a type. In JavaScript, the type of a variable is deduced from the value stored in it: JavaScript is a dynamically typed language.</p> </li> <li> <p>A variable is declared using the <code>let</code> keyword followed by the variable name. To declare a constant (a variable whose initial value will never change), it's better to use the <code>const</code> keyword instead.</p> </li> <li> <p>To give a value to a variable, we use the assignment operator <code>=</code>. For number variables, the operator <code>+=</code> can increase and the operator <code>++</code> can increment their value.</p> </li> <li> <p>The scope of a variable is the part of the program where the variable is visible. Variables declared with <code>let</code> or <code>const</code> are block-scoped. A code block is a portion of a program delimited by a pair of opening and closing curly braces <code>{ ... }</code>.</p> </li> <li> <p>An expression is a piece of code that combines variables, values and operators. Evaluating an expression produces a value, which has a type.</p> </li> <li> <p>Expressions may be included in strings delimited by a pair of backticks (`). Such a string is called a template literal.</p> </li> <li> <p>Type conversions may happen implicitly during the evaluation of an expression, or explicitly when using the <code>Number()</code> and <code>String()</code> commands, to obtain respectively a number or a string.</p> </li> <li> <p>The <code>prompt()</code> and <code>alert()</code> commands deal with information input and display under the form of dialog boxes.</p> </li> <li> <p>Variable naming is essential to program visibility. Following a naming convention like camelCase is good practice.</p> </li> </ul>"},{"location":"chapter02/#coding-time","title":"Coding time!","text":"<p>Build a habit of choosing good variable names in all exercises, starting with these ones.</p>"},{"location":"chapter02/#improved-hello","title":"Improved hello","text":"<p>Write a program that asks the user for his first name and his last name. The program then displays them in one sentence.</p>"},{"location":"chapter02/#final-values","title":"Final values","text":"<p>Observe the following program and try to predict the final values of its variables.</p> <pre><code>let a = 2;\na -= 1;\na++;\nlet b = 8;\nb += 2;\nconst c = a + b * b;\nconst d = a * b + b;\nconst e = a * (b + b);\nconst f = a * b / a;\nconst g = b / a * a;\nconsole.log(a, b, c, d, e, f, g);\n</code></pre> <p>Check your prediction by executing it.</p>"},{"location":"chapter02/#vat-calculation","title":"VAT calculation","text":"<p>Write a program that asks the user for a raw price. After that, it calculates the corresponding final price using a VAT rate of 20.6%.</p>"},{"location":"chapter02/#from-celsius-to-fahrenheit-degrees","title":"From Celsius to Fahrenheit degrees","text":"<p>Write a program that asks for a temperature in Celsius degrees, then displays it in Fahrenheit degrees.</p> <p>Info</p> <p>The conversion between scales is given by the formula: [\u00b0F] = [\u00b0C] x 9/5 + 32.</p>"},{"location":"chapter02/#variable-swapping","title":"Variable swapping","text":"<p>Observe the following program.</p> <pre><code>let number1 = 5;\nlet number2 = 3;\n\n// TODO: type your code here (and nowhere else!)\n\nconsole.log(number1); // Should show 3\nconsole.log(number2); // Should show 5\n</code></pre> <p>Add the necessary code to swap the values of variables <code>number1</code> and <code>number2</code>.</p> <p>Tip</p> <p>This exercise has several valid solutions. You may use more than two variables to solve it.</p>"},{"location":"chapter03/","title":"Add conditions","text":"<p>Up until now, all the code in our programs has been executed chronologically. Let's enrich our code by adding conditional execution!</p>"},{"location":"chapter03/#whats-a-condition","title":"What's a condition?","text":"<p>Suppose we want to write a program that asks the user to enter a number and then displays a message if the number is positive. Here is the corresponding algorithm.</p> <pre><code>Enter a number\nIf the number is positive\n    Display a message\n</code></pre> <p>The message should display only if the number is positive; this means it's \"subject\" to a condition.</p>"},{"location":"chapter03/#the-if-statement","title":"The <code>if</code> statement","text":"<p>Here's how you translate the program to JavaScript.</p> <pre><code>const number = Number(prompt(\"Enter a number:\"));\nif (number &gt; 0) {\n  console.log(`${number} is positive`);\n}\n</code></pre> <p>The <code>console.log(...)</code> command is executed only if the number is positive. Test this program to see for yourself!</p> <p>Conditional syntax looks like this:</p> <pre><code>if (condition) {\n  // Code to run when the condition is true\n}\n</code></pre> <p>The pair of opening and closing braces defines the block of code associated with an <code>if</code> statement. This statement represents a test. It results in the following: \"If the condition is true, then execute the instructions contained in the code block\".</p> <p>The condition is always placed in parentheses after the <code>if</code>. The statements within the associated code block are shifted to the right. This practice is called indentation and helps make your code more readable. As your programs grow in size and complexity, it will become more and more important. The indentation value is often 2 or 4 spaces.</p> <p>Info</p> <p>When the code block has only one statement, braces may be omitted. As a beginner, you should nonetheless always use braces when writing your first conditional statements.</p>"},{"location":"chapter03/#conditions","title":"Conditions","text":"<p>A condition is an expression that evaluates as a value either true or false: it's called a boolean value. When the value of a condition is true, we say that this condition is satisfied.</p> <p>We have already studied numbers and strings, two types of data in JavaScript. Booleans are another type. This type has only two possible values: <code>true</code> and <code>false</code>.</p> <p>Any expression producing a boolean value (either <code>true</code> or <code>false</code>) can be used as a condition in an <code>if</code> statement. If the value of this expression is <code>true</code>, the code block associated with it is executed.</p> <pre><code>if (true) {\n  // The condition for this if is always true\n  // This block of code will always be executed\n}\nif (false) {\n  // The condition for this if is always false\n  // This block of code will never be executed\n}\n</code></pre> <p>Boolean expressions can be created using the comparison operators shown in the following table.</p> Operator Meaning <code>===</code> Equal <code>!==</code> Not equal to <code>&lt;</code> Less than <code>&lt;=</code> Less than or equal to <code>&gt;</code> Greater than <code>&gt;=</code> Greater than or equal to <p>In some other programming languages, equality and inequality operators are <code>==</code> and <code>!=</code>. They also exist in JavaScript, but it's safer to use <code>===</code> and <code>!==</code> (more details).</p> <p>Warning</p> <p>It's easy to confuse comparison operators like <code>===</code> (or <code>==</code>) with the assignment operator <code>=</code>. They're very, very different. Be warned!</p> <p>Now let's modify the example code to replace <code>&gt;</code> with <code>&gt;=</code> and change the message, then test it with the number 0.</p> <pre><code>const number = Number(prompt(\"Enter a number:\"));\nif (number &gt;= 0) {\n  console.log(`${number} is positive or zero`);\n}\n</code></pre> <p>If the user input is 0, the message appears in the console, which means that the condition<code>(number &gt;= 0)</code> was satisfied.</p>"},{"location":"chapter03/#alternative-conditions","title":"Alternative conditions","text":"<p>You'll often want to have your code execute one way when something's true and another way when something's false.</p>"},{"location":"chapter03/#the-else-statement","title":"The <code>else</code> statement","text":"<p>Let's enrich our sample with different messages depending if the number's positive or not.</p> <pre><code>const number = Number(prompt(\"Enter a number:\"));\nif (number &gt; 0) {\n  console.log(`${number} is positive`);\n}\nelse {\n  console.log(`${number} is negative or zero`);\n}\n</code></pre> <p>Test this code with a positive number, negative number, and zero, while watching the result in the console. The code executes differently depending if the condition <code>(number &gt; 0)</code> is true or false.</p> <p>The syntax for creating an alternative is to add an <code>else</code> keyword after an initial <code>if</code>.</p> <pre><code>if (condition) {\n  // Code to run when the condition is true\n}\nelse {\n  // Code to run when the condition is false\n}\n</code></pre> <p>You can translate an <code>if</code>/<code>else</code> statement like this: \"If the condition is true, then execute this first set of code; otherwise, execute this next set of code\". Only one of the two code blocks will be executed.</p>"},{"location":"chapter03/#nesting-conditions","title":"Nesting conditions","text":"<p>Let's go to the next level and display a specific message if the entered number is zero. See this example, which has a positive test case, negative test case, and a last resort of the number being zero.</p> <pre><code>const number = Number(prompt(\"Enter a number:\"));\nif (number &gt; 0) {\n  console.log(`${number} is positive`);\n} else {\n  // number &lt;= 0\n  if (number &lt; 0) {\n    console.log(`${number} is negative`);\n  } else {\n    // number === 0\n    console.log(`${number} is zero`);\n  }\n}\n</code></pre> <p>Let's wrap our heads around it. If the code block associated to the first <code>else</code> is run, then the number has to be either strictly negative or zero. Inside this block, a second <code>if</code> statement checks if the number is negative. If it's not, we know for sure that it's zero.</p> <p>Tip</p> <p>When learning to write nested conditions, you should add descriptive comments to each condition, just like in the previous example.</p> <p>The execution flow for the previous program can be expressed graphically using a flow diagram.</p> <p></p> <p>This example shows how essential indentation is for understanding a program's flow. There is no limit to the possible depth of condition nesting, but too many will affect program visibility.</p> <p>A particular case happens when the only statement in an <code>else</code> block is an <code>if</code>. In that case, you can write this <code>else</code> on the same line as the <code>if</code> and without braces. Here's a more concise way to write our example program.</p> <pre><code>const number = Number(prompt(\"Enter a number:\"));\nif (number &gt; 0) {\n  console.log(`${number} is positive`);\n} else if (number &lt; 0) {\n  console.log(`${number} is negative`);\n} else {\n  console.log(`${number} is zero`);\n}\n</code></pre>"},{"location":"chapter03/#add-additional-logic","title":"Add additional logic","text":""},{"location":"chapter03/#and-operator","title":"\"And\" operator","text":"<p>Suppose you want to check if a number is between 0 and 100. You're essentially checking if it's \"greater than or equal to 0\" and \"less than or equal to 100\". Both sub-conditions must be satisfied at the same time.</p> <p>Info</p> <p>The expression <code>0 &lt;= number &lt;= 100</code> is correct from a mathematical point of view but cannot be written in JavaScript (neither in most other programming languages).</p> <p>Here's how you'd translate that same check into JS.</p> <pre><code>if ((number &gt;= 0) &amp;&amp; (number &lt;= 100)) {\n  console.log(`${number} is between 0 and 100, both included`);\n}\n</code></pre> <p>Tip</p> <p>Parentheses between sub-conditions are not mandatory but I advise you to add them anyway, to avoid nasty bugs in some special cases.</p> <p>The <code>&amp;&amp;</code> operator (\"logical and\") can apply to both types of boolean values. <code>true</code> will only be the result of the statement if both conditions are true.</p> <pre><code>console.log(true &amp;&amp; true);   // true\nconsole.log(true &amp;&amp; false);  // false\nconsole.log(false &amp;&amp; true);  // false\nconsole.log(false &amp;&amp; false); // false\n</code></pre> <p>The previous result is the truth table of the <code>&amp;&amp;</code> operator.</p>"},{"location":"chapter03/#or-operator","title":"\"Or\" operator","text":"<p>Now imagine you want to check that a number is outside the range of 0 and 100. To meet this requirement, the number should be less than 0 or greater than 100.</p> <p>Here it is, translated into JavaScript:</p> <pre><code>if ((number &lt; 0) || (number &gt; 100)) {\n  console.log(`${number} is not in between 0 and 100`);\n}\n</code></pre> <p>The <code>||</code> operator (\"logical or\") makes statements <code>true</code> if at least one of the statements is true. Here's its truth table:</p> <pre><code>console.log(true || true);   // true\nconsole.log(true || false);  // true\nconsole.log(false || true);  // true\nconsole.log(false || false); // false\n</code></pre>"},{"location":"chapter03/#short-circuit-evaluation","title":"Short-circuit evaluation","text":"<p>As logical expressions are evaluated left to right, they are tested for possible \"short-circuit\" evaluation using the following rules:</p> <ul> <li><code>false &amp;&amp; expr</code> returns <code>false</code>.</li> <li><code>true || expr</code> returns <code>true</code>.</li> </ul> <p>In both cases, the <code>expr</code> expression is not evaluated.</p>"},{"location":"chapter03/#usage-with-non-boolean-values","title":"Usage with non-boolean values","text":"<p>The <code>&amp;&amp;</code> and <code>||</code> operators can also be applied to non-boolean values. In these cases, they may not return a boolean value.</p> <ul> <li><code>expr1 &amp;&amp; expr2</code> returns <code>expr1</code> if this expression can be converted to <code>false</code>. Otherwise, it returns <code>expr2</code>.</li> <li><code>expr1 || expr2</code> returns <code>expr1</code> if this expression can be converted to <code>true</code>. Otherwise, it returns <code>expr2</code>.</li> </ul> <p>In JavaScript, a value or an expression that can be converted to <code>false</code> is said to be falsy. If, on the contrary, it can be converted to <code>true</code>, it is so-called truthy. All values are considered truthy except for the following falsy ones:</p> <ul> <li><code>false</code> (obviously!)</li> <li><code>undefined</code></li> <li><code>null</code></li> <li><code>NaN</code> (Not A Number)</li> <li><code>0</code></li> <li><code>\"\"</code> or <code>''</code></li> </ul> <p>Here are a few examples illustrating this JS-specific behaviour.</p> <pre><code>console.log(true &amp;&amp; \"Hello\");      // \"Hello\"\nconsole.log(false &amp;&amp; \"Hello\");     // false\nconsole.log(undefined &amp;&amp; \"Hello\"); // undefined\nconsole.log(\"\" &amp;&amp; \"Hello\");        // \"\"\nconsole.log(\"Hello\" &amp;&amp; \"Goodbye\")  // \"Goodbye\"\n\nconsole.log(true || \"Hello\");      // true\nconsole.log(false || \"Hello\");     // \"Hello\"\nconsole.log(undefined || \"Hello\"); // \"Hello\"\nconsole.log(\"\" || \"Hello\");        // \"Hello\"\nconsole.log(\"Hello\" || \"Goodbye\")  // \"Hello\"\n</code></pre>"},{"location":"chapter03/#not-operator","title":"\"Not\" operator","text":"<p>There's another operator for when you know what you don\u2019t want: the not operator! You'll use a <code>!</code> for this.</p> <pre><code>if (!(number &gt; 100)) {\n  console.log(`${number} is less than or equal to 100`);\n}\n</code></pre> <p>Here's the truth table of the <code>!</code> operator.</p> <pre><code>console.log(!true);  // false\nconsole.log(!false); // true\n</code></pre>"},{"location":"chapter03/#multiple-choices","title":"Multiple choices","text":"<p>Let's write some code that helps people decide what to wear based on the weather using <code>if</code>/<code>else</code>.</p> <pre><code>const weather = prompt(\"What's the weather like?\");\nif (weather === \"sunny\") {\n  console.log(\"T-shirt time!\");\n} else if (weather === \"windy\") {\n  console.log(\"Windbreaker life.\");\n} else if (weather === \"rainy\") {\n  console.log(\"Bring that umbrella!\");\n} else if (weather === \"snowy\") {\n  console.log(\"Just stay inside!\");\n} else {\n  console.log(\"Not a valid weather type\");\n}\n</code></pre> <p>When a program should trigger a block from several operations depending on the value of an expression, you can write it using the JavaScript statement <code>switch</code> to do the same thing.</p> <pre><code>const weather = prompt(\"What's the weather like?\");\nswitch (weather) {\n  case \"sunny\":\n    console.log(\"T-shirt time!\");\n    break;\n  case \"windy\":\n    console.log(\"Windbreaker life.\");\n    break;\n  case \"rainy\":\n    console.log(\"Bring that umbrella!\");\n    break;\n  case \"snowy\":\n    console.log(\"Winter is coming! Just stay inside!\");\n    break;\n  default:\n    console.log(\"Not a valid weather type\");\n}\n</code></pre> <p>If you test it out, the result will be the same as the previous version.</p> <p>The <code>switch</code> statement kicks off the execution of one code block among many. Only the code block that matches the relevant situation will be executed.</p> <pre><code>switch (expression) {\n  case value1:\n    // Code to run when the expression matches value1\n    break;\n  case value2:\n    // Code to run when the expression matches value2\n    break;\n  // ...\n  default:\n  // Code to run when neither case matches\n}\n</code></pre> <p>You can set as many cases as you want! The word <code>default</code>, which is put at the end of <code>switch</code>, is optional. It can let you handle errors or unexpected values.</p> <p>Adding a <code>break;</code> in each block is important so you get out of the switch statement!</p> <pre><code>const x = \"abc\";\nswitch (x) {\n  case \"abc\":\n    console.log(\"x = abc\");\n  // break omitted: the next block is also run!\n  case \"def\":\n    console.log(\"x = def\");\n    break;\n}\n</code></pre> <p>The previous example show <code>\"x = abc\"</code> (the correct result) but also <code>\"x = def\"</code>.</p>"},{"location":"chapter03/#tldr","title":"TL;DR","text":"<ul> <li>The <code>if</code> keyword defines a conditional statement, also called a test. The associated code block is only run if the condition is satisfied (its value is <code>true</code>). Thus, a condition is an expression whose evaluation always produces a boolean result (<code>true</code> or <code>false</code>).</li> </ul> <pre><code>if (condition) {\n  // Code to run when the condition is true\n}\n</code></pre> <ul> <li> <p>The code block associated to an <code>if</code> is delimited by a pair of opening and closing braces. To improve visibility, its statements are generally indented (shifted to the right).</p> </li> <li> <p>The comparison operators <code>===</code>, <code>!==</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code> and <code>&gt;=</code> are used to compare numbers inside a condition. All of them return a boolean result.</p> </li> <li> <p>An <code>else</code> statement can be associated to an <code>if</code> to express an alternative. Depending on the condition value, either the code block associated to the <code>if</code> or the one associated to the <code>else</code> will be run, but never both. There is no limit to the depth of condition nesting.</p> </li> </ul> <pre><code>if (condition) {\n  // Code to run when the condition is true\n}\nelse {\n  // Code to run when the condition is false\n}\n</code></pre> <ul> <li> <p>Complex conditions can be created using the logical operators <code>&amp;&amp;</code> (\"and\"), <code>||</code> (\"or\") and <code>!</code> (\"not\").</p> </li> <li> <p>The <code>switch</code> statement is used to kick off the execution of one code block among many, depending on the value of an expression.</p> </li> </ul> <pre><code>switch (expression) {\ncase value1:\n  // Code to run when the expression matches value1\n  break;\ncase value2:\n  // Code to run when the expression matches value2\n  break;\n...\ndefault:\n  // Code to run when neither case matches\n}\n</code></pre>"},{"location":"chapter03/#coding-time","title":"Coding time!","text":"<p>Here are a few pieces of advice about these exercises:</p> <ul> <li> <p>Keep on choosing your variable names wisely, and respect indentation when creating code blocks associated to <code>if</code>, <code>else</code> and <code>switch</code> statements.</p> </li> <li> <p>Try to find alternative solutions. For example, one using an <code>if</code> and another using a <code>switch</code>.</p> </li> <li> <p>Test your programs thoroughly, without fear of finding mistakes. It's a very important skill.</p> </li> </ul>"},{"location":"chapter03/#following-day","title":"Following day","text":"<p>Write a program that accepts a day name from the user, then shows the name of the following day. Incorrect inputs must be taken into account.</p>"},{"location":"chapter03/#number-comparison","title":"Number comparison","text":"<p>Write a program that accepts two numbers, then compares their values and displays an appropriate message in all cases.</p>"},{"location":"chapter03/#final-values","title":"Final values","text":"<p>Take a look at the following program.</p> <pre><code>let nb1 = Number(prompt(\"Enter nb1:\"));\nlet nb2 = Number(prompt(\"Enter nb2:\"));\nlet nb3 = Number(prompt(\"Enter nb3:\"));\n\nif (nb1 &gt; nb2) {\n  nb1 = nb3 * 2;\n} else {\n  nb1++;\n  if (nb2 &gt; nb3) {\n    nb1 += nb3 * 3;\n  } else {\n    nb1 = 0;\n    nb3 = nb3 * 2 + nb2;\n  }\n}\nconsole.log(nb1, nb2, nb3);\n</code></pre> <p>Before executing it, try to guess the final values of variables <code>nb1</code>, <code>nb2</code> and <code>nb3</code> depending on their initial values. Complete the following table.</p> Initial values <code>nb1</code> final value <code>nb2</code> final value <code>nb3</code> final value <code>nb1=nb2=nb3=4</code> <code>nb1=4,nb2=3,nb3=2</code> <code>nb1=2,nb2=4,nb3=0</code> <p>Check your predictions by executing the program.</p>"},{"location":"chapter03/#number-of-days-in-a-month","title":"Number of days in a month","text":"<p>Write a program that accepts a month number (between 1 and 12), then shows the number of days of that month. Leap years are excluded. Incorrect inputs must be taken into account.</p>"},{"location":"chapter03/#following-second","title":"Following second","text":"<p>Write a program that asks for a time under the form of three information (hours, minutes, seconds). The program calculates and shows the time one second after. Incorrect inputs must be taken into account.</p> <p>This is not as simple as it seems... Look at the following results to see for yourself:</p> <ul> <li>14h17m59s should give 14h18m0s</li> <li>6h59m59s should give 7h0m0s</li> <li>23h59m59s should give 0h0m0s (midnight)</li> </ul>"},{"location":"chapter04/","title":"Repeat statements","text":"<p>In this chapter, we'll look at how to execute code on a repeating basis.</p>"},{"location":"chapter04/#introduction","title":"Introduction","text":"<p>If you wanted to write code that displayed numbers between 1 and 5, you could do it with what you've already learned:</p> <pre><code>console.log(1);\nconsole.log(2);\nconsole.log(3);\nconsole.log(4);\nconsole.log(5);\n</code></pre> <p>This is pretty tiresome though and would be much more complex for lists of numbers between 1 and 1000, for example. How can you accomplish the same thing more simply?</p> <p>JavaScript lets you write code inside a loop that executes repeatedly until it's told to stop. Each time the code runs, it's called an iteration.</p> <p></p>"},{"location":"chapter04/#the-while-loop","title":"The <code>while</code> loop","text":"<p>A <code>while</code> loop lets you repeat code while a certain condition is true.</p>"},{"location":"chapter04/#example","title":"Example","text":"<p>Here's a sample program written with a <code>while</code> loop.</p> <pre><code>let number = 1;\nwhile (number &lt;= 5) {\n  console.log(number);\n  number++;\n}\n</code></pre> <p>Just like the previous one, this code block shows all integer numbers between 1 and 5.</p> <p></p>"},{"location":"chapter04/#how-it-works","title":"How it works","text":"<p>You'll use the following syntax to write a <code>while</code> loop.</p> <pre><code>while (condition) {\n  // Code to run while the condition is true\n}\n</code></pre> <p>Before each loop iteration, the condition in parentheses is evaluated to determine whether it's true or not. The code associated with a loop is called its body.</p> <ul> <li> <p>If the condition's value is <code>true</code>, the code in the <code>while</code> loop's body runs. Afterwards, the condition is re-evaluated to see if it's still true or not. The cycle continues!</p> </li> <li> <p>If the condition's value is <code>false</code>, the code in the loop stops running or doesn\u2019t run.</p> </li> </ul> <p>Tip</p> <p>The loop body must be placed within curly braces, except if it's only one statement. For now, always use curly braces for your loops.</p>"},{"location":"chapter04/#the-for-loop","title":"The <code>for</code> loop","text":"<p>You'll often need to write loops with conditions that are based on the value of a variable updated in the loop body, like in our example. JavaScript offers another loop type to account for this: the <code>for</code> loop.</p>"},{"location":"chapter04/#example_1","title":"Example","text":"<p>Here's the same program as above written instead with a <code>for</code> loop.</p> <pre><code>let number;\nfor (number = 1; number &lt;= 5; number++) {\n  console.log(number);\n}\n</code></pre> <p>It gives exactly the same result.</p>"},{"location":"chapter04/#how-it-works_1","title":"How it works","text":"<p>Here's the <code>for</code> loop syntax.</p> <pre><code>for (initialization; condition; final expression) {\n  // code to run while the condition is true\n}\n</code></pre> <p>This is a little more complicated than the <code>while</code> loop syntax:</p> <ul> <li> <p>Initialization only happens once, when the code first kicks off. It's often used to set the initial value of the variable associated to the loop condition.</p> </li> <li> <p>The condition is evaluated once before the loop runs each time. If it's true, the code runs. If not, the code doesn\u2019t run.</p> </li> <li> <p>The final expression is evaluated after the loop runs each time. It's often used to update the value of the variable associated with the loop condition, as we saw in the previous example.</p> </li> </ul>"},{"location":"chapter04/#the-loop-counter","title":"The loop counter","text":"<p>The variable used during initialization, condition, and the final expression of a loop is called a counter and is often named <code>i</code>. This counter can be declared in the loop initialization to limit its scope to the loop body.</p> <pre><code>for (let i = 1; i &lt;= 5; i++) {\n  console.log(i); // OK\n}\nconsole.log(i); // Error: the i variable is not visible here\n</code></pre>"},{"location":"chapter04/#common-mistakes","title":"Common mistakes","text":""},{"location":"chapter04/#infinite-while-loop","title":"Infinite <code>while</code> loop","text":"<p>The main risk with <code>while</code> loops is producing an infinite loop, meaning the condition is always true, and the code runs forever. This will crash your program! For example, let's say you forget a code line that increments the <code>number</code> variable.</p> <pre><code>let number = 1;\nwhile (number &lt;= 5) {\n  console.log(number);\n  // The number variable is never updated: the loop condition stays true forever\n}\n</code></pre> <p>To protect yourself from infinite loops, you have to make sure the loop condition will eventually become false.</p>"},{"location":"chapter04/#manipulating-a-for-loop-counter","title":"Manipulating a <code>for</code> loop counter","text":"<p>Imagine that you accidentally modify the loop counter in the loop body, just like in the following example.</p> <pre><code>for (let i = 1; i &lt;= 5; i++) {\n  console.log(i);\n  i++; // The i variable is updated in the loop body\n}\n</code></pre> <p>This program produces the following result.</p> <p></p> <p>Each time the loop runs, the counter variable is incremented twice: once in the body and once in the final expression after the loop runs. When you're using a <code>for</code> loop, you'll almost always want to omit anything to do with the counter inside the body of your loop. Just leave it in that first line!</p>"},{"location":"chapter04/#which-loop-structure-should-i-use","title":"Which loop structure should I use?","text":"<p><code>For</code> loops are great because they include the notion of counting by default, avoiding the problem of infinite loops. However, it means you have to know how many times you want the loop to run as soon as you write your code. For situations where you don\u2019t already know how many times the code should run, <code>while</code> loops make sense. Here's a <code>while</code> loop use case in which a user is asked to type letters over and over until entering X:</p> <pre><code>let letter = \"\";\nwhile (letter !== \"X\") {\n  letter = prompt(\"Type a letter or X to exit:\");\n}\n</code></pre> <p>You can\u2019t know how many times it'll take for the user to enter <code>X</code>, so <code>while</code> is generally good for loops that depend on user interaction.</p> <p>Ultimately, choosing which loop to use depends on context. All loops can be written with <code>while</code>, but if you know in advance how many times you want the loop to run, <code>for</code> is the best choice.</p>"},{"location":"chapter04/#tldr","title":"TL;DR","text":"<ul> <li> <p>Loops are used to repeat a series of statements. Each repetition is called an iteration. The code block associated with a loop is called its body.</p> </li> <li> <p>The <code>while</code> loop repeats statements while a certain condition is true. The <code>for</code> loop gives the ability to manage what happens just before the loop starts and after each loop iteration has run.</p> </li> </ul> <pre><code>// While loop\nwhile (condition) {\n  // Code to run while the condition is true\n}\n\n// For loop\nfor (initialization; condition; final expression) {\n  // code to run while the condition is true\n}\n</code></pre> <ul> <li> <p>The variable associated with the loop condition is called the loop counter and often named <code>i</code>.</p> </li> <li> <p>Beware! The condition of a <code>while</code> loop must eventually become false, to avoid the risk of an infinite loop. Also, updating the counter of a <code>for</code> loop inside its body is a bad idea.</p> </li> <li> <p>All loops can be written with <code>while</code>, but if you know in advance how many times you want the loop to run, <code>for</code> is the best choice.</p> </li> </ul>"},{"location":"chapter04/#coding-time","title":"Coding time!","text":"<p>Try to code each exercise twice, once with a <code>while</code> loop and the other with a <code>for</code>, to see for yourself which one is the most appropriate.</p>"},{"location":"chapter04/#carousel","title":"Carousel","text":"<p>Write a program that launches a carousel for 10 turns, showing the turn number each time.</p> <p>When it's done, improve it so that the number of turns is given by the user.</p>"},{"location":"chapter04/#parity","title":"Parity","text":"<p>Check the following program that shows even numbers (divisible by 2) between 1 and 10.</p> <pre><code>for (let i = 1; i &lt;= 10; i++) {\n  if (i % 2 === 0) {\n    console.log(`${i} is even`);\n  }\n}\n</code></pre> <p>This program uses the modulo operator <code>%</code>, which calculates the remainder after division of one number by another. It's often used to assess number parity.</p> <pre><code>console.log(10 % 2); // 0 because 10 = 5 * 2 + 0\nconsole.log(11 % 2); // 1 because 11 = 5 * 2 + 1\nconsole.log(18 % 3); // 0 because 18 = 3 * 6 + 0\nconsole.log(19 % 3); // 1 because 19 = 3 * 6 + 1\nconsole.log(20 % 3); // 2 because 20 = 3 * 6 + 2\n</code></pre> <p>Improve the program so that it also shows odd numbers. Improve it again to replace the initial number <code>1</code> by a number given by the user.</p> <p>Info</p> <p>This program must show exactly 10 numbers including the first one, not 11 numbers!</p>"},{"location":"chapter04/#input-validation","title":"Input validation","text":"<p>Write a program that continues to ask the user for a number until the entered number is less than or equal to 100.</p> <p>When you are done with the above, improve the program so that the terminating number is between 50 and 100.</p>"},{"location":"chapter04/#multiplication-table","title":"Multiplication table","text":"<p>Write a program that asks the user for a number, then shows the multiplication table for this number.</p> <p>When you are done, improve the program so it only accepts numbers between 2 and 9 (use the previous exercise as a blueprint).</p>"},{"location":"chapter04/#neither-yes-nor-no","title":"Neither yes nor no","text":"<p>Write a program that plays \"neither yes, nor no\" with the user. Specifically, the program asks the user to enter text until either \"yes\" or \"no\" is typed, which ends the game.</p>"},{"location":"chapter04/#fizzbuzz","title":"FizzBuzz","text":"<p>Write a program that shows all numbers between 1 and 100 with the following exceptions:</p> <ul> <li> <p>It shows <code>\"Fizz\"</code> instead if the number is divisible by 3.</p> </li> <li> <p>It shows <code>\"Buzz\"</code> instead if the number is divisible by 5 and not by 3.</p> </li> </ul> <p>When it's done, improve it so that the program shows <code>\"FizzBuzz\"</code> instead for numbers divisible both by 3 and by 5.</p> <p>Note</p> <p>This exercise has many, many solutions. It's a job interview classic that a significant number of candidates fail. Try your best!</p>"},{"location":"chapter05/","title":"Write functions","text":"<p>In this chapter, you'll learn how to break down a program into subparts called functions.</p>"},{"location":"chapter05/#introduction-the-role-of-functions","title":"Introduction: the role of functions","text":"<p>To understand why functions are important, check out our example from a previous chapter: the burrito algorithm :)</p> <pre><code>Begin\n  Get out the rice cooker\n  Fill it with rice\n  Fill it with water\n  Cook the rice\n  Chop the vegetables\n  Stir-fry the vegetables\n  Taste-test the vegetables\n    If the veggies are good\n      Remove them from the stove\n    If the veggies aren\u2019t good\n      Add more pepper and spices\n    If the veggies aren\u2019t cooked enough\n      Keep stir-frying the veggies\n  Heat the tortilla\n  Add rice to the tortilla\n  Add vegetables to the tortilla\n  Roll tortilla\nEnd\n</code></pre> <p>Here's the same general idea, written in a different way.</p> <pre><code>Begin\n  Cook rice\n  Stir-fry vegetables\n  Add fillings\n  Roll together\nEnd\n</code></pre> <p>The first version details all the individual actions that make up the cooking process. The second breaks down the recipe into broader steps and introduces concepts that could be re-used for other dishes as well like cook, stir-fry, add and roll.</p> <p>Our programs so far have mimicked the first example, but it's time to start modularizing our code into sub-steps so we can re-use bits and pieces as needed. In JavaScript, these sub-steps are called functions!</p>"},{"location":"chapter05/#discovering-functions","title":"Discovering functions","text":"<p>A function is a group of statements that performs a particular task.</p> <p>Here's a basic example of a function.</p> <pre><code>function sayHello() {\n  console.log(\"Hello!\");\n}\n\nconsole.log(\"Start of program\");\nsayHello();\nconsole.log(\"End of program\");\n</code></pre> <p></p> <p>Let's study what just happened.</p>"},{"location":"chapter05/#declaring-a-function","title":"Declaring a function","text":"<p>Check out the first lines of the example above.</p> <pre><code>function sayHello() {\n  console.log(\"Hello!\");\n}\n</code></pre> <p>This creates a function called <code>sayHello()</code>. It consists of only one statement that will make a message appear in the console: <code>\"Hello!\"</code>.</p> <p>This is an example of a function declaration.</p> <pre><code>// Declare a function called myFunction\nfunction myFunction() {\n  // Function code\n}\n</code></pre> <p>The declaration of a function is performed using the JavaScript keyword <code>function</code>, followed by the function name and a pair of parentheses. Statements that make up the function constitute the body of the function. These statements are enclosed in curly braces and indented.</p>"},{"location":"chapter05/#calling-a-function","title":"Calling a function","text":"<p>Functions must be called in order to actually run. Here's the second part of our example program.</p> <pre><code>console.log(\"Start of program\");\nsayHello();\nconsole.log(\"End of program\");\n</code></pre> <p>The first and third statements explicitly display messages in the console. The second line makes a call to the function <code>sayHello()</code>.</p> <p>You can call a function by writing the name of the function followed by a pair of parentheses.</p> <pre><code>// ...\nmyFunction(); // Call myFunction\n// ...\n</code></pre> <p>Calling a function triggers the execution of actions listed therein (the code in its body). After it's done, execution resumes at the place where the call was made.</p> <p></p>"},{"location":"chapter05/#usefulness-of-functions","title":"Usefulness of functions","text":"<p>A complex problem is generally more manageable when broken down into simpler subproblems. Computer programs are no exception to this rule. Written as a combination of several short and focused functions, a program will be easier to understand and to update than a monolithic one. As an added bonus, some functions could be reused in other programs!</p> <p>Creating functions can also be a solution to the problem of code duplication; instead of being duplicated in several places, a piece of code can be centralized in a function and called from anywhere when needed.</p>"},{"location":"chapter05/#function-contents","title":"Function contents","text":""},{"location":"chapter05/#return-value","title":"Return value","text":"<p>Here is a variation of our example program.</p> <pre><code>function sayHello() {\n  return \"Hello!\";\n}\n\nconsole.log(\"Start of program\");\nconst message = sayHello(); // Store the function return value in a variable\nconsole.log(message);       // Show the return value\nconsole.log(\"End of program\");\n</code></pre> <p>Run this code, and you'll see the same result as before.</p> <p>In this example, the body of the <code>sayHello()</code> function has changed: the statement <code>console.log(\"Hello!\")</code> was replaced by <code>return \"Hello!\"</code>.</p> <p>The keyword <code>return</code> indicates that the function will return a value, which is specified immediately after the keyword. This return value can be retrieved by the caller.</p> <pre><code>// Declare myFunction\nfunction myFunction() {\n  let returnValue;\n  // Calculate return value\n  // returnValue = ...\n  return returnValue;\n}\n\n// Get return value from myFunction\nconst result = myFunction();\n// ...\n</code></pre> <p>This return value can be of any type (number, string, etc). However, a function can return only one value.</p> <p>Warning</p> <p>Retrieving a function's return value is not mandatory, but in that case the return value is \"lost\".</p> <p>If you try to retrieve the return value of a function that does not actually have one, we get the JavaScript value <code>undefined</code>.</p> <pre><code>function myFunction() {\n  // ...\n  // No return value\n}\n\nconst result = myFunction();\nconsole.log(result); // undefined\n</code></pre> <p>Warning</p> <p>A function stops running immediately after the <code>return</code> statement is executed. Any further statements are never run.</p> <p>Let's simplify our example a bit by getting rid of the variable that stores the function's return value.</p> <pre><code>function sayHello() {\n  return \"Hello!\";\n}\n\nconsole.log(sayHello()); // \"Hello!\"\n</code></pre> <p>The return value of the <code>sayHello()</code> function is directly output through the <code>console.log()</code> command.</p>"},{"location":"chapter05/#local-variables","title":"Local variables","text":"<p>You can declare variables inside a function, as in the example below.</p> <pre><code>function sayHello() {\n  const message = \"Hello!\";\n  return message;\n}\n\nconsole.log(sayHello()); // \"Hello!\"\n</code></pre> <p>The function <code>sayHello()</code> declares a variable named <code>message</code> and returns its value.</p> <p>The variables declared in the body of a function are called local variables. Their scope is limited to the function body (hence their name). If you try to use these local variables outside the function, you won\u2019t be able to!</p> <pre><code>function sayHello() {\n  const message = \"Hello!\";\n  return message;\n}\n\nconsole.log(sayHello()); // \"Hello!\"\nconsole.log(message); // Error: the message variable is not visible here\n</code></pre> <p>Each function call will redeclare the function's local variables, making the calls perfectly independent from one another.</p> <p>Not being able to use local variables outside the functions in which they are declared may seem like a limitation. Actually, it's a good thing! This means functions can be designed as autonomous and reusable. Moreover, this prevents naming conflicts: allowing variables declared in different functions to have the same name.</p>"},{"location":"chapter05/#parameter-passing","title":"Parameter passing","text":"<p>A parameter is information that the function needs in order to work. The function parameters are defined in parentheses immediately following the name of the function. You can then use the parameter value in the body of the function.</p> <p>You supply the parameter value when calling the function. This value is called an argument.</p> <p>Let's edit the above example to add a personalized greeting:</p> <pre><code>function sayHello(name) {\n  const message = `Hello, ${name}!`;\n  return message;\n}\n\nconsole.log(sayHello(\"Baptiste\")); // \"Hello, Baptiste!\"\nconsole.log(sayHello(\"Thomas\"));   // \"Hello, Thomas!\"\n</code></pre> <p>The declaration of the <code>sayHello()</code> function now contains a parameter called <code>name</code>.</p> <p>In this example, the first call to <code>sayHello()</code> is done with the argument <code>\"Baptiste\"</code> and the second one with the argument <code>\"Thomas\"</code>. In the first call, the value of the <code>name</code> parameter is <code>\"Baptiste\"</code>, and <code>\"Thomas\"</code> in the second.</p> <p>Here's the general syntax of a function declaration with parameters. The number of parameters is not limited, but more than 3 or 4 is rarely useful.</p> <pre><code>// Declare a function myFunction with parameters\nfunction myFunction(param1, param2, ...) {\n  // Statements using param1, param2, ...\n}\n\n// Function call\n// param1 value is set to arg1, param2 to arg2, ...\nmyFunction(arg1, arg2, ...);\n</code></pre> <p>Just like with local variables, parameter scope is limited to the function body. Thus, an external variable used as an argument in a function call may have the same name as a function parameter. The following example is perfectly valid.</p> <pre><code>function sayHello(name) {\n  // Here, \"name\" is the function parameter\n  const message = `Hello, ${name}!`;\n  return message;\n}\n\n// Here, \"name\" is a variable used as an argument\nlet name = \"Baptiste\";\nconsole.log(sayHello(name)); // \"Hello, Baptiste!\"\nname = \"Thomas\";\nconsole.log(sayHello(name)); // \"Hello, Thomas!\"\n</code></pre> <p>When calling a function, respecting the number and order of parameters is paramount! Check out the following example.</p> <pre><code>function presentation(name, age) {\n  console.log(`Your name is ${name} and you're ${age} years old`);\n}\n\npresentation(\"Garance\", 9); // \"Your name is Garance and you're 9 years old\"\npresentation(5, \"Prosper\"); // \"Your name is 5 and you're Prosper years old\"\n</code></pre> <p>The second call arguments are given in reverse order, so <code>name</code> gets the value <code>5</code> and <code>age</code> gets <code>\"Prosper\"</code> for that call.</p>"},{"location":"chapter05/#anonymous-functions","title":"Anonymous functions","text":"<p>Declaration is not the only way to create functions in JavaScript. Check out this example.</p> <pre><code>const hello = function(name) {\n  const message = `Hello, ${name}!`;\n  return message;\n};\n\nconsole.log(hello(\"Richard\")); // \"Hello, Richard!\"\n</code></pre> <p>In this example, the function is assigned to the <code>hello</code> variable. The value of this variable is a function. We call the function using that variable. This is an example of a function expression. A function expression defines a function as part of a larger expression, typically a variable assignment.</p> <p>The function created in this example has no name: it is anonymous. As you'll soon discover, anonymous functions are heavily used in JavaScript.</p> <p>Here's how to create an anonymous function and assign it to a variable.</p> <pre><code>// Assignment of an anonymous function to the myFunc variable\nconst myFunc = function(param1, param2, ...) {\n  // Statements using param1, param2, ...\n};\n\n// Anonymous function call\n// param1 value is set to arg1, param2 to arg2, ...\nmyFunc(arg1, arg2, ...);\n</code></pre> <p>Recent language evolutions have introduced a more concise way to create anonymous functions:</p> <pre><code>const hello = (name) =&gt; {\n  const message = `Hello, ${name}!`;\n  return message;\n};\n\nconsole.log(hello(\"William\")); // \"Hello, William!\"\n</code></pre> <p>Functions created this way are called fat arrow functions.</p> <pre><code>// Assignment of an anonymous function to the myFunc variable\nconst myFunc = (param1, param2, ...) =&gt; {\n  // Statements using param1, param2, ...\n};\n\n// Anonymous function call\n// param1 value is set to arg1, param2 to arg2, ...\nmyFunc(arg1, arg2, ...);\n</code></pre> <p>Fat arrow function syntax can be further simplified in some particular cases:</p> <ul> <li>When there's only one statement in the function body, everything can be written on the same line without curly braces. The <code>return</code> statement is omitted and implicit.</li> <li>When the function accepts only one parameter, parentheses around it can be omitted.</li> </ul> <pre><code>// Minimalist to the max\nconst hello = name =&gt; `Hello, ${name}!`;\n\nconsole.log(hello(\"Kate\")); // \"Hello, Kate!\"\n</code></pre> <p>Functions are a core part of the JavaScript toolset. You'll use them constantly in your programs.</p>"},{"location":"chapter05/#guidelines-for-programming-with-functions","title":"Guidelines for programming with functions","text":""},{"location":"chapter05/#creating-functions-wisely","title":"Creating functions wisely","text":"<p>Functions can include everything you can use in a regular program: variables, conditionals, loops, etc. Functions can call one another, giving the programmer an enormous amount of freedom for building programs.</p> <p>However, not everything deserves to be in its own function. It's better to write short and focused ones, in order to limit dependencies and improve program understanding.</p>"},{"location":"chapter05/#leveraging-javascript-predefined-functions","title":"Leveraging JavaScript predefined functions","text":"<p>We have already used several predefined JavaScript functions like <code>prompt()</code> and <code>alert()</code>. There are many others in the language specification. Get to know them instead of reinventing the wheel!</p> <p>Here's an example demonstrating two of the JavaScript mathematical functions.</p> <pre><code>console.log(Math.min(4.5, 5)); // 4.5\nconsole.log(Math.min(19, 9));  // 9\nconsole.log(Math.min(1, 1));   // 1\nconsole.log(Math.random());    // A random number between 0 and 1\n</code></pre> <p>The function <code>Math.min()</code> returns the minimum number among its arguments. The function <code>Math.random()</code> generates a random number between 0 and 1.</p> <p>This book will introduce many other JavaScript functions.</p>"},{"location":"chapter05/#limiting-function-complexity","title":"Limiting function complexity","text":"<p>A function body must be kept simple, or otherwise split into several sub-functions. As a rule of thumb, 30 lines of code should be a max for non-specific cases.</p>"},{"location":"chapter05/#naming-functions-and-parameters-well","title":"Naming functions and parameters well","text":"<p>Function naming is just as important as variable naming. You should choose names that express clearly the function purpose and follow a naming convention. Refer to the appendix for some useful advice.</p> <p>Tip</p> <p>If you have difficulties coming up with a good name for a function, then maybe its purpose is not that clear and you should ask yourself if this function deserves to exist.</p>"},{"location":"chapter05/#tldr","title":"TL;DR","text":"<ul> <li> <p>A function is a group of statements that performs a particular task. JavaScript functions are created using the <code>function</code> keyword.</p> </li> <li> <p>Written as a combination of several short and focused functions, a program will generally be easier to understand and more modular than a monolithic one.</p> </li> <li> <p>A function call triggers the execution of the function code. After it's done, execution resumes at the place where the call was made.</p> </li> <li> <p>Variables declared inside a function are limited in scope to the function body. They are called local variables.</p> </li> <li> <p>A <code>return</code> statement inside the function body defines the return value of the function. A function can accept zero, one or several parameters in order to work. For a particular call, supplied parameter values are called arguments.</p> </li> <li> <p>There are several ways to create a function in JavaScript. A first one is to use a function declaration.</p> </li> </ul> <pre><code>// Function declaration\nfunction myFunction(param1, param2, ...) {\n  // Function code using param1, param2, ...\n}\n\n// Function call\nmyFunction(arg1, arg2, ...);\n</code></pre> <ul> <li>Another way to create a function is to use a function expression. A function expression can be assigned to a variable because in JavaScript, a variable's value can be a function. Function expressions are often used to create anonymous functions (functions without a name).</li> </ul> <pre><code>// Anonymous function created with a function expression and assigned to a variable\nconst myFunc = function(param1, param2, ...) {\n  // Function code using param1, param2, ...\n};\n\n// Function call\nmyFunc(arg1, arg2, ...);\n</code></pre> <ul> <li>A third way to create an anonymous function is the more recent fat arrow syntax.</li> </ul> <pre><code>// Fat arrow anonymous function assigned to a variable\nconst myFunc = (param1, param2, ...) =&gt; {\n  // Function code using param1, param2, ...\n};\n\n// Function call\nmyFunc(arg1, arg2, ...);\n</code></pre> <ul> <li>No matter how it's created, each function should have a precise purpose and a well chosen name (often including an action verb). JavaScript offers a lot of predefined functions covering various needs.</li> </ul>"},{"location":"chapter05/#coding-time","title":"Coding time!","text":""},{"location":"chapter05/#improved-hello","title":"Improved hello","text":"<p>Complete the following program so that it asks the user for his first and last names, then show the result of the <code>sayHello()</code> function.</p> <pre><code>// Say hello to the user\nfunction sayHello(firstName, lastName) {\n  const message = `Hello, ${firstName} ${lastName}!`;\n  return message;\n}\n\n// TODO: ask user for first and last name\n// TODO: call sayHello() and show its result\n</code></pre>"},{"location":"chapter05/#number-squaring","title":"Number squaring","text":"<p>Complete the following program so that the <code>square1()</code> and <code>square2()</code> functions work properly.</p> <pre><code>// Square the given number x\nfunction square1(x) {\n  // TODO: complete the function code\n}\n\n// Square the given number x\nconst square2 = x =&gt; // TODO: complete the function code\n\nconsole.log(square1(0)); // Must show 0\nconsole.log(square1(2)); // Must show 4\nconsole.log(square1(5)); // Must show 25\n\nconsole.log(square2(0)); // Must show 0\nconsole.log(square2(2)); // Must show 4\nconsole.log(square2(5)); // Must show 25\n</code></pre> <p>When it's done, update the program so that it shows the square of every number between 0 and 10.</p> <p>Info</p> <p>Writing 10 dumb calls to <code>square()</code> is forbidden! You know how to repeat statements, don\u2019t you? ;)</p>"},{"location":"chapter05/#minimum-of-two-numbers","title":"Minimum of two numbers","text":"<p>Let's pretend the JavaScript <code>Math.min()</code> function doesn\u2019t exist. Complete the following program so that the <code>min()</code> function returns the minimum of its two received numbers.</p> <pre><code>// TODO: write the min() function\n\nconsole.log(min(4.5, 5)); // Must show 4.5\nconsole.log(min(19, 9));  // Must show 9\nconsole.log(min(1, 1));   // Must show 1\n</code></pre>"},{"location":"chapter05/#calculator","title":"Calculator","text":"<p>Complete the following program so that it offers the four basic arithmetical operations: addition, subtraction, multiplication and division. You can use either a function declaration or a function expression.</p> <pre><code>// TODO: complete program\n\nconsole.log(calculate(4, \"+\", 6));  // Must show 10\nconsole.log(calculate(4, \"-\", 6));  // Must show -2\nconsole.log(calculate(2, \"*\", 0));  // Must show 0\nconsole.log(calculate(12, \"/\", 0)); // Must show Infinity\n</code></pre>"},{"location":"chapter05/#circumference-and-area-of-a-circle","title":"Circumference and area of a circle","text":"<p>Write a program containing two functions to calculate the circumference and area of a circle defined by its radius. Test it using user input.</p> <p>Here are some tips for solving this exercise:</p> <ul> <li>Circumference and area calculation formulas should be part of your secondary school memories... Or a Google click away :)</li> <li>The value of number \u03c0 (Pi) is obtained with <code>Math.PI</code> in JavaScript.</li> <li>You might want to use the exponentiation operator <code>**</code> to perform computations.</li> </ul> <pre><code>console.log(2 ** 3); // 8: 2 * 2 * 2\nconsole.log(3 ** 2); // 9: 3 * 3\n</code></pre>"},{"location":"chapter06/","title":"Create your first objects","text":"<p>This chapter will introduce objects and the way they are created and used in JavaScript.</p>"},{"location":"chapter06/#introduction","title":"Introduction","text":""},{"location":"chapter06/#whats-an-object","title":"What's an object?","text":"<p>Think about objects in the non-programming sense, like a pen. A pen can have different ink colors, be manufactured by different people, have a different tip, and many other properties.</p> <p>Similarly, an object in programming is an entity that has properties. Each property defines a characteristic of the object. A property can be a piece of information associated with the object (the color of the pen) or an action (the pen's ability to write).</p>"},{"location":"chapter06/#what-does-this-have-to-do-with-code","title":"What does this have to do with code?","text":"<p>Object-oriented programming (OOP for short) is a way to write programs using objects. When using OOP, you write, create, and modify objects, and the objects make up your program.</p> <p>OOP changes the way a program is written and organized. So far, you've been writing function-based code, sometimes called procedural programming. Now let's discover how to write object-oriented code.</p>"},{"location":"chapter06/#javascript-and-objects","title":"JavaScript and objects","text":"<p>Like many other languages, JavaScript supports programming with objects. It provides a number of predefined objects while also letting you create your own.</p>"},{"location":"chapter06/#creating-an-object","title":"Creating an object","text":"<p>Here is the JavaScript representation of a blue Bic ballpoint pen.</p> <pre><code>const pen = {\n  type: \"ballpoint\",\n  color: \"blue\",\n  brand: \"Bic\"\n};\n</code></pre> <p>As stated earlier, a JavaScript object can be created by simply setting its properties within a pair of curly braces: <code>{...}</code>. Each property is a key/value pair. This is called an object literal.</p> <p>Warning</p> <p>The semicolon <code>;</code> after the closing brace is optional, but it's safer to add it anyway.</p> <p>The above code defines a variable named <code>pen</code> whose value is an object: you can therefore say <code>pen</code> is an object. This object has three properties: <code>type</code>, <code>color</code> and <code>brand</code>. Each property has a name and a value and is followed by a comma <code>,</code> (except the last one).</p>"},{"location":"chapter06/#accessing-an-objects-properties","title":"Accessing an object's properties","text":"<p>After creating an object, you can access the value of its properties using dot notation such as <code>myObject.myProperty</code>.</p> <pre><code>const pen = {\n  type: \"ballpoint\",\n  color: \"blue\",\n  brand: \"Bic\"\n};\n\nconsole.log(pen.type);  // \"ballpoint\"\nconsole.log(pen.color); // \"blue\"\nconsole.log(pen.brand); // \"Bic\"\n</code></pre> <p>Accessing an object's property is an expression that produces a value. Such an expression can be included in more complex ones. For example, here's how to show our pen properties in one statement.</p> <pre><code>const pen = {\n  type: \"ballpoint\",\n  color: \"blue\",\n  brand: \"Bic\"\n};\n\nconsole.log(`I write with a ${pen.color} ${pen.brand} ${pen.type} pen`);\n</code></pre> <p></p>"},{"location":"chapter06/#modifying-an-object","title":"Modifying an object","text":"<p>Once an object is created, you can change the value of its properties with the syntax <code>myObject.myProperty = newValue</code>.</p> <pre><code>const pen = {\n  type: \"ballpoint\",\n  color: \"blue\",\n  brand: \"Bic\"\n};\n\npen.color = \"red\"; // Modify the pen color property\n\nconsole.log(`I write with a ${pen.color} ${pen.brand} ${pen.type} pen`);\n</code></pre> <p></p> <p>JavaScript even offers the ability to dynamically add new properties to an already created object.</p> <pre><code>const pen = {\n  type: \"ballpoint\",\n  color: \"blue\",\n  brand: \"Bic\"\n};\n\npen.price = \"2.5\"; // Set the pen price property\n\nconsole.log(`My pen costs ${pen.price}`);\n</code></pre> <p></p>"},{"location":"chapter06/#programming-with-objects","title":"Programming with objects","text":"<p>Many books and courses teach object-oriented programming through examples involving animals, cars or bank accounts. Let's try something cooler and create a mini-role playing game (RPG) using objects.</p> <p>In a role-playing game, each character is defined by many attributes like strength, stamina or intelligence. Here's the character screen of a very popular online RPG.</p> <p></p> <p>In our simpler example, a character will have three attributes:</p> <ul> <li>her name,</li> <li>her health (number of life points),</li> <li>her strength.</li> </ul>"},{"location":"chapter06/#a-naive-example","title":"A naive example","text":"<p>Let me introduce you to Aurora, our first RPG character.</p> <pre><code>const aurora = {\n  name: \"Aurora\",\n  health: 150,\n  strength: 25\n};\n</code></pre> <p>The <code>aurora</code> object has three properties: <code>name</code>, <code>health</code> and <code>strength</code>.</p> <p>Note</p> <p>As you can see, you can assign numbers, strings, and even other objects to properties!</p> <p>Aurora is about to start a series of great adventures, some of which will update her attributes. Check out the following example.</p> <pre><code>const aurora = {\n  name: \"Aurora\",\n  health: 150,\n  strength: 25\n};\n\nconsole.log(`${aurora.name} has ${aurora.health} health points and ${aurora.strength} as strength`);\n\n// Aurora is harmed by an arrow\naurora.health -= 20;\n\n// Aurora equips a strength necklace\naurora.strength += 10;\n\nconsole.log(`${aurora.name} has ${aurora.health} health points and ${aurora.strength} as strength`);\n</code></pre> <p></p>"},{"location":"chapter06/#introducing-methods","title":"Introducing methods","text":"<p>In the above code, we had to write lengthy <code>console.log</code> statements each time to show our character state. There's a cleaner way to accomplish this.</p>"},{"location":"chapter06/#adding-a-method-to-an-object","title":"Adding a method to an object","text":"<p>Observe the following example.</p> <pre><code>const aurora = {\n  name: \"Aurora\",\n  health: 150,\n  strength: 25\n};\n\n// Return the character description\nfunction describe(character) {\n  return `${character.name} has ${character.health} health points and ${character.strength} as strength`;\n}\n\nconsole.log(describe(aurora));\n</code></pre> <p></p> <p>The <code>describe()</code> function takes an object as a parameter. It accesses that object's properties to create a description string.</p> <p>Below is an alternative approach, using a <code>describe()</code> property inside the object.</p> <pre><code>const aurora = {\n  name: \"Aurora\",\n  health: 150,\n  strength: 25,\n\n  // Return the character description\n  describe() {\n    return `${this.name} has ${this.health} health points and ${this\n      .strength} as strength`;\n  }\n};\n\nconsole.log(aurora.describe());\n</code></pre> <p></p> <p>Now our object has a new property available to it: <code>describe()</code>. The value of this property is a function that returns a textual description of the object. The execution result is exactly the same as before.</p> <p>An object property whose value is a function is called a method. Methods are used to define actions for an object. A method adds some behavior to an object.</p>"},{"location":"chapter06/#calling-a-method-on-an-object","title":"Calling a method on an object","text":"<p>Let's look at the last line of our previous example.</p> <pre><code>console.log(aurora.describe());\n</code></pre> <p>To show the character description, we use the <code>aurora.describe()</code> expression instead of <code>describe(aurora)</code>. It makes a crucial difference:</p> <ul> <li> <p><code>describe(aurora)</code> calls the <code>describe()</code> function with the <code>aurora</code> object as an argument. The function is external to the object. This is an example of procedural programming.</p> </li> <li> <p><code>aurora.describe()</code> calls the <code>describe()</code> function on the <code>aurora</code> object. The function is one of the object's properties: it is a method. This is an example of object-oriented programming.</p> </li> </ul> <p>To call a method named <code>myMethod()</code> on an object <code>myObject</code>, the syntax is <code>myObject.myMethod()</code>.</p> <p>Warning</p> <p>Remember to add parentheses, even if empty, when calling an object's method!</p>"},{"location":"chapter06/#the-this-keyword","title":"The <code>this</code> keyword","text":"<p>Now look closely at the body of the <code>describe()</code> method on our object.</p> <pre><code>const aurora = {\n  name: \"Aurora\",\n  health: 150,\n  strength: 25,\n\n  // Return the character description\n  describe() {\n    return `${this.name} has ${this.health} health points and ${this\n      .strength} as strength`;\n  }\n};\n</code></pre> <p>You see a new keyword: <code>this</code>. This is automatically set by JavaScript inside a method and represents the object on which the method was called.</p> <p>The <code>describe()</code> method doesn\u2019t take any parameters. It uses <code>this</code> to access the properties of the object on which it is called.</p>"},{"location":"chapter06/#javascript-predefined-objects","title":"JavaScript predefined objects","text":"<p>The JavaScript language has many predefined objects serving various purposes. We have already encountered some of them:</p> <ul> <li> <p>The <code>console</code> object gives access to the environment console. <code>console.log()</code> is actually a method call.</p> </li> <li> <p>The <code>Math</code> object contains many mathematical properties. For example, <code>Math.PI</code> returns an approximate value of the number \u03c0 (Pi) and the <code>Math.random()</code> function returns a random number between 0 and 1.</p> </li> </ul>"},{"location":"chapter06/#tldr","title":"TL;DR","text":"<ul> <li> <p>A JavaScript object is an entity that has properties. Each property is a key/value pair. The key is the property name.</p> </li> <li> <p>The value of a property can be a piece of information (number, string, etc) or a function. In the latter case, the property is called a method.</p> </li> <li> <p>A JavaScript object literal is created by simply setting its properties within a pair of curly braces.</p> </li> </ul> <pre><code>const myObject = {\n  property1: value1,\n  property2: value2,\n  // ... ,\n  method1(/* ... */) {\n    // ...\n  },\n  method2(/* ... */) {\n    // ...\n  }\n  // ...\n};\n\nmyObject.property1 = newValue; // Set the new value of property1 for myObject\nconsole.log(myObject.property1); // Show the value of property1 for myObject\nmyObject.method1(...);           // Call method1 on myObject\n</code></pre> <ul> <li> <p>Inside a method, the <code>this</code> keyword represents the object on which the method is called.</p> </li> <li> <p>The JavaScript language predefines many useful objects like <code>console</code> or <code>Math</code>.</p> </li> </ul>"},{"location":"chapter06/#coding-time","title":"Coding time!","text":""},{"location":"chapter06/#adding-character-experience","title":"Adding character experience","text":"<p>Improve our example RPG program to add an experience property named <code>xp</code> to the character. Its initial value is 0. Experience must appear in character description.</p> <pre><code>// TODO: create the character object here\n\n// Aurora is harmed by an arrow\naurora.health -= 20;\n\n// Aurora equips a strength necklace\naurora.strength += 10;\n\n// Aurora learn a new skill\naurora.xp += 15;\n\nconsole.log(aurora.describe());\n</code></pre> <p></p>"},{"location":"chapter06/#modeling-a-dog","title":"Modeling a dog","text":"<p>Complete the following program to add the <code>dog</code> object definition.</p> <pre><code>// TODO: create the dog object here\n\nconsole.log(`${dog.name} is a ${dog.species} dog measuring ${dog.size}`);\nconsole.log(`Look, a cat! ${dog.name} barks: ${dog.bark()}`);\n</code></pre> <p></p>"},{"location":"chapter06/#modeling-a-circle","title":"Modeling a circle","text":"<p>Complete the following program to add the <code>circle</code> object definition. Its radius value is input by the user.</p> <pre><code>const r = Number(prompt(\"Enter the circle radius:\"));\n\n// TODO: create the circle object here\n\nconsole.log(`Its circumference is ${circle.circumference()}`);\nconsole.log(`Its area is ${circle.area()}`);\n</code></pre>"},{"location":"chapter06/#modeling-a-bank-account","title":"Modeling a bank account","text":"<p>Write a program that creates an <code>account</code> object with the following characteristics:</p> <ul> <li>A <code>name</code> property set to \"Alex\".</li> <li>A <code>balance</code> property set to 0.</li> <li>A <code>credit</code> method adding the (positive or negative) value passed as an argument to the account balance.</li> <li>A <code>describe</code> method returning the account description.</li> </ul> <p>Use this object to show its description, crediting 250, debiting 80, then show its description again.</p> <p></p>"},{"location":"chapter07/","title":"Store data in arrays","text":"<p>This chapter will introduce you to arrays, a type of variable used in many computer programs to store data.</p>"},{"location":"chapter07/#introduction-to-arrays","title":"Introduction to arrays","text":"<p>Imagine you want to create a list of movies you've liked in the past few years.</p> <p>One solution would be to create several variables:</p> <pre><code>const movie1 = \"The Wolf of Wall Street\";\nconst movie2 = \"Zootopia\";\nconst movie3 = \"Babysitting\";\n// ...\n</code></pre> <p>If you're a movie buff, you may find yourself with too many variables in your program. The worst part is that these variables are completely independent from one another.</p> <p>Another possibility is to group the movies in an object.</p> <pre><code>const movies = {\n  movie1: \"The Wolf of Wall Street\",\n  movie2: \"Zootopia\",\n  movie3: \"Babysitting\",\n  // ...\n};\n</code></pre> <p>This time, the data is centralized in the object <code>movies</code>. The names of its properties (<code>movie1</code>, <code>movie2</code>, <code>movie3</code>...) are, however, unnecessary and repetitive.</p> <p>You need a solution to store items together without naming them individually!</p> <p>Luckily, there is indeed a solution: use an array. An array is a data type that can store a set of elements.</p>"},{"location":"chapter07/#manipulating-arrays-in-javascript","title":"Manipulating arrays in JavaScript","text":"<p>In JavaScript, an array is an object that has special properties.</p>"},{"location":"chapter07/#creating-an-array","title":"Creating an array","text":"<p>Here's how to create our list of movies in the form of an array.</p> <pre><code>const movies = [\"The Wolf of Wall Street\", \"Zootopia\", \"Babysitting\"];\n</code></pre> <p>An array is created with a pair of square brackets <code>[]</code>. Everything within the brackets makes up the array.</p> <p>You can store different types of elements within an array, including strings, numbers, booleans and even objects.</p> <pre><code>const elements = [\"Hello\", 7, { message: \"Hi mom\" }, true];\n</code></pre> <p>Tip</p> <p>Since an array may contain multiple elements, it's good to name the array plurally (for example, <code>movies</code>).</p>"},{"location":"chapter07/#obtaining-an-arrays-size","title":"Obtaining an array's size","text":"<p>The number of elements stored in an array is called its size. Here's how to access it.</p> <pre><code>const movies = [\"The Wolf of Wall Street\", \"Zootopia\", \"Babysitting\"];\nconsole.log(movies.length); // 3\n</code></pre> <p>You access the size of an array via its <code>length</code> property, using the dot notation.</p> <p>Of course, this <code>length</code> property returns 0 in case of an empty array.</p> <pre><code>const emptyArray = []; // Create an empty array\nconsole.log(emptyArray.length); // 0\n</code></pre>"},{"location":"chapter07/#access-an-element-in-an-array","title":"Access an element in an array","text":"<p>Each item in an array is identified by a number called its index - an integer pointer that identifies an element of the array. We can think of an array as a set of boxes, each storing a specific value and associated with an index. Here's the trick: the first element of an array will be index number 0 - not 1. The second element will be index number 1, and so on. The index of the last array element would be the array's size minus 1.</p> <p>Here is how you might represent the <code>movies</code> array:</p> <p></p> <p>You can access a particular element by passing its index within square brackets <code>[]</code>:</p> <pre><code>const movies = [\"The Wolf of Wall Street\", \"Zootopia\", \"Babysitting\"];\nconsole.log(movies[0]); // \"The Wolf of Wall Street\"\nconsole.log(movies[1]); // \"Zootopia\"\nconsole.log(movies[2]); // \"Babysitting\"\n</code></pre> <p>Using an invalid index to access a JavaScript array element returns the value <code>undefined</code>.</p> <pre><code>const movies = [\"The Wolf of Wall Street\", \"Zootopia\", \"Babysitting\"];\nconsole.log(movies[3]); // undefined: last element is at index 2\n</code></pre>"},{"location":"chapter07/#iterating-over-an-array","title":"Iterating over an array","text":"<p>There are several ways to browse an array element by element.</p> <p>The first is to use a <code>for</code> loop as discussed previously.</p> <pre><code>const movies = [\"The Wolf of Wall Street\", \"Zootopia\", \"Babysitting\"];\nfor (let i = 0; i &lt; movies.length; i++) {\n  console.log(movies[i]);\n}\n</code></pre> <p>The <code>for</code> loop runs through each element in the array starting with index 0 all the way up to the length of the array minus 1, which is its last element.</p> <p>Another way is to call the <code>forEach()</code> method on the array. It takes as a parameter a function that will be applied to each array element.</p> <pre><code>myArray.forEach(myElement =&gt; {\n  // Use myElement to access each array element one by one\n});\n</code></pre> <p>Here's the previous example, rewritten with this method and a fat arrow function.</p> <pre><code>const movies = [\"The Wolf of Wall Street\", \"Zootopia\", \"Babysitting\"];\nmovies.forEach(movie =&gt; {\n  console.log(movie);\n});\n</code></pre> <p>During execution, each array element is passed as a parameter (named <code>movie</code> in this example) to the anonymous function associated to <code>forEach()</code>.</p> <p>Lastly, you can use the <code>for-of</code> loop, a special kind of loop dealing with iterable objects like arrays. Here is its syntax.</p> <pre><code>for (const myElement of myArray) {\n  // Use myElement to access each array element one by one\n}\n</code></pre> <p>Check out the previous example written with a <code>for-of</code> loop.</p> <pre><code>const movies = [\"The Wolf of Wall Street\", \"Zootopia\", \"Babysitting\"];\nfor (const movie of movies) {\n  console.log(movie);\n}\n</code></pre>"},{"location":"chapter07/#updating-an-arrays-content","title":"Updating an array's content","text":""},{"location":"chapter07/#adding-an-element-to-an-array","title":"Adding an element to an array","text":"<p>Don\u2019t lie to me: you've just watched Ghostbusters yet another time. Let's add it to the list. Here's how you'd do so.</p> <pre><code>const movies = [\"The Wolf of Wall Street\", \"Zootopia\", \"Babysitting\"];\nmovies.push(\"Ghostbusters\");\nconsole.log(movies[3]); // \"Ghostbusters\"\n</code></pre> <p>You add a new item to an array with the <code>push()</code> method. The new element to be added is passed as a parameter to the method. It is inserted at the end of the array.</p> <p>To add an element at the beginning of an array, use the <code>unshift()</code> method instead of <code>push()</code>.</p> <pre><code>const movies = [\"The Wolf of Wall Street\", \"Zootopia\", \"Babysitting\"];\nmovies.unshift(\"Pacific Rim\");\nconsole.log(movies[0]); // \"Pacific Rim\"\n</code></pre>"},{"location":"chapter07/#removing-an-element-from-an-array","title":"Removing an element from an array","text":"<p>You can remove the last element of an array using the <code>pop()</code> method.</p> <pre><code>const movies = [\"The Wolf of Wall Street\", \"Zootopia\", \"Babysitting\"];\nmovies.pop(); // Remove the last array element\nconsole.log(movies.length); // 2\nconsole.log(movies[2]); // undefined\n</code></pre> <p>Alternatively, you can use the <code>splice()</code> method with two parameters: the first one is the index from which to begin removing, and the second one is the number of elements to remove.</p> <pre><code>const movies = [\"The Wolf of Wall Street\", \"Zootopia\", \"Babysitting\"];\nmovies.splice(0, 1); // Remove 1 element starting at index 0\nconsole.log(movies.length); // 2\nconsole.log(movies[0]); // \"Zootopia\"\nconsole.log(movies[1]); // \"Babysitting\"\n</code></pre>"},{"location":"chapter07/#tldr","title":"TL;DR","text":"<ul> <li> <p>An array represents a list of elements. A JavaScript array is an object that has special properties, like <code>length</code> to access its size (number of elements).</p> </li> <li> <p>You can think of an array as a set of boxes, each storing a specific value and associated with a number called its index. The first element of an array will be index number 0 - not 1.</p> </li> <li> <p>You can access a particular element by passing its index within square brackets <code>[]</code>.</p> </li> <li> <p>To iterate over an array (browsing it element by element), you can use the <code>for</code> loop, the <code>forEach()</code> method or the newer <code>for-of</code> loop.</p> </li> </ul> <pre><code>for (let i = 0; i &lt; myArray.length; i++) {\n  // Use myArray[i] to access each array element one by one\n}\n\nmyArray.forEach(myElement =&gt; {\n  // Use myElement to access each array element one by one\n});\n\nfor (const myElement of myArray) {\n  // Use myElement to access each array element one by one\n}\n</code></pre> <ul> <li> <p>The <code>push()</code> method adds an element at the end of an array. The <code>unshift()</code> method adds it at the beginning.</p> </li> <li> <p>The <code>pop()</code> and <code>splice()</code> are used to remove elements from the array.</p> </li> </ul>"},{"location":"chapter07/#coding-time","title":"Coding time!","text":"<p>Create all these programs in a generic fashion: the program output should reflect any update in the array's content.</p>"},{"location":"chapter07/#musketeers","title":"Musketeers","text":"<p>Write a program that:</p> <ul> <li>Creates an array named <code>musketeers</code> containing values \"Athos\", \"Porthos\" and \"Aramis\".</li> <li>Shows each array element using a <code>for</code> loop.</li> <li>Adds the \"D'Artagnan\" value to the array.</li> <li>Shows each array element using the <code>forEach()</code> method.</li> <li>Remove poor Aramis.</li> <li>Shows each array element using a <code>for-of</code> loop.</li> </ul>"},{"location":"chapter07/#sum-of-values","title":"Sum of values","text":"<p>Write a program that creates the following array, then calculates and shows the sum of its values (42 in that case).</p> <pre><code>const values = [3, 11, 7, 2, 9, 10];\n</code></pre>"},{"location":"chapter07/#array-maximum","title":"Array maximum","text":"<p>Write a program that creates the following array, then calculates and shows the array's maximum value.</p> <pre><code>const values = [3, 11, 7, 2, 9, 10];\n</code></pre>"},{"location":"chapter07/#list-of-words","title":"List of words","text":"<p>Write a program that asks the user for a word until the user types <code>\"stop\"</code>. The program then shows each of these words, except <code>\"stop\"</code>.</p>"},{"location":"chapter08/","title":"Work with strings","text":"<p>A lot of code you write will involve dealing with chains of text characters - or strings. Let's look at how!</p>"},{"location":"chapter08/#string-recap","title":"String recap","text":"<p>Let's recapitulate what we already know about strings:</p> <ul> <li> <p>A string value represents text.</p> </li> <li> <p>In JavaScript, a string is defined by placing text within single quotes (<code>'I am a string'</code>) or double quotes (<code>\"I am a string\"</code>).</p> </li> <li> <p>You may use special characters within a string by prefacing them with  <code>\\</code> (\"backslash\") followed by another character. For example, use <code>\\n</code>  to add a line break.</p> </li> <li> <p>The <code>+</code> operator concatenates (combines or adds) two or more strings.</p> </li> </ul> <p>Beyond these basic uses, strings have even more versatility.</p>"},{"location":"chapter08/#obtaining-string-length","title":"Obtaining string length","text":"<p>To obtain the length of a string (the number of characters it contains), add <code>.length</code> to it. The length will be returned as an integer.</p> <pre><code>console.log(\"ABC\".length); // 3\nconst str = \"I am a string\";\nconst len = str.length;\nconsole.log(len); // 13\n</code></pre> <p>Although string values are primitive JavaScript types, some properties and methods can be applied to them just as if they were objects by using the dot notation. <code>length</code> is one of those properties.</p>"},{"location":"chapter08/#converting-string-case","title":"Converting string case","text":"<p>You may convert a string's text to lowercase by calling the <code>toLowerCase()</code> method. Alternatively, you may do the same with  <code>toUpperCase()</code> to convert a string to uppercase.</p> <pre><code>const originalWord = \"Bora-Bora\";\n\nconst lowercaseWord = originalWord.toLowerCase();\nconsole.log(lowercaseWord); // \"bora-bora\"\n\nconst uppercaseWord = originalWord.toUpperCase();\nconsole.log(uppercaseWord); // \"BORA-BORA\"\n</code></pre> <p><code>toLowerCase()</code> and <code>toUpperCase()</code> are two string methods. Like every string method, both have no affect on the initial value and return a new string.</p> <p>Tip</p> <p>It's important to understand that once created, a string value never changes: strings are immutable in JavaScript.</p>"},{"location":"chapter08/#comparing-two-strings","title":"Comparing two strings","text":"<p>You may compare two strings with the <code>===</code> operator. The operation returns a boolean value: <code>true</code> if the strings are equal, <code>false</code> if not.</p> <pre><code>const word = \"koala\";\nconsole.log(word === \"koala\");    // true\nconsole.log(word === \"kangaroo\"); // false\n</code></pre> <p>Warning</p> <p>String comparison is case sensitive. Do indeed pay attention to your lower and uppercase letters!</p> <pre><code>console.log(\"Qwerty\" === \"qwerty\");               // false\nconsole.log(\"Qwerty\".toLowerCase() === \"qwerty\"); // true\n</code></pre>"},{"location":"chapter08/#strings-as-sets-of-characters","title":"Strings as sets of characters","text":""},{"location":"chapter08/#identifying-a-particular-character","title":"Identifying a particular character","text":"<p>You may think of a string as an array of characters. Each character is identified by a number called an index, just as it does for an array. The same golden rules apply:</p> <ul> <li>The index of the first character in a string is 0, not 1.</li> <li>The highest index number is the string's length minus 1.</li> </ul>"},{"location":"chapter08/#accessing-a-particular-character","title":"Accessing a particular character","text":"<p>You know how to identify a character by its index. To access it, you use the brackets notation <code>[]</code> with the character index placed between the brackets.</p> <p>Warning</p> <p>Trying to access a string character beyond the string length produces an <code>undefined</code> result.</p> <pre><code>const sport = \"basketball\";\nconsole.log(sport[0]);  // first \"b\"\nconsole.log(sport[6]);  // second \"b\"\nconsole.log(sport[10]); // undefined: last character is at index 9\n</code></pre>"},{"location":"chapter08/#iterating-over-a-string","title":"Iterating over a string","text":"<p>Now what if you want to access all string characters one-by-one? You could access each letter individually, as seen above:</p> <pre><code>const name = \"Sarah\"; // 5 characters\nconsole.log(name[0]); // \"S\"\nconsole.log(name[1]); // \"a\"\nconsole.log(name[2]); // \"r\"\nconsole.log(name[3]); // \"a\"\nconsole.log(name[4]); // \"h\"\n</code></pre> <p>This is impractical if your string contains more than a few characters. You need a better solution to repeat access to characters. Does the word \"repeat\" bring to mind a former concept? Loops, of course!</p> <p>You may write a loop to access each character of a string. Generally speaking, a <code>for</code> loop is a better choice than a <code>while</code> loop, since we know the loop needs to run once for each character in the string.</p> <pre><code>for (let i = 0; i &lt; myString.length; i++) {\n    // Use myString[i] to access each character one by one\n}\n</code></pre> <p>The loop counter <code>i</code> ranges from 0 (the index of the string's first character) to string length - 1 (index of the last character). When the counter value equals the string length, the expression becomes false and the loop ends.</p> <p>So, the previous example may also be written with a <code>for</code> loop for an identical result.</p> <pre><code>const name = \"Sarah\";\nfor (let i = 0; i &lt; name.length; i++) {\n  console.log(name[i]);\n}\n</code></pre> <p>As for arrays covered earlier, a recent JavaScript evolution has introduced yet another option to iterate over a string: the <code>for-of</code> loop. The previous example may also be written:</p> <pre><code>const name = \"Sarah\";\nfor (const letter of name) {\n  console.log(letter);\n}\n</code></pre> <p>If the index is not needed inside the loop, this syntax is arguably simpler than a standard <code>for</code> loop.</p>"},{"location":"chapter08/#turning-a-string-into-an-array","title":"Turning a string into an array","text":"<p>The JavaScript method <code>Array.from()</code> can be used to turn a string into an array. This array can further be traversed with the <code>forEach()</code> method. Just like the previous ones, this example shows the string letters one-by-one.</p> <pre><code>const name = \"Sarah\";\nconst nameArray = Array.from(name);\nnameArray.forEach(letter =&gt; {\n  console.log(letter);\n});\n</code></pre>"},{"location":"chapter08/#searching-inside-a-string","title":"Searching inside a string","text":"<p>Looking for particular values inside a string is a common task.</p> <p>The <code>indexOf()</code> method takes as a parameter the searched-for value. If that value is found inside the string, it returns the index of the first occurrence of the value. Otherwise, it returns -1.</p> <pre><code>const song = \"Honky Tonk Women\";\nconsole.log(song.indexOf(\"onk\")); // 1\nconsole.log(song.indexOf(\"Onk\")); // -1 because of case mismatch\n</code></pre> <p>When searching for a value at the beginning or end of a string, you may also use the <code>startsWith()</code> and <code>endsWith()</code> methods. Both return either <code>true</code> or <code>false</code>, depending on whether the value is found or not. Beware: these methods are case-sensitive.</p> <pre><code>const song = \"Honky Tonk Women\";\n\nconsole.log(song.startsWith(\"Honk\")); // true\nconsole.log(song.startsWith(\"honk\")); // false\nconsole.log(song.startsWith(\"Tonk\")); // false\n\nconsole.log(song.endsWith(\"men\")); // true\nconsole.log(song.endsWith(\"Men\")); // false\nconsole.log(song.endsWith(\"Tonk\")); // false\n</code></pre>"},{"location":"chapter08/#breaking-a-string-into-parts","title":"Breaking a string into parts","text":"<p>Sometimes a string is made of several parts separated by a particular value. In that case, it's easy to obtain the individual parts by using the <code>split()</code> method. This method takes as a parameter the separator and returns an array containing the parts.</p> <pre><code>const monthList = \"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec\";\nconst months = monthList.split(\",\");\nconsole.log(months[0]);  // \"Jan\"\nconsole.log(months[11]); // \"Dec\"\n</code></pre>"},{"location":"chapter08/#tldr","title":"TL;DR","text":"<ul> <li> <p>Although string values are primitive JavaScript types, some properties and methods may be applied to them just as if they were objects.</p> </li> <li> <p>The <code>length</code> property returns the number of characters of the string.</p> </li> <li> <p>JavaScript strings are immutable: once created, a string value never changes. String methods never affect the initial value and always return a new string.</p> </li> <li> <p>The <code>toLowerCase()</code> and <code>toUpperCase()</code> methods respectively return new converted strings to lower and upper case.</p> </li> <li> <p>String values may be compared using the <code>===</code> operator, which is case sensitive.</p> </li> <li> <p>A string may be seen as an array of characters identified by their index. The index of the first character is 0 (not 1).</p> </li> <li> <p>You may iterate over a string using either a <code>for</code> or the newer <code>for-of</code> loop.</p> </li> <li> <p>The <code>Array.from()</code> method can be used to turn a string into an array that can be traversed letter by letter with the <code>forEach()</code> method.</p> </li> <li> <p>Searching for values inside a string is possible with the <code>indexOf()</code>, <code>startsWith()</code> and <code>endsWith()</code> methods.</p> </li> <li> <p>The <code>split()</code> method breaks a string into subparts delimited by a separator.</p> </li> </ul>"},{"location":"chapter08/#coding-time","title":"Coding time!","text":""},{"location":"chapter08/#word-info","title":"Word info","text":"<p>Write a program that asks you for a word then shows its length, lowercase, and uppercase values.</p>"},{"location":"chapter08/#vowel-count","title":"Vowel count","text":"<p>Improve the previous program so that it also shows the number of vowels inside the word.</p>"},{"location":"chapter08/#backwards-word","title":"Backwards word","text":"<p>Improve the previous program so that it shows the word written backwards.</p>"},{"location":"chapter08/#palindrome","title":"Palindrome","text":"<p>Improve the previous program to check if the word is a palindrome. A palindrome is a word or sentence that's spelled the same way both forward and backward, ignoring punctuation, case, and spacing.</p> <p>For example, <code>\"radar\"</code> should be detected as a palindrome, <code>\"Radar\"</code> too.</p>"},{"location":"chapter09/","title":"Understand object-oriented programming","text":"<p>A few chapters ago, you learned how to create your first objects in JavaScript. Now it's time to better understand how to work with them.</p>"},{"location":"chapter09/#context-a-multiplayer-rpg","title":"Context: a multiplayer RPG","text":"<p>As a reminder, here's the code for our minimalist RPG taken from a previous chapter. It creates an object literal named <code>aurora</code> with four properties (<code>name</code>, <code>health</code>, <code>strength</code> and <code>xp</code>) and a <code>describe()</code> method.</p> <pre><code>const aurora = {\n  name: \"Aurora\",\n  health: 150,\n  strength: 25,\n  xp: 0,\n\n  // Return the character description\n  describe() {\n    return `${this.name} has ${this.health} health points, ${this\n      .strength} as strength and ${this.xp} XP points`;\n  }\n};\n\n// Aurora is harmed by an arrow\naurora.health -= 20;\n\n// Aurora gains a strength necklace\naurora.strength += 10;\n\n// Aurora learns a new skill\naurora.xp += 15;\n\nconsole.log(aurora.describe());\n</code></pre> <p>To make the game more interesting, we'd like to have more characters in it. So here comes Glacius, Aurora's fellow.</p> <pre><code>const glacius = {\n  name: \"Glacius\",\n  health: 130,\n  strength: 30,\n  xp: 0,\n\n  // Return the character description\n  describe() {\n    return `${this.name} has ${this.health} health points, ${this\n      .strength} as strength and ${this.xp} XP points`;\n  }\n};\n</code></pre> <p>Our two characters are strikingly similar. They share the same properties, with the only difference being some property values.</p> <p>You should already be aware that code duplication is dangerous and should generally be avoided. We must find a way to share what's common to our characters.</p>"},{"location":"chapter09/#javascript-classes","title":"JavaScript classes","text":"<p>Most object-oriented languages use classes as abstractions for the ideas or concepts manipulated by a program. A class is used to create objects representing a concept. It offers a convenient syntax to give both data and behavior to these objects.</p> <p>JavaScript is no exception and supports programming with classes (but with a twist -- more on that later).</p>"},{"location":"chapter09/#creating-a-class","title":"Creating a class","text":"<p>Our example RPG deals with characters, so let's create a <code>Character</code> class to express what a character is.</p> <pre><code>class Character {\n  constructor(name, health, strength) {\n    this.name = name;\n    this.health = health;\n    this.strength = strength;\n    this.xp = 0; // XP is always zero for new characters\n  }\n  // Return the character description\n  describe() {\n    return `${this.name} has ${this.health} health points, ${this\n      .strength} as strength and ${this.xp} XP points`;\n  }\n}\n</code></pre> <p>This example demonstrates several key facts about JavaScript classes:</p> <ul> <li>A class is created with the <code>class</code> keyword, followed by the name of the class (usually starting with an uppercase letter).</li> <li>Contrary to object literals, there is no separating punctuation between the elements inside a class.</li> <li>A class can only contain methods, not data properties.</li> <li>Just like with object literals, the <code>this</code> keyword is automatically set by JavaScript inside a method and represents the object on which the method was called.</li> <li>A special method named <code>constructor()</code> can be added to a class definition. It is called during object creation and is often used to give it data properties.</li> </ul>"},{"location":"chapter09/#using-a-class","title":"Using a class","text":"<p>Once a class is defined, you can use it to create objects. Check out the rest of the program.</p> <pre><code>const aurora = new Character(\"Aurora\", 150, 25);\nconst glacius = new Character(\"Glacius\", 130, 30);\n\n// Aurora is harmed by an arrow\naurora.health -= 20;\n\n// Aurora gains a strength necklace\naurora.strength += 10;\n\n// Aurora learns a new skill\naurora.xp += 15;\n\nconsole.log(aurora.describe());\nconsole.log(glacius.describe());\n</code></pre> <p></p> <p>The <code>aurora</code> and <code>glacius</code> objects are created as characters with the <code>new</code> operator. This statement calls the class constructor to initialize the newly created object. After creation, an object has access to the properties defined inside the class.</p> <p>Here's the canonical syntax for creating an object using a class.</p> <pre><code>class MyClass {\n  constructor(param1, param2, ...) {\n    this.property1 = param1;\n    this.property2 = param2;\n    // ...\n  }\n  method1(/* ... */) {\n    // ...\n  }\n  method2(/* ... */) {\n    // ...\n  }\n  // ...\n}\n\nconst myObject = new MyClass(arg1, arg2, ...);\nmyObject.method1(/* ... */);\n// ...\n</code></pre>"},{"location":"chapter09/#under-the-hood-objects-and-prototypes","title":"Under the hood: objects and prototypes","text":"<p>If you come from another programming background, chances are you already encountered classes and feel familiar with them. But as you'll soon discover, JavaScript classes are not quite like their C++, Java or C# counterparts.</p>"},{"location":"chapter09/#javascripts-object-oriented-model","title":"JavaScript's object-oriented model","text":"<p>To create relationships between objects, JavaScript uses prototypes.</p> <p>In addition to its own particular properties, any JavaScript object has an internal property which is a link (known as a reference) to another object called its prototype. When trying to access a property that does not exist in an object, JavaScript tries to find this property in the prototype of this object.</p> <p>Here's an example (borrowed from Kyle Simpson's great book series You Don\u2019t Know JS).</p> <pre><code>const anObject = {\n  myProp: 2\n};\n\n// Create anotherObject using anObject as a prototype\nconst anotherObject = Object.create(anObject);\n\nconsole.log(anotherObject.myProp); // 2\n</code></pre> <p>In this example, the JavaScript statement <code>Object.create()</code> is used to create the object <code>anotherObject</code> with object <code>anObject</code> as its prototype.</p> <pre><code>// Create an object linked to myPrototypeObject\nconst myObject = Object.create(myPrototypeObject);\n</code></pre> <p>When the statement <code>anotherObject.myProp</code> is run, the <code>myProp</code> property of <code>anObject</code> is used since <code>myProp</code> doesn\u2019t exist in <code>anotherObject</code>.</p> <p>If the prototype of an object does not have a desired property, then the search continues in the object's own prototype until we get to the end of the prototype chain. If the end of this chain is reached without having found the property, an attempted access to the property returns the value <code>undefined</code>.</p> <pre><code>const anObject = {\n  myProp: 2\n};\n\n// Create anotherObject using anObject as a prototype\nconst anotherObject = Object.create(anObject);\n\n// Create yetAnotherObject using anotherObject as a prototype\nconst yetAnotherObject = Object.create(anotherObject);\n\n// myProp is found in yetAnotherObject's prototype chain (in anObject)\nconsole.log(yetAnotherObject.myProp); // 2\n\n// myOtherProp can\u2019t be found in yetAnotherObject's prototype chain\nconsole.log(yetAnotherObject.myOtherProp); // undefined\n</code></pre> <p>This type of relationship between JavaScript objects is called delegation: an object delegates part of its operation to its prototype.</p>"},{"location":"chapter09/#the-true-nature-of-javascript-classes","title":"The true nature of JavaScript classes","text":"<p>In class-based object-oriented languages like C++, Java and C#, classes are static blueprints (templates). When an object is created, the methods and properties of the class are copied into a new entity, called an instance. After instantiation, the newly created object has no relation whatsoever with its class.</p> <p>JavaScript's object-oriented model is based on prototypes, not classes, to share properties and delegate behavior between objects. In JavaScript, a class is itself an object, not a static blueprint. \"Instantiating\" a class creates a new object linked to a prototype object. Regarding classes behavior, the JavaScript language is quite different from C++, Java or C#, but close to other object-oriented languages like Python, Ruby and Smalltalk.</p> <p>The JavaScript <code>class</code> syntax is merely a more convenient way to create relationships between objects through prototypes. Classes were introduced to emulate the class-based OOP model on top of JavaScript's own prototype-based model. It's an example of what programmers call syntactic sugar.</p> <p>Note</p> <p>The real usefulness of the <code>class</code> syntax is a pretty heated debate in the JavaScript community.</p>"},{"location":"chapter09/#object-oriented-programming","title":"Object-oriented programming","text":"<p>Now back to our RPG, which is still pretty boring. What does it lack? Monsters and fights, of course!</p> <p>Following is how a fight will be handled. If attacked, a character sees their life points decrease from the strength of the attacker. If its health value falls below zero, the character is considered dead and cannot attack anymore. Its vanquisher receives a fixed number of 10 experience points.</p> <p>First, let's add the capability for our characters to fight one another. Since it's a shared ability, we define it as a method named <code>attack()</code> in the <code>Character</code> class.</p> <pre><code>class Character {\n  constructor(name, health, strength) {\n    this.name = name;\n    this.health = health;\n    this.strength = strength;\n    this.xp = 0; // XP is always zero for new characters\n  }\n  // Attack a target\n  attack(target) {\n    if (this.health &gt; 0) {\n      const damage = this.strength;\n      console.log(\n        `${this.name} attacks ${target.name} and causes ${damage} damage points`\n      );\n      target.health -= damage;\n      if (target.health &gt; 0) {\n        console.log(`${target.name} has ${target.health} health points left`);\n      } else {\n        target.health = 0;\n        const bonusXP = 10;\n        console.log(\n          `${this.name} eliminated ${target.name} and wins ${bonusXP} experience points`\n        );\n        this.xp += bonusXP;\n      }\n    } else {\n      console.log(`${this.name} can\u2019t attack (they've been eliminated)`);\n    }\n  }\n  // Return the character description\n  describe() {\n    return `${this.name} has ${this.health} health points, ${this\n      .strength} as strength and ${this.xp} XP points`;\n  }\n}\n</code></pre> <p>Now we can introduce a monster in the game and make it fight our players. Here's the rest of the final code of our RPG.</p> <pre><code>const aurora = new Character(\"Aurora\", 150, 25);\nconst glacius = new Character(\"Glacius\", 130, 30);\n\nconsole.log(\"Welcome to the adventure! Here are our heroes:\");\nconsole.log(aurora.describe());\nconsole.log(glacius.describe());\n\nconst monster = new Character(\"Spike\", 40, 20);\nconsole.log(\"A wild monster has appeared: it's named \" + monster.name);\n\nmonster.attack(aurora);\nmonster.attack(glacius);\naurora.attack(monster);\nglacius.attack(monster);\n\nconsole.log(aurora.describe());\nconsole.log(glacius.describe());\n</code></pre> <p></p> <p>The previous program is a short example of Object-Oriented Programming (in short: OOP), a programming paradigm (a programming style) based on objects containing both data and behavior.</p>"},{"location":"chapter09/#tldr","title":"TL;DR","text":"<ul> <li> <p>Object-Oriented Programming, or OOP, is a programming paradigm that uses objects containing both data and behavior to create programs.</p> </li> <li> <p>A class is an object-oriented abstraction for an idea or a concept manipulated by a program. It offers a convenient syntax to create objects representing this concept.</p> </li> <li> <p>A JavaScript class is defined with the <code>class</code> keyword. It can only contain methods. The <code>constructor()</code> method, called during object creation, is used to initialize the object, often by giving it some data properties. Inside methods, the <code>this</code> keyword represents the object on which the method was called.</p> </li> </ul> <pre><code>class MyClass {\n  constructor(param1, param2, ...) {\n    this.property1 = param1;\n    this.property2 = param2;\n    // ...\n  }\n  method1(/* ... */) {\n    // ...\n  }\n  method2(/* ... */) {\n    // ...\n  }\n  // ...\n}\n</code></pre> <ul> <li>Objects are created from a class with the <code>new</code> operator. It calls the class constructor to initialize the newly created object.</li> </ul> <pre><code>const myObject = new MyClass(arg1, arg2, ...);\n// ...\n</code></pre> <ul> <li> <p>JavaScript's OOP model is based on prototypes. Any JavaScript object has an internal property which is a link (a reference) to another object: its prototype. Prototypes are used to share properties and delegate behavior between objects.</p> </li> <li> <p>When trying to access a property that does not exist in an object, JavaScript tries to find this property in the prototype chain of this object by first searching its prototype, then its prototype's own prototype, and so on.</p> </li> <li> <p>There are several ways to create and link JavaScript objects through prototypes. One is to use the <code>Object.create()</code> method.</p> </li> </ul> <pre><code>// Create an object linked to myPrototypeObject\nconst myObject = Object.create(myPrototypeObject);\n</code></pre> <ul> <li>The JavaScript <code>class</code> syntax is another, arguably more convenient way to create relationships between objects. It emulates the class-based OOP model found in languages like C++, Java or C#. It is, however, just syntactic sugar on top of JavaScript's own prototype-based OOP model.</li> </ul>"},{"location":"chapter09/#coding-time","title":"Coding time!","text":""},{"location":"chapter09/#dogs","title":"Dogs","text":"<p>Complete the following program to add the definition of the <code>Dog</code> class.</p> <p>Dogs taller than 60 emote <code>\"Grrr! Grrr!\"</code> when they bark, other ones yip <code>\"Woof! Woof!\"</code>.</p> <pre><code>// TODO: define the Dog class here\n\nconst fang = new Dog(\"Fang\", \"boarhound\", 75);\nconsole.log(`${fang.name} is a ${fang.species} dog measuring ${fang.size}`);\nconsole.log(`Look, a cat! ${fang.name} barks: ${fang.bark()}`);\n\nconst snowy = new Dog(\"Snowy\", \"terrier\", 22);\nconsole.log(`${snowy.name} is a ${snowy.species} dog measuring ${snowy.size}`);\nconsole.log(`Look, a cat! ${snowy.name} barks: ${snowy.bark()}`);\n</code></pre> <p></p>"},{"location":"chapter09/#character-inventory","title":"Character inventory","text":"<p>Improve the example RPG to add character inventory management according to the following rules:</p> <ul> <li> <p>A character's inventory contains a number of gold and a number of keys.</p> </li> <li> <p>Each character begins with 10 gold and 1 key.</p> </li> <li> <p>The character description must show the inventory state.</p> </li> <li> <p>When a character slays another character, the victim's inventory goes to its vanquisher.</p> </li> </ul> <p>Here's the expected execution result.</p> <p></p>"},{"location":"chapter09/#account-list","title":"Account list","text":"<p>Let's build upon a previous account object exercise. A bank account is still defined by:</p> <ul> <li>A <code>name</code> property.</li> <li>A <code>balance</code> property, initially set to 0.</li> <li>A <code>credit</code> method adding the value passed as an argument to the account balance.</li> <li>A <code>describe</code> method returning the account description.</li> </ul> <p>Write a program that creates three accounts: one belonging to Sean, another to Brad and the third one to Georges. These accounts are stored in an array. Next, the program credits 1000 to each account and shows its description.</p> <p></p>"},{"location":"chapter10/","title":"Discover functional programming","text":"<p>Object-oriented programming, albeit quite popular, is not the only way to create programs. This chapter will introduce you to another important paradigm: functional programming.</p> <p>Note</p> <p>You might find this chapter a little harder to grasp than the others. If you struggle too much, feel free to skip ahead for the moment: it is not a prerequisite for the rest of the book. </p>"},{"location":"chapter10/#context-a-movie-list","title":"Context: a movie list","text":"<p>In this chapter, we'll start with an example program and improve it little by little, without adding any new functionality. This important programming task is called refactoring.</p> <p>Our initial program is about recent Batman movies. The data comes under the form of an array of objects, with each object describing a movie.</p> <pre><code>const movieList = [\n  {\n    title: \"Batman\",\n    year: 1989,\n    director: \"Tim Burton\",\n    imdbRating: 7.6\n  },\n  {\n    title: \"Batman Returns\",\n    year: 1992,\n    director: \"Tim Burton\",\n    imdbRating: 7.0\n  },\n  {\n    title: \"Batman Forever\",\n    year: 1995,\n    director: \"Joel Schumacher\",\n    imdbRating: 5.4\n  },\n  {\n    title: \"Batman &amp; Robin\",\n    year: 1997,\n    director: \"Joel Schumacher\",\n    imdbRating: 3.7\n  },\n  {\n    title: \"Batman Begins\",\n    year: 2005,\n    director: \"Christopher Nolan\",\n    imdbRating: 8.3\n  },\n  {\n    title: \"The Dark Knight\",\n    year: 2008,\n    director: \"Christopher Nolan\",\n    imdbRating: 9.0\n  },\n  {\n    title: \"The Dark Knight Rises\",\n    year: 2012,\n    director: \"Christopher Nolan\",\n    imdbRating: 8.5\n  }\n];\n</code></pre> <p>And here is the rest of the program that uses this data to show some results about the movies. Check it out, it should be pretty self-explanatory.</p> <pre><code>// Get movie titles\nconst titles = [];\nfor (const movie of movieList) {\n  titles.push(movie.title);\n}\nconsole.log(titles);\n\n// Count movies by Christopher Nolan\nconst nolanMovieList = [];\nfor (const movie of movieList) {\n  if (movie.director === \"Christopher Nolan\") {\n    nolanMovieList.push(movie);\n  }\n}\nconsole.log(nolanMovieList.length);\n\n// Get titles of movies with an IMDB rating greater or equal to 7.5\nconst bestTitles = [];\nfor (const movie of movieList) {\n  if (movie.imdbRating &gt;= 7.5) {\n    bestTitles.push(movie.title);\n  }\n}\nconsole.log(bestTitles);\n\n// Compute average movie rating of Christopher Nolan's movies\nlet ratingSum = 0;\nlet averageRating = 0;\nfor (const movie of nolanMovieList) {\n  ratingSum += movie.imdbRating;\n}\naverageRating = ratingSum / nolanMovieList.length;\nconsole.log(averageRating);\n</code></pre> <p></p>"},{"location":"chapter10/#program-state","title":"Program state","text":"<p>The previous program is an example of what is called imperative programming. In this paradigm, the programmer gives orders to the computer through a series of statements that modify the program state. Imperative programming focuses on describing how a program operates.</p> <p>The concept of state is an important one. The state of a program is the value of its global variables (variables accessible everywhere in the code) at a given time. In our example, the values of <code>movieList</code>, <code>titles</code>, <code>nolanMovieCount</code>, <code>bestTitles</code>, <code>ratingSum</code> and <code>averageRating</code> form the state of the program. Any assignment to one of these variables is a state change, often called a mutation.</p> <p>In imperative programming, the state can be modified anywhere in the source code. This is convenient, but can also lead to nasty bugs and maintenance headaches. As a program grows in size and complexity, it becomes easier for the programmer to mutate a part of the state by mistake and harder to monitor state modifications.</p>"},{"location":"chapter10/#limiting-mutations-with-const-variables","title":"Limiting mutations with <code>const</code> variables","text":"<p>In order to decrease the risk of accidental state mutation, a first step is to favor <code>const</code> over <code>let</code> whenever applicable for variable declarations. A variable declared with the <code>const</code> keyword cannot be further reassigned. Array and object content can still be mutated, though. Check the following code for details.</p> <pre><code>const n = 10;\nconst fruit = \"Banana\";\nconst obj = {\n  myProp: 2\n};\nconst animals = [\"Elephant\", \"Turtle\"];\n\nobj.myProp = 3; // Mutating a property is OK even for a const object\nobj.myOtherProp = \"abc\"; // Adding a new property is OK even for a const object\nanimals.push(\"Gorilla\"); // Updating content is OK even for a const array\n\nn++; // Illegal\nfruit = \"orange\"; // Illegal\nobj = {}; // Illegal\nanimals = [\"Bee\"]; // Illegal\n</code></pre>"},{"location":"chapter10/#splitting-the-program-into-functions","title":"Splitting the program into functions","text":"<p>Another solution is to split the source code into subroutines called procedures or functions. This approach is called procedural programming and has the benefit of transforming some variables into local variables, which are only visible in the subroutine code.</p> <p>Let's try to introduce some functions in our code.</p> <pre><code>// Get movie titles\nconst titles = () =&gt; {\n  const titles = [];\n  for (const movie of movieList) {\n    titles.push(movie.title);\n  }\n  return titles;\n};\n\nconst nolanMovieList = [];\n\n// Get movies by Christopher Nolan\nconst nolanMovies = () =&gt; {\n  for (const movie of movieList) {\n    if (movie.director === \"Christopher Nolan\") {\n      nolanMovieList.push(movie);\n    }\n  }\n};\n\n// Get titles of movies with an IMDB rating greater or equal to 7.5\nconst bestTitles = () =&gt; {\n  const bestTitles = [];\n  for (const movie of movieList) {\n    if (movie.imdbRating &gt;= 7.5) {\n      bestTitles.push(movie.title);\n    }\n  }\n  return bestTitles;\n};\n\n// Compute average rating of Christopher Nolan's movies\nconst averageNolanRating = () =&gt; {\n  let ratingSum = 0;\n  for (const movie of nolanMovieList) {\n    ratingSum += movie.imdbRating;\n  }\n  return ratingSum / nolanMovieList.length;\n};\n\nconsole.log(titles());\nnolanMovies();\nconsole.log(nolanMovieList.length);\nconsole.log(bestTitles());\nconsole.log(averageNolanRating());\n</code></pre> <p>The state of our program is now limited to two variables: <code>movieList</code> and <code>nolanMovieList</code> (the latter being necessary in functions <code>nolanMovies()</code> and <code>averageNolanRating()</code>). The other variables are now local to the functions they are used into, which limits the possibility of an accidental state mutation.</p> <p>Also, this version of the program is easier to understand than the previous one. Functions with appropriate names help describe a program's behavior. Comments are now less necessary than before.</p>"},{"location":"chapter10/#pure-functions","title":"Pure functions","text":"<p>Merely introducing some functions in a program is not enough to follow the functional programming paradigm. Whenever possible, we also need to use pure functions.</p> <p>A pure function is a function that has the following characteristics:</p> <ul> <li>Its outputs depend solely on its inputs.</li> <li>It has no side effect.</li> </ul> <p>A side effect is a change in program state or an interaction with the outside world. A database access or a <code>console.log()</code> statement are examples of side effects.</p> <p>Given the same data, a pure function will always produce the same result. By design, a pure function is independent from the program state and must not access it. Such a function must accept parameters in order to do something useful. The only way for a function without parameters to be pure is to return a constant value.</p> <p>Pure functions are easier to understand, combine together, and debug: contrary to their impure counterparts, there's no need to look outside the function body to reason about it. Still, a number of side effects are necessary in any program, like showing output to the user or updating a database. In functional programming, the name of the game is to create those side effects only in some dedicated and clearly identified parts of the program. The rest of the code should be written as pure functions.</p> <p>Let's refactor our example code to introduce pure functions.</p> <pre><code>// Get movie titles\nconst titles = movies =&gt; {\n  const titles = [];\n  for (const movie of movies) {\n    titles.push(movie.title);\n  }\n  return titles;\n};\n\n// Get movies by Christopher Nolan\nconst nolanMovies = movies =&gt; {\n  const nolanMovies = [];\n  for (const movie of movies) {\n    if (movie.director === \"Christopher Nolan\") {\n      nolanMovies.push(movie);\n    }\n  }\n  return nolanMovies;\n};\n\n// Get titles of movies with an IMDB rating greater or equal to 7.5\nconst bestTitles = movies =&gt; {\n  const bestTitles = [];\n  for (const movie of movies) {\n    if (movie.imdbRating &gt;= 7.5) {\n      bestTitles.push(movie.title);\n    }\n  }\n  return bestTitles;\n};\n\n// Compute average rating of a movie list\nconst averageRating = movies =&gt; {\n  let ratingSum = 0;\n  for (const movie of movies) {\n    ratingSum += movie.imdbRating;\n  }\n  return ratingSum / movies.length;\n};\n\nconsole.log(titles(movieList));\nconst nolanMovieList = nolanMovies(movieList);\nconsole.log(nolanMovieList.length);\nconsole.log(bestTitles(movieList));\nconsole.log(averageRating(nolanMovieList));\n</code></pre> <p>Since we only do refactoring, the program output is still the same.</p> <p>The program state (<code>movieList</code> and <code>nolanMovieList</code>) hasn\u2019t changed. However, all our functions are now pure; instead of accessing the state, they use parameters to achieve their desired behavior. As an added benefit, the function <code>averageRating()</code> can now compute the average rating of any movie list; it has become more generic.</p>"},{"location":"chapter10/#array-operations","title":"Array operations","text":"<p>Functional programming is about writing programs by combining functions expressing what the program should do, rather than how to do it. JavaScript offers several array-related methods that favor a functional programming style.</p>"},{"location":"chapter10/#the-map-method","title":"The <code>map()</code> method","text":"<p>The <code>map()</code> method takes an array as a parameter and creates a new array with the results of calling a provided function on every element in this array. A typical use of <code>map()</code> is to replace a loop for array traversal.</p> <p>Let's see <code>map()</code> in action.</p> <pre><code>const numbers = [1, 5, 10, 15];\n// The associated function multiply each array number by 2\nconst doubles = numbers.map(x =&gt; x * 2);\n\nconsole.log(numbers); // [1, 5, 10, 15] (no change)\nconsole.log(doubles); // [2, 10, 20, 30]\n</code></pre> <p>Here's how our <code>titles()</code> could be rewritten using <code>map()</code>. Look how the function code is now more concise and expressive.</p> <pre><code>// Get movie titles\nconst titles = movies =&gt; {\n  /* Previous code\n  const titles = [];\n  for (const movie of movies) {\n    titles.push(movie.title);\n  }\n  return titles;\n  */\n\n  // Return a new array containing only movie titles\n  return movies.map(movie =&gt; movie.title);\n};\n</code></pre>"},{"location":"chapter10/#the-filter-method","title":"The <code>filter()</code> method","text":"<p>The <code>filter()</code> method offers a way to test every element of an array against a provided function. Only elements that pass this test are added to the returned array.</p> <p>Here's an example of using <code>filter()</code>.</p> <pre><code>const numbers = [1, 5, 10, 15];\n// Keep only the number greater than or equal to 10\nconst bigOnes = numbers.filter(x =&gt; x &gt;= 10);\n\nconsole.log(numbers); // [1, 5, 10, 15] (no change)\nconsole.log(bigOnes); // [10, 15]\n</code></pre> <p>We can use this method in the <code>nolanMovies()</code> function.</p> <pre><code>// Get movies by Christopher Nolan\nconst nolanMovies = movies =&gt; {\n  /* Previous code\n  const nolanMovies = [];\n  for (const movie of movies) {\n    if (movie.director === \"Christopher Nolan\") {\n      nolanMovies.push(movie);\n    }\n  }\n  return nolanMovies;\n  */\n\n  // Return a new array containing only movies by Christopher Nolan\n  return movies.filter(movie =&gt; movie.director === \"Christopher Nolan\");\n};\n</code></pre> <p>The <code>map()</code> and <code>filter()</code> method can be used together to achieve powerful effects. Look at this new version of the <code>bestTitles()</code> function.</p> <pre><code>// Get titles of movies with an IMDB rating greater or equal to 7.5\nconst bestTitles = movies =&gt; {\n  /* Previous code\n  const bestTitles = [];\n  for (const movie of movies) {\n    if (movie.imdbRating &gt;= 7.5) {\n      bestTitles.push(movie.title);\n    }\n  }\n  return bestTitles;\n  */\n\n  // Filter movies by IMDB rating, then creates a movie titles array\n  return movies.filter(movie =&gt; movie.imdbRating &gt;= 7.5).map(movie =&gt; movie.title);\n};\n</code></pre>"},{"location":"chapter10/#the-reduce-method","title":"The <code>reduce()</code> method","text":"<p>The <code>reduce()</code> method applies a provided function to each array element in order to reduce it to one value. This method is typically used to perform calculations on an array.</p> <p>Here's an example of reducing an array to the sum of its values.</p> <pre><code>const numbers = [1, 5, 10, 15];\n// Compute the sum of array elements\nconst sum = numbers.reduce((acc, value) =&gt; acc + value, 0);\n\nconsole.log(numbers); // [1, 5, 10, 15] (no change)\nconsole.log(sum);     // 31\n</code></pre> <p>The <code>reduce()</code> method can take several parameters:</p> <ul> <li> <p>The first one is the function associated to <code>reduce()</code> and called for each array element. It takes two parameters: the first is an accumulator which contains the accumulated value previously returned by the last invocation of the function. The other function parameter is the array element.</p> </li> <li> <p>The second one is the initial value of the accumulator (often 0).</p> </li> </ul> <p>Here's how to apply <code>reduce()</code> to calculate the average rating of a movie list.</p> <pre><code>// Compute average rating of a movie list\nconst averageRating = movies =&gt; {\n  /* Previous code\n  let ratingSum = 0;\n  for (const movie of movies) {\n    ratingSum += movie.imdbRating;\n  }\n  return ratingSum / movies.length;\n  */\n\n  // Compute the sum of all movie IMDB ratings\n  const ratingSum = movies.reduce((acc, movie) =&gt; acc + movie.imdbRating, 0);\n  return ratingSum / movies.length;\n};\n</code></pre> <p>Another possible solution is to compute the rating sum by using <code>map()</code> before reducing an array containing only movie ratings.</p> <pre><code>// ...\n// Compute the sum of all movie IMDB ratings\nconst ratingSum = movies.map(movie =&gt; movie.imdbRating).reduce((acc, value) =&gt; acc + value, 0);\n// ...\n</code></pre>"},{"location":"chapter10/#higher-order-functions","title":"Higher-order functions","text":"<p>Throughout this chapter, we have leveraged the fact that JavaScript functions can be passed around just like any other value. We say that functions are first-class citizens in JavaScript, which means that they are treated equal to other types.</p> <p>Thanks to their first-class citizenry, functions can be combined together, rendering programs even more expressive and enabling a truly functional programming style. A function that takes another function as a parameter or returns another function is called a higher-order function.</p> <p>Check out this final version of our example program.</p> <pre><code>const titles = movies =&gt; movies.map(movie =&gt; movie.title);\nconst byNolan = movie =&gt; movie.director === \"Christopher Nolan\";\nconst filter = (movies, func) =&gt; movies.filter(func);\nconst goodRating = movie =&gt; movie.imdbRating &gt;= 7.5;\nconst ratings = movies =&gt; movies.map(movie =&gt; movie.imdbRating);\nconst average = array =&gt; array.reduce((sum, value) =&gt; sum + value, 0) / array.length;\n\nconsole.log(titles(movieList));\nconst nolanMovieList = filter(movieList, byNolan);\nconsole.log(nolanMovieList.length);\nconsole.log(titles(filter(movieList, goodRating)));\nconsole.log(average(ratings(nolanMovieList)));\n</code></pre> <p>We have defined helper functions that we combine to achieve the desired behaviour. The code is concise and self-describing. Since it takes the filtering function as a parameter, our own <code>filter()</code> function is an example of an higher-order function.</p>"},{"location":"chapter10/#javascript-a-multi-paradigm-language","title":"JavaScript: a multi-paradigm language","text":"<p>The JavaScript language is full of paradoxes. It has famously been invented in ten days, and is now enjoying a popularity almost unique in programming history. Its syntax borrows heavily from mainstream imperative languages like C or Java, but its design principles are closer to functional languages like Scheme.</p> <p>JavaScript's multi-paradigm nature means you can write imperative, object-oriented or functional code, choosing the right tool for the job and leveraging your previous programming experience. As always, diversity is a source of flexibility and ultimately a strength.</p>"},{"location":"chapter10/#tldr","title":"TL;DR","text":"<ul> <li> <p>Functional programming is about writing programs by combining functions expressing what the program should do, rather than how to do it (which is the imperative way).</p> </li> <li> <p>The state of a program is the value of its global variables at a given time. A goal of functional programming is to minimize state mutations (changes) that make the code harder to understand. Some possible solutions are declaring variables with <code>const</code> instead of <code>let</code>, splitting the code into functions, and favoring local over global variables.</p> </li> <li> <p>A pure function depends solely on its inputs for computing its outputs and has no side effect. Pure functions are easier to understand, combine together, and debug. Functional programming favors the use of pure functions whenever possible.</p> </li> <li> <p>The <code>map()</code>, <code>filter()</code> and <code>reduce()</code> methods can replace loops for array traversal and let you program with arrays in a functional way.</p> </li> <li> <p>JavaScript functions can be passed around just like any other value: they are first-class citizens, enabling functional programming. A function that operates on another function (taking it as a parameter or returning it) is called a higher-order function.</p> </li> <li> <p>JavaScript is a multi-paradigm language: you can write programs using an imperative, object-oriented or functional programming style.</p> </li> </ul>"},{"location":"chapter10/#coding-time","title":"Coding time!","text":""},{"location":"chapter10/#older-movies","title":"Older movies","text":"<p>Improve the example movie program from above so that it shows the titles of movies released before year 2000, using functional programming.</p> <pre><code>const movieList = [\n  {\n    title: \"Batman\",\n    year: 1989,\n    director: \"Tim Burton\",\n    imdbRating: 7.6\n  },\n  {\n    title: \"Batman Returns\",\n    year: 1992,\n    director: \"Tim Burton\",\n    imdbRating: 7.0\n  },\n  {\n    title: \"Batman Forever\",\n    year: 1995,\n    director: \"Joel Schumacher\",\n    imdbRating: 5.4\n  },\n  {\n    title: \"Batman &amp; Robin\",\n    year: 1997,\n    director: \"Joel Schumacher\",\n    imdbRating: 3.7\n  },\n  {\n    title: \"Batman Begins\",\n    year: 2005,\n    director: \"Christopher Nolan\",\n    imdbRating: 8.3\n  },\n  {\n    title: \"The Dark Knight\",\n    year: 2008,\n    director: \"Christopher Nolan\",\n    imdbRating: 9.0\n  },\n  {\n    title: \"The Dark Knight Rises\",\n    year: 2012,\n    director: \"Christopher Nolan\",\n    imdbRating: 8.5\n  }\n];\n\n// TODO: Make an array of the titles of movies released before 2000\n\nconsole.log(moviesBefore2000);\n</code></pre> <p></p>"},{"location":"chapter10/#government-forms","title":"Government forms","text":"<p>Complete the following program to compute and show the names of political forms ending with <code>\"cy\"</code>.</p> <pre><code>const governmentForms = [\n  {\n    name: \"Plutocracy\",\n    definition: \"Rule by the wealthy\"\n  },\n  {\n    name: \"Oligarchy\",\n    definition: \"Rule by a small number of people\"\n  },\n  {\n    name: \"Kleptocracy\",\n    definition: \"Rule by the thieves\"\n  },\n  {\n    name: \"Theocracy\",\n    definition: \"Rule by a religious elite\"\n  },\n  {\n    name: \"Democracy\",\n    definition: \"Rule by the people\"\n  },\n  {\n    name: \"Autocracy\",\n    definition: \"Rule by a single person\"\n  }\n];\n\n// TODO: compute the formsEndingWithCy array\n\n// Should show [\"Plutocracy\", \"Kleptocracy\", \"Theocracy\", \"Democracy\", \"Autocracy\"]\nconsole.log(formsEndingWithCy);\n</code></pre>"},{"location":"chapter10/#arrays-sum","title":"Arrays sum","text":"<p>Complete the following program to compute and show the total sum of the values in each of the arrays.</p> <pre><code>const arrays = [[1, 4], [11], [3, 5, 7]];\n\n// TODO: compute the value of the arraysSum variable\n\nconsole.log(arraysSum); // Should show 31\n</code></pre>"},{"location":"chapter10/#student-results","title":"Student results","text":"<p>Here's a program that shows female students results (name and average grade).</p> <pre><code>const students = [\n  {\n    name: \"Anna\",\n    sex: \"f\",\n    grades: [4.5, 3.5, 4]\n  },\n  {\n    name: \"Dennis\",\n    sex: \"m\",\n    country: \"Germany\",\n    grades: [5, 1.5, 4]\n  },\n  {\n    name: \"Martha\",\n    sex: \"f\",\n    grades: [5, 4, 2.5, 3]\n  },\n  {\n    name: \"Brock\",\n    sex: \"m\",\n    grades: [4, 3, 2]\n  }\n];\n\n// Compute female student results\nconst femaleStudentsResults = [];\nfor (const student of students) {\n  if (student.sex === \"f\") {\n    let gradesSum = 0;\n    for (const grade of student.grades) {\n      gradesSum += grade;\n    }\n    const averageGrade = gradesSum / student.grades.length;\n    femaleStudentsResults.push({\n      name: student.name,\n      avgGrade: averageGrade\n    });\n  }\n}\n\nconsole.log(femaleStudentsResults);\n</code></pre> <p>Refactor it using functional programming. Execution result must stay the same.</p> <p></p>"},{"location":"chapter11/","title":"Project: a social news program","text":"<p>Now that you've discovered the basics of programming, let's go ahead and build a real project.</p>"},{"location":"chapter11/#objective","title":"Objective","text":"<p>The goal of this project is to build a basic social news program. Its users will be able to show a list of links and add new ones.</p>"},{"location":"chapter11/#functional-requirements","title":"Functional requirements","text":"<ul> <li>A link is defined by its title, its URL and its author (submitter).</li> <li>If a new link URL does not start with <code>\"http://\"</code> or <code>\"https://\"</code>, <code>\"http://\"</code> is automatically added to its beginning.</li> <li>At launch, the program displays a start menu with the possible actions in an alert window and asks the user for his choice. Possible actions are:</li> <li>Show the list of links.</li> <li>Add a new link.</li> <li>Remove an existing link.</li> <li>Quit the program.</li> <li>Showing the list of links displays the index (rank) and the properties of each link in an alert window, or a message in the absence of any link.</li> <li>When adding a link, the program asks the user for the new link properties (title, URL and author). The link is then created. Subsequently, it must appear in the shown links.</li> <li>When removing a link, the user is asked for the link index until it is correct. The associated link is then removed. Subsequently, it must disappear from the shown links. Removing a link is not possible if there are no existing links.</li> <li>After an action is performed, the start menu is shown again. This goes on until the user chooses to quit the program.</li> </ul>"},{"location":"chapter11/#technical-requirements","title":"Technical requirements","text":"<ul> <li>All your code should be correctly indented.</li> <li>Names should be wisely chosen and adhere to the camelCase convention.</li> <li>Code duplication should be avoided.</li> </ul>"},{"location":"chapter11/#expected-result","title":"Expected result","text":"<p>Here are a few screenshots of the expected result.</p> <p></p> <p></p> <p></p>"},{"location":"chapter12/","title":"What's a web page?","text":"<p>This chapter summarizes what you need to know about the Web and web pages.</p>"},{"location":"chapter12/#internet-and-the-web","title":"Internet and the Web","text":"<p>As you probably know, the World Wide Web (or Web for short) is an ever-expanding information space built on top of the Internet. Web resources are accessible via their address, called their URL, and can contain hyperlinks to other resources. Together, all these interlinked resources form a huge mesh analogous to a spider web.</p> <p>Documents suitable for the Web are called web pages. They are grouped together on websites and visited through a special kind of software called a browser.</p>"},{"location":"chapter12/#the-languages-of-the-web","title":"The languages of the Web","text":"<p>There are three main technologies for creating web pages: HTML, CSS and JavaScript.</p>"},{"location":"chapter12/#html","title":"HTML","text":"<p>HTML, short for HyperText Markup Language, is the document format of web pages. An HTML document is made of text and structural elements called tags. Tags are used to describe the page content: paragraphs, headings, hyperlinks, images, etc.</p> <p>Here is an example of a simple web page, usually stored as an <code>.html</code> file.</p> <pre><code>&lt;!doctype html&gt;\n&lt;html&gt;\n\n&lt;head&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;title&gt;My web page&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;h1&gt;My web page&lt;/h1&gt;\n    &lt;p&gt;Hello! My name's Baptiste.&lt;/p&gt;\n    &lt;p&gt;I live in the great city of &lt;a href=\"https://en.wikipedia.org/wiki/Bordeaux\"&gt;Bordeaux&lt;/a&gt;.&lt;/p&gt;\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre> <p></p> <p>Here are a few references for learning more about HTML:</p> <ul> <li>Interneting is Hard - A friendly web development tutorial for complete beginners</li> <li>Khan Academy - Intro to HTML</li> <li>Mozilla Developer Network - HTML reference</li> </ul>"},{"location":"chapter12/#css","title":"CSS","text":"<p>CSS, or Cascading Style Sheets, is a language used to alter the presentation of web pages.</p> <p>CSS uses selectors to declare which HTML elements a style applies to. Many selecting strategies are possible, most notably:</p> <ul> <li>All elements of a given tag name.</li> <li>Elements matching a given class (selector syntax: <code>.myClass</code>).</li> <li>The element matching a given and unique identifier (selector syntax: <code>#MyId</code>).</li> </ul> <p>Here is an example of a simple CSS style sheet, usually stored as a <code>.css</code> file.</p> <pre><code>/* All h1 elements are pink */\nh1 {\n   color: pink;\n}\n\n/* All elements with the class \"done\" are strike through */\n.done {\n  text-decoration: line-through;\n}\n\n/* The element having id \"rude\" is shown uppercase with a particular font */\n#rude {\n  font-family: monospace;\n  text-transform: uppercase;\n}\n</code></pre> <p>A style sheet is associated with an HTML document using a <code>link</code> tag in the <code>head</code> part of the page.</p> <pre><code>&lt;!-- Link to a CSS stylesheet --&gt;\n&lt;link href=\"path/to/file.css\" rel=\"stylesheet\" type=\"text/css\"&gt;\n</code></pre> <p>To learn more about CSS, visit the following links:</p> <ul> <li>Khan Academy - Intro to CSS</li> <li>Mozilla Developer Network - CSS reference</li> </ul>"},{"location":"chapter12/#javascript","title":"JavaScript","text":"<p>JavaScript can interact with an HTML document to provide dynamic interactivity: responses to user actions on the page, dynamic styling, animations, etc. It is the only programming language understood by all web browsers.</p> <p>A JavaScript file, usually stored in a <code>.js</code> file, is loaded by a web page with a <code>&lt;script&gt;</code> tag.</p> <pre><code>&lt;!-- Load a JavaScript file --&gt;\n&lt;script src=\"path/to/file.js\"&gt;&lt;/script&gt;\n</code></pre>"},{"location":"chapter12/#developing-web-pages","title":"Developing web pages","text":"<p>To create interactive web pages, you need to write HTML, CSS and JavaScript code. If you're just starting out, the easiest way to do so is by using an online JavaScript playground. However, you will likely want to develop in a more professional fashion at some point, or need to work offline.</p> <p>Refer to the introduction for details on setting up your environment.</p>"},{"location":"chapter12/#tldr","title":"TL;DR","text":"<ul> <li> <p>The World Wide Web (or Web) is an information space built on top of the Internet. Web resources are accessible via their URL, and can contain hyperlinks to other resources.</p> </li> <li> <p>A web page is a document suitable for the Web. Creating web pages usually involves three technologies: HTML to structure the content, CSS to define its presentation and JavaScript to add interactivity.</p> </li> <li> <p>An HTML document is made of text and structural elements called tags that describe the page content, such as: paragraphs, headings, hyperlinks, images, etc.</p> </li> <li> <p>CSS uses selectors to declare which HTML elements a style applies to. Elements can be selected by tag name (<code>h1</code>), by class (<code>.done</code>) or by identifier (<code>#rude</code>).</p> </li> <li> <p>An HTML document can include a CSS stylesheet with a <code>&lt;link&gt;</code> tag and a JavaScript file with a <code>&lt;script&gt;</code> tag.</p> </li> </ul> <pre><code>&lt;!doctype html&gt;\n&lt;html&gt;\n\n&lt;head&gt;\n    &lt;!-- Info about the page: title, character set, etc --&gt;\n\n    &lt;!-- Link to a CSS stylesheet --&gt;\n    &lt;link href=\"path/to/file.css\" rel=\"stylesheet\" type=\"text/css\"&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;!-- Page content --&gt;\n\n    &lt;!-- Link to a JavaScript file --&gt;\n    &lt;script src=\"path/to/file.js\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre> <ul> <li>A browser is the software you use to visit webpages and use web applications. The modern ones include a set of developer tools to ease the task of developing for the web.</li> </ul>"},{"location":"chapter12/#coding-time","title":"Coding time!","text":"<p>You can skip this exercise if you have prior experience with HTML and CSS.</p>"},{"location":"chapter12/#your-first-web-page","title":"Your first web page","text":"<p>Follow the beginning of the Getting started with the Web tutorial from Mozilla Developer Network to create a simple web page using HTML and CSS. The required steps are:</p> <ol> <li>What will your website look like?</li> <li>Dealing with files</li> <li>HTML basics</li> <li>CSS basics</li> </ol> <p></p>"},{"location":"chapter13/","title":"Discover the DOM","text":"<p>This chapter will help you discover how a web page is displayed by a browser.</p>"},{"location":"chapter13/#introduction-to-the-dom","title":"Introduction to the DOM","text":"<p>You already know that a web page is a document that contains text and tags such as headings, paragraphs, links, etc. This happens in a language called HTML.</p> <p>Let's take this simple web page as an example. Feel free to add your own information!</p> <pre><code>&lt;!doctype html&gt;\n&lt;html&gt;\n\n&lt;head&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;title&gt;My web page&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;h1&gt;My web page&lt;/h1&gt;\n    &lt;p&gt;Hello! My name's Baptiste.&lt;/p&gt;\n    &lt;p&gt;I live in the great city of &lt;a href=\"https://en.wikipedia.org/wiki/Bordeaux\"&gt;Bordeaux&lt;/a&gt;.&lt;/p&gt;\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre> <p></p> <p>To create this result, the browser first takes the HTML code and builds a representation of its structure. It then displays this structure in the browser.</p> <p>The browser also offers programmatic access to its structured representation of a displayed web page. Using this interface, you can dynamically update the page by adding or removing elements, changing styles, etc. This is how you create interactive web pages.</p> <p>The structured representation of a web page is called DOM, short for Document Object Model. The DOM defines the structure of a page and a way to interact with it. This means it's a programming interface, or API (Application Programming Interface). JavaScript is the language of choice for interacting with the DOM.</p> <p>At the dawn of the Web, each browser was using its own DOM, giving headaches to JavaScript developers trying to code web pages. These hard times are over. Through a World Wide Web Consortium (W3C) effort, the first version of a unified DOM was created in 1998. Nowadays, all recent browsers use a standardized DOM.</p>"},{"location":"chapter13/#web-page-structure","title":"Web page structure","text":"<p>A web page is a set of nested tags. You can represent a web page in a hierarchical form called a tree. The <code>&lt;html&gt;</code> element sets up your document as HTML and contains two sub-elements, <code>&lt;head&gt;</code> and <code>&lt;body&gt;</code>, which themselves contain several sub-elements.</p> <p>Here is the tree corresponding to our example HTML page.</p> <p></p> <p>Each entity in the tree is called a node. There are two types of nodes:</p> <ul> <li> <p>Those (in blue here) that correspond to HTML tags like <code>&lt;body&gt;</code> or <code>&lt;p&gt;</code>. These nodes are called element nodes and they can have subnodes, called child nodes or children.</p> </li> <li> <p>Those (in red) that match the textual content of the page. These nodes are called text nodes and do not have children.</p> </li> </ul>"},{"location":"chapter13/#get-started-with-the-dom-in-javascript","title":"Get started with the DOM in JavaScript","text":"<p>The DOM represents a web page as a hierarchy of objects, where each object corresponds to a node in the nested HTML element tree. DOM objects have properties and methods that you can manipulate with JavaScript.</p>"},{"location":"chapter13/#access-the-dom-with-the-document-variable","title":"Access the DOM with the <code>document</code> variable","text":"<p>When a JavaScript program runs in the context of a web browser, it can access the root of the DOM using the variable <code>document</code>. This variable matches the <code>&lt;html&gt;</code> element.</p> <p><code>document</code> is an object that has <code>head</code> and <code>body</code> properties which allow access to the <code>&lt;head&gt;</code> and <code>&lt;body&gt;</code> elements of the page.</p> <pre><code>const h = document.head; // \"h\" variable contains the contents of the DOM's head\nconst b = document.body; // \"b\" variable contains the contents of the DOM's body\n</code></pre>"},{"location":"chapter13/#discover-a-nodes-type","title":"Discover a node's type","text":"<p>Each object has a property called <code>nodeType</code> which indicates its type. The value of this property is <code>document.ELEMENT_NODE</code> for an \"element\" node (otherwise known as an HTML tag) and <code>document.TEXT_NODE</code> for a text node.</p> <pre><code>if (document.body.nodeType === document.ELEMENT_NODE) {\n  console.log(\"Body is an element node!\");\n} else {\n  console.log(\"Body is a textual node!\");\n}\n</code></pre> <p></p> <p>As expected, the DOM object <code>body</code> is an element node because it's an HTML tag.</p>"},{"location":"chapter13/#access-a-nodes-children","title":"Access a node's children","text":"<p>Each element-typed object in the DOM has a property called <code>childNodes</code>. This is an ordered collection containing all its child nodes as DOM objects. You can use this array-like collection to access the different children of a node.</p> <p>Warning</p> <p>The <code>childNodes</code> property of an element node is not a real JavaScript array, but rather a NodeList object. Not all of the standard array methods are applicable to it.</p> <p>The following code would display the first child of the <code>body</code> node.</p> <pre><code>// Access the first child of the body node\nconsole.log(document.body.childNodes[0]);\n</code></pre> <p></p> <p>Wait... Why isn\u2019t the first child node <code>h1</code>, since that's the first element in the body's HTML?</p> <p>That's because spaces between tags and line returns in HTML code are considered text nodes by the browser. The node <code>h1</code> is therefore the second child node of the body. Let's double check that:</p> <pre><code>// Access the second child of the body node\nconsole.log(document.body.childNodes[1]);\n</code></pre> <p></p> <p>To eliminate these text nodes between tags, you could have written the HTML page in a more condensed way.</p> <pre><code>&lt;body&gt;&lt;h1&gt;My web page&lt;/h1&gt;&lt;!-- ... --&gt;\n</code></pre> <p>It's better, however, to take the text nodes between tags into account than to sacrifice visibility and code indentation.</p>"},{"location":"chapter13/#browse-child-nodes","title":"Browse child nodes","text":"<p>To browse a list of child nodes, you can use a classical <code>for</code> loop, the <code>forEach()</code> method or the newer <code>for-of</code> loop as seen below:</p> <pre><code>// Browse the body node's children using a for loop@\nfor (let i = 0; i &lt; document.body.childNodes.length; i++) {\n  console.log(document.body.childNodes[i]);\n}\n\n// Browse the body node's children using the forEach() method\ndocument.body.childNodes.forEach(node =&gt; {\n  console.log(node);\n});\n\n// Browse the body node's children using a for-of loop\nfor (const node of document.body.childNodes) {\n  console.log(node);\n}\n</code></pre> <p>Each of these techniques gives the following result.</p> <p></p> <p>Again, spaces and line returns count as text nodes in the DOM.</p>"},{"location":"chapter13/#access-a-nodes-parent","title":"Access a node's parent","text":"<p>Each DOM object has a property called <code>parentNode</code> that returns its parent node as a DOM object.</p> <p>For the DOM root node (<code>document</code>), the value of <code>parentNode</code> is <code>null</code> since it has no parent node.</p> <pre><code>const h1 = document.body.childNodes[1];\nconsole.log(h1.parentNode);       // Show the body node\nconsole.log(document.parentNode); // Will show null, since body has no parent node\n</code></pre> <p></p> <p>There are other properties that we will not discuss here that let you navigate through the DOM, like <code>firstChild</code>, <code>lastChild</code> or <code>nextSibling</code>.</p>"},{"location":"chapter13/#tldr","title":"TL;DR","text":"<ul> <li> <p>A web page is a structured document containing both text and HTML tags. The DOM, or Document Object Model, is a standardized way to define a web page's structure.</p> </li> <li> <p>The DOM is also an API allowing programmatical interactions with the web page. With JavaScript, you can access the structure of a page displayed in a browser and modify it.</p> </li> <li> <p>The DOM represents a web page as a hierarchy of objects, where each object corresponds to a node in the nested HTML element tree.</p> </li> <li> <p>The <code>document</code> variable provides access to the root of the DOM tree and corresponds to the <code>&lt;html&gt;</code> element in the HTML itself.</p> </li> <li> <p>DOM objects have properties and methods that you can manipulate with JavaScript. For example, <code>nodeType</code> returns the node type, <code>childNodes</code> contains a collection of child nodes, and <code>parentNode</code> returns the parent node.</p> </li> </ul>"},{"location":"chapter13/#coding-time","title":"Coding time!","text":""},{"location":"chapter13/#showing-a-nodes-child","title":"Showing a node's child","text":"<p>Your mission here is to create a <code>showChild()</code> function that shows one of the children of a DOM element node. This function takes as parameter the parent node and the child node index. Error cases like a non-element node or an out-of-limits index must be taken into account.</p> <p>Here's the associated HTML code.</p> <pre><code>&lt;h1&gt;A title&lt;/h1&gt;\n&lt;div&gt;Some text with &lt;a href=\"#\"&gt;a link&lt;/a&gt;.&lt;/div&gt;\n</code></pre> <p>Complete the following program to obtain the expected results.</p> <pre><code>// Show a DOM object's child node\n// \"node\" is the DOM object\n// \"index\" is the index of the child node\nconst showChild = (node, index) =&gt; {\n  // TODO: add code here\n};\n\n// Should show the h1 node\nshowChild(document.body, 1);\n\n// Should show \"Incorrect index\"\nshowChild(document.body, -1);\n\n// Should show \"Incorrect index\"\nshowChild(document.body, 8);\n\n// Should show \"Wrong node type\"\nshowChild(document.body.childNodes[0], 0);\n</code></pre> <p>Tip</p> <p>Use <code>console.error()</code> rather than <code>console.log()</code> to display an error message in the console.</p>"},{"location":"chapter14/","title":"Traverse the DOM","text":"<p>In this chapter, you'll see how to use JavaScript to traverse the DOM.</p>"},{"location":"chapter14/#sample-web-page","title":"Sample web page","text":"<p>Here's the example web page used throughout this chapter.</p> <pre><code>&lt;h1&gt;Seven wonders of the world&lt;/h1&gt;\n&lt;p&gt;Do you know the seven wonders of the world?&lt;/p&gt;\n&lt;div id=\"content\"&gt;\n    &lt;h2&gt;Wonders from Antiquity&lt;/h2&gt;\n    &lt;p&gt;This list comes to us from ancient times.&lt;/p&gt;\n    &lt;ul class=\"wonders\" id=\"ancient\"&gt;\n        &lt;li class=\"exists\"&gt;Great Pyramid of Giza&lt;/li&gt;\n        &lt;li&gt;Hanging Gardens of Babylon&lt;/li&gt;\n        &lt;li&gt;Lighthouse of Alexandria&lt;/li&gt;\n        &lt;li&gt;Statue of Zeus at Olympia&lt;/li&gt;\n        &lt;li&gt;Temple of Artemis at Ephesus&lt;/li&gt;\n        &lt;li&gt;Mausoleum at Halicarnassus&lt;/li&gt;\n        &lt;li&gt;Colossus of Rhodes&lt;/li&gt;\n    &lt;/ul&gt;\n    &lt;h2&gt;Modern wonders of the world&lt;/h2&gt;\n    &lt;p&gt;This list was decided by vote.&lt;/p&gt;\n    &lt;ul class=\"wonders\" id=\"new\"&gt;\n        &lt;li class=\"exists\"&gt;Petra&lt;/li&gt;\n        &lt;li class=\"exists\"&gt;Great Wall of China&lt;/li&gt;\n        &lt;Li class=\"exists\"&gt;Christ the Redeemer&lt;/Li&gt;\n        &lt;Li class=\"exists\"&gt;Machu Picchu&lt;/Li&gt;\n        &lt;li class=\"exists\"&gt;Chichen Itza&lt;/li&gt;\n        &lt;li class=\"exists\"&gt;Colosseum&lt;/li&gt;\n        &lt;li class=\"exists\"&gt;Taj Mahal&lt;/li&gt;\n    &lt;/ul&gt;\n    &lt;h2&gt;References&lt;/h2&gt;\n    &lt;ul&gt;\n        &lt;li&gt;&lt;a href=\"https://en.wikipedia.org/wiki/Seven_Wonders_of_the_Ancient_World\"&gt;Seven Wonders of the Ancient World&lt;/a&gt;&lt;/li&gt;\n        &lt;li&gt;&lt;a href=\"https://en.wikipedia.org/wiki/New7Wonders_of_the_World\"&gt;New Wonders of the World&lt;/a&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"chapter14/#selecting-elements","title":"Selecting elements","text":""},{"location":"chapter14/#the-limits-of-node-by-node-traversal","title":"The limits of node-by-node traversal","text":"<p>In the previous chapter, you saw how to navigate the DOM node structure of a web page beginning with the root node and using the <code>childNodes</code> property to move down levels in the structure of the page.</p> <p>Suppose you want to select the title <code>\"Wonders from Antiquity\"</code> of our web page. Taking into account the text nodes between elements, this node is the second child node of the sixth child node of the <code>body</code> element. So you could write something like this.</p> <pre><code>// Show the \"Wonders from Antiquity\" h2 element\nconsole.log(document.body.childNodes[5].childNodes[1]);\n</code></pre> <p></p> <p>This technique is pretty awkward and error-prone. The code is difficult to read and must be updated if new elements are further inserted in the web page. Fortunately, there are much better solutions.</p>"},{"location":"chapter14/#selecting-items-according-to-html-tag","title":"Selecting items according to HTML tag","text":"<p>All DOM elements have a method called <code>getElementsByTagName()</code>. This returns, under the form of a NodeList object, a list of items that have the name of the tag that's passed as a parameter. The search happens through all the sub-elements of the node on which the method is called -- not only its direct children.</p> <p>With the <code>getElementsByTagName()</code> method, selecting the first <code>h2</code> element becomes super easy:</p> <pre><code>// Get all h2 elements into an array\nconst titleElements = document.getElementsByTagName(\"h2\");\n\nconsole.log(titleElements[0]);     // Show the first h2\nconsole.log(titleElements.length); // 3 (total number of h2 elements in the page)\n</code></pre> <p></p> <p>Tip</p> <p>Suffixing JavaScript variables associated to DOM element nodes with <code>Element</code> (or <code>Elements</code> when the variable contains several nodes) is a popular naming convention. We'll stick to it throughout this book.</p>"},{"location":"chapter14/#selecting-items-according-to-class","title":"Selecting items according to class","text":"<p>DOM elements also feature a method called <code>getElementsByClassName()</code>. This method returns a <code>NodeList</code> object of elements with the class name as a parameter. Again, the search covers all sub-elements of the node on which the method is called.</p> <p>It's important to note that <code>NodeList</code> objects are not real JavaScript arrays, so not all array operations are applicable to them. To turn a <code>NodeList</code> object into an array, use the <code>Array.from()</code> method.</p> <p>To select and display all document elements with a class <code>\"exists\"</code>, you can write the following code.</p> <pre><code>// Show all elements that have the class \"exists\"\nconst existingElements = Array.from(document.getElementsByClassName(\"exists\"));\nexistingElements.forEach(element =&gt; {\n  console.log(element);\n});\n</code></pre> <p></p>"},{"location":"chapter14/#selecting-an-item-according-to-its-id","title":"Selecting an item according to its ID","text":"<p>Lastly, the <code>document</code> variable provides a method called <code>getElementById()</code> that returns the element with the specified ID among all elements of the document. It returns <code>null</code> if no associated element can be found.</p> <p>The following code selects and displays the list with ID <code>\"new\"</code>.</p> <pre><code>// Show element with the ID \"new\"\nconsole.log(document.getElementById(\"new\"));\n</code></pre> <p></p> <p>Warning</p> <p>Beware: contrary to others, the <code>getElementById()</code> method does not contain any <code>'s'</code> after the word <code>\"Element\"</code>.</p>"},{"location":"chapter14/#selecting-elements-via-css-selectors","title":"Selecting elements via CSS selectors","text":"<p>For more complex use cases, you can also use CSS selectors to access DOM elements.</p> <p>For example, let's say that you want to grab all the <code>&lt;li&gt;</code> elements of wonders that are both ancient and still exist.</p> <pre><code>// All \"ancient\" wonders that still exist\nconsole.log(document.getElementById(\"ancient\").getElementsByClassName(\"exists\").length); // 1\n</code></pre> <p>This syntax is a little clunky though. Let's learn two new methods that make finding elements easier.</p> <p>The first is <code>querySelectorAll()</code>, with which you can use CSS selectors to identify elements.</p> <pre><code>// All paragraphs\nconsole.log(document.querySelectorAll(\"p\").length); // 3\n\n// All paragraphs inside the \"content\" ID block\nconsole.log(document.querySelectorAll(\"#content p\").length); // 2\n\n// All elements with the \"exists\" class\nconsole.log(document.querySelectorAll(\".exists\").length); // 8\n\n// All \"ancient\" wonders that still exist\nconsole.log(document.querySelectorAll(\"#ancient &gt; .exists\").length); // 1\n</code></pre> <p>Check the Mozilla Developer Network for a primer on the different CSS selectors available.</p> <p>The second method using CSS selectors is called <code>querySelector()</code>. It works the same way as <code>querySelectorAll()</code> but only returns the first matching element. It returns <code>null</code> if no associated element can be found.</p> <pre><code>// Show the first paragraph\nconsole.log(document.querySelector(\"p\"));\n</code></pre> <p></p>"},{"location":"chapter14/#choosing-a-selection-method","title":"Choosing a selection method","text":"<p>You just discovered several ways of selecting DOM elements. How do you choose the right one?</p> <p>Since they use CSS selectors, <code>querySelectorAll()</code> and <code>querySelector()</code> could cover all your needs, but they might perform slower than the others.</p> <p>Here are the general rules of thumb that you should follow.</p> Number of items to get Selection criterion Method to use Many By tag <code>getElementsByTagName()</code> Many By class <code>getElementsByClassName()</code> Many Not by class or tag <code>querySelectorAll()</code> Only one By ID <code>getElementById()</code> Only one (the first) Not by ID <code>querySelector()</code>"},{"location":"chapter14/#obtaining-information-about-elements","title":"Obtaining information about elements","text":"<p>The DOM also provides information on the items you've just selected.</p>"},{"location":"chapter14/#html-content","title":"HTML content","text":"<p>The <code>innerHTML</code> property will retrieve the HTML content of your DOM element.</p> <pre><code>// The HTML content of the DOM element with ID \"content\"\nconsole.log(document.getElementById(\"content\").innerHTML);\n</code></pre> <p></p> <p>This property has been introduced by Microsoft and is not part of the W3C DOM specification, but it is nonetheless supported by all major browsers.</p>"},{"location":"chapter14/#textual-content","title":"Textual content","text":"<p>The <code>textContent</code> property returns all the text content of a DOM element, without any HTML markup.</p> <pre><code>// The textual content of the DOM element with ID \"content\"\nconsole.log(document.getElementById(\"content\").textContent);\n</code></pre> <p></p>"},{"location":"chapter14/#attributes","title":"Attributes","text":"<p>The <code>getAttribute()</code> method can be applied to a DOM element and will return the value of a given attribute.</p> <pre><code>// Show href attribute of the first link\nconsole.log(document.querySelector(\"a\").getAttribute(\"href\"));\n</code></pre> <p></p> <p>Some attributes are directly accessible as properties. This is true for the <code>id</code>, <code>href</code>, and <code>value</code> attributes.</p> <pre><code>// Show ID attribute of the first list\nconsole.log(document.querySelector(\"ul\").id);\n\n// Show href attribute of the first link\nconsole.log(document.querySelector(\"a\").href);\n</code></pre> <p></p> <p>You can check for the existence of an attribute using the <code>hasAttribute()</code> method as seen in the example below.</p> <pre><code>if (document.querySelector(\"a\").hasAttribute(\"target\")) {\n  console.log(\"The first link has a target attribute.\");\n} else {\n  console.log(\"The first link does not have a target attribute.\"); // Will be shown\n}\n</code></pre>"},{"location":"chapter14/#classes","title":"Classes","text":"<p>In a web page, a tag can have multiple classes. The <code>classList</code> property retrieves a DOM element's list of classes.</p> <pre><code>// List of classes of the element identified by \"ancient\"\nconst classes = document.getElementById(\"ancient\").classList;\nconsole.log(classes.length); // 1 (since the element only has one class)\nconsole.log(classes[0]);     // \"wonders\"\n</code></pre> <p>You also have the opportunity to test the presence of a class on an element by calling the <code>contains()</code> method on the class list, passing the class to test as a parameter.</p> <pre><code>if (document.getElementById(\"ancient\").classList.contains(\"wonders\")) {\n  console.log(\"The element with ID 'ancient' has the class 'wonders'.\"); // Will be shown\n} else {\n  console.log(\"The element with ID 'ancient' does not have the class 'wonders'.\");\n}\n</code></pre> <p>This is only a part of the DOM traversal API. For more details, check the Mozilla Developer Network.</p>"},{"location":"chapter14/#tldr","title":"TL;DR","text":"<ul> <li> <p>Rather than go through the DOM node by node, you can quickly access one or more elements using selection methods.</p> </li> <li> <p>The <code>getElementsByTagName()</code>, <code>getElementsByClassName()</code> and <code>getElementById()</code> methods respectively search items by tag name, class, and ID. The first two methods return a list, which can further be converted to an array with <code>Array.from()</code>. The latter method returns a single item.</p> </li> <li> <p>The <code>querySelectorAll()</code> and <code>querySelector()</code> methods make it possible to search for items using a CSS selector. The first method returns all matching items, and the second returns only the first.</p> </li> <li> <p>The <code>innerHTML</code> property returns the HTML content of an element. The <code>textContent</code> property returns its textual content without any HTML markup.</p> </li> <li> <p>The <code>getAttribute()</code> and <code>hasAttribute()</code> methods allow access to element attributes. The <code>classList</code> property and its method <code>contains()</code> provides access to an element's classes.</p> </li> </ul>"},{"location":"chapter14/#coding-time","title":"Coding time!","text":""},{"location":"chapter14/#counting-elements","title":"Counting elements","text":"<p>Here is some HTML code (content is by French poet Paul Verlaine).</p> <pre><code>&lt;h1&gt;Mon r\u00eave familier&lt;/h1&gt;\n\n&lt;p&gt;Je fais souvent ce r\u00eave &lt;span class=\"adjective\"&gt;\u00e9trange&lt;/span&gt; et &lt;span class=\"adjective\"&gt;p\u00e9n\u00e9trant&lt;/span&gt;&lt;/p&gt;\n&lt;p&gt;D'une &lt;span&gt;femme &lt;span class=\"adjective\"&gt;inconnue&lt;/span&gt;&lt;/span&gt;, et que j'aime, et qui m'aime&lt;/p&gt;\n&lt;p&gt;Et qui n'est, chaque fois, ni tout \u00e0 fait la m\u00eame&lt;/p&gt;\n&lt;p&gt;Ni tout \u00e0 fait une autre, et m'aime et me comprend.&lt;/p&gt;\n</code></pre> <p>Complete the following program to write the <code>countElements()</code> function, that takes a CSS selector as a parameter and returns the number of corresponding elements.</p> <pre><code>// TODO: write the countElements() function here\n\nconsole.log(countElements(\"p\"));              // Should show 4\nconsole.log(countElements(\".adjective\"));     // Should show 3\nconsole.log(countElements(\"p .adjective\"));   // Should show 3\nconsole.log(countElements(\"p &gt; .adjective\")); // Should show 2\n</code></pre>"},{"location":"chapter14/#handling-attributes","title":"Handling attributes","text":"<p>Here is the description of several musical instruments.</p> <pre><code>&lt;h1&gt;Some musical instruments&lt;/h1&gt;\n&lt;ul&gt;\n  &lt;li id=\"clarinet\" class=\"wind woodwind\"&gt;\n    The &lt;a href=\"https://en.wikipedia.org/wiki/Clarinet\"&gt;clarinet&lt;/a&gt;\n  &lt;/li&gt;\n  &lt;li id=\"saxophone\" class=\"wind woodwind\"&gt;\n    The &lt;a href=\"https://en.wikipedia.org/wiki/Saxophone\"&gt;saxophone&lt;/a&gt;\n  &lt;/li&gt;\n  &lt;li id=\"trumpet\" class=\"wind brass\"&gt;\n    The &lt;a href=\"https://en.wikipedia.org/wiki/Trumpet\"&gt;trumpet&lt;/a&gt;\n  &lt;/li&gt;\n  &lt;li id=\"violin\" class=\"chordophone\"&gt;\n    The &lt;a href=\"https://en.wikipedia.org/wiki/Violin\"&gt;violin&lt;/a&gt;\n  &lt;/li&gt;\n&lt;/ul&gt;\n</code></pre> <p>Write a JavaScript program containing a <code>linkInfo()</code> function that shows:</p> <ul> <li>The total number of links.</li> <li>The target of the first and last links.</li> </ul> <p>This function should work even if no links are present.</p> <p></p> <p>Add the following new instrument at the end of the HTML list, then check your program's new result.</p> <pre><code>&lt;li id=\"harpsichord\"&gt;\n  The &lt;a href=\"https://en.wikipedia.org/wiki/Harpsichord\"&gt;harpsichord&lt;/a&gt;\n&lt;/li&gt;\n</code></pre> <p></p>"},{"location":"chapter14/#handling-classes","title":"Handling classes","text":"<p>Improve the previous program to add a <code>has()</code> function that tests if an element designated by its ID has a class. The function shows <code>true</code>, <code>false</code> or an error message if the element can\u2019t be found.</p> <pre><code>// Show if an element has a class\nconst has = (id, someClass) =&gt; {\n  // TODO: write the function code\n};\n\nhas(\"saxophone\", \"woodwind\");     // Should show true\nhas(\"saxophone\", \"brass\");        // Should show false\nhas(\"trumpet\", \"brass\");          // Should show true\nhas(\"contrabass\", \"chordophone\"); // Should show an error message\n</code></pre> <p>Use <code>console.error()</code> rather than <code>console.log()</code> to display an error message in the console.</p> <p></p>"},{"location":"chapter15/","title":"Modify page structure","text":"<p>Let's see how to use JavaScript to modify a web page once it's been loaded by the browser! You can thus make your content more dynamic and interactive.</p>"},{"location":"chapter15/#modify-an-existing-element","title":"Modify an existing element","text":"<p>The DOM traversal properties studied in the previous chapter can also be used to update elements in the page.</p>"},{"location":"chapter15/#example-page","title":"Example page","text":"<p>The examples in the next paragraphs use the HTML code below.</p> <pre><code>&lt;h3 class=\"beginning\"&gt;Some languages&lt;/h3&gt;\n&lt;div id=\"content\"&gt;\n    &lt;ul id=\"languages\"&gt;\n        &lt;li id=\"cpp\"&gt;C++&lt;/li&gt;\n        &lt;li id=\"java\"&gt;Java&lt;/li&gt;\n        &lt;li id=\"csharp\"&gt;C#&lt;/li&gt;\n        &lt;li id=\"php\"&gt;PHP&lt;/li&gt;\n    &lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"chapter15/#html-content","title":"HTML content","text":"<p>The <code>innerHTML</code> property can be used to change the content of an element within the DOM.</p> <p>For example, you can add a new language to our list with the code below. We'll access the <code>&lt;ul&gt;</code> tag identified by <code>\"languages\"</code> and then add an entry to the end of the list via an operator (<code>+=</code>) and an <code>&lt;li&gt;</code>.</p> <pre><code>// Modifying an HTML element: adding an &lt;li&gt;\ndocument.getElementById(\"languages\").innerHTML += '&lt;li id=\"c\"&gt;C&lt;/li&gt;';\n</code></pre> <p></p> <p>The <code>innerHTML</code> property is often used to \"empty\" content. Try the following example:</p> <pre><code>// Delete the HTML content of the list, replacing it with nothing\ndocument.getElementById(\"languages\").innerHTML = \"\";\n</code></pre> <p>Before moving on, remove the above line from your JavaScript program. Otherwise, you'll have no content!</p> <p>Tip</p> <p>When using <code>innerHTML</code>, you put HTML content into strings. To keep your code readable and avoid mistakes, you should only use <code>innerHTML</code> to make small content changes. You'll discover more versatile solutions below.</p>"},{"location":"chapter15/#text-content","title":"Text content","text":"<p>Use the <code>textContent</code> property to modify the text content of a DOM element. Here is how to complete the title displayed by our page.</p> <pre><code>// Modify the title's text content\ndocument.querySelector(\"h3\").textContent += \" for programming\";\n</code></pre> <p></p>"},{"location":"chapter15/#attributes","title":"Attributes","text":"<p>The <code>setAttribute()</code> method sets the value of an attribute of an element. You pass the name and value of the attribute as parameters.</p> <pre><code>// Define the id attribute of the first title\ndocument.querySelector(\"h3\").setAttribute(\"id\", \"title\");\n</code></pre> <p>As you saw in the previous chapter, some attributes exist as properties and can be directly updated.</p> <pre><code>// Define the id attribute of the first title\ndocument.querySelector(\"h3\").id = \"title\";\n</code></pre>"},{"location":"chapter15/#classes","title":"Classes","text":"<p>You can use the <code>classList</code> property to add or remove classes from a DOM element!</p> <pre><code>const titleElement = document.querySelector(\"h3\"); // Grab the first h3\ntitleElement.classList.remove(\"beginning\");        // Remove the class \"beginning\"\ntitleElement.classList.add(\"title\");               // Add a class called \"title\"\nconsole.log(titleElement);\n</code></pre> <p></p>"},{"location":"chapter15/#adding-a-new-element","title":"Adding a new element","text":"<p>Adding a new element to a web page can be broken into three steps:</p> <ul> <li>Create the new element.</li> <li>Set element properties.</li> <li>Insert the new element in the DOM.</li> </ul> <p>For example, suppose you want to add the language \"Python\" to the list of languages on our page. Here's the JavaScript code you'd use to do so.</p> <pre><code>const pythonElement = document.createElement(\"li\"); // Create an \"li\" element\npythonElement.id = \"python\";          // Define element ID\npythonElement.textContent = \"Python\"; // Define its text content\ndocument.getElementById(\"languages\").appendChild(pythonElement); // Insert the new element into the DOM\n</code></pre> <p></p> <p>Let's study each of these steps.</p>"},{"location":"chapter15/#creating-the-element","title":"Creating the element","text":"<p>You'd create an element using the <code>createElement()</code> method (surprising, isn\u2019t it?). This method is used on the document object and takes the tag of the new element as a parameter. This method also returns the element created as an object (here stored in a variable called <code>pythonElement</code>).</p> <pre><code>const pythonElement = document.createElement(\"li\"); // Create an li element\n</code></pre>"},{"location":"chapter15/#setting-element-properties","title":"Setting element properties","text":"<p>Once the element is created and stored in a variable, you can add some detail to it (ID, class, text content, etc.) by using the aforementioned DOM properties.</p> <p>In the example, the element ID becomes <code>\"python\"</code> and its text content becomes <code>\"Python\"</code>.</p> <pre><code>// ...\npythonElement.id = \"python\";          // Define element ID\npythonElement.textContent = \"Python\"; // Define its text content\n</code></pre>"},{"location":"chapter15/#inserting-the-element-into-the-dom","title":"Inserting the element into the DOM","text":"<p>There are several techniques to insert a new node in the DOM. The most common is to call the <code>appendChild()</code> method on the element that will be the future parent of the new node. The new node is added to the end of the list of child nodes of that parent.</p> <p>In our example, the new item is added as a new child of the <code>&lt;ul&gt;</code> tag identified by <code>\"languages\"</code>, after all the other children of this tag.</p> <pre><code>// ...\ndocument.getElementById(\"languages\").appendChild(pythonElement); // Insert the new element into the DOM\n</code></pre>"},{"location":"chapter15/#variations-on-adding-elements","title":"Variations on adding elements","text":""},{"location":"chapter15/#adding-a-textual-node","title":"Adding a textual node","text":"<p>Instead of using the <code>textContent</code> property to define the new element's textual content, you can create a textual node with the <code>createTextNode()</code> method. This node can then be added to the new element with <code>appendChild()</code>.</p> <p>The following code demonstrates this possibility by inserting the Ruby language at the end of the list.</p> <pre><code>const rubyElement = document.createElement(\"li\"); // Create an \"li\" element\nrubyElement.id = \"ruby\"; // Define element ID\nrubyElement.appendChild(document.createTextNode(\"Ruby\")); // Define its text content\ndocument.getElementById(\"languages\").appendChild(rubyElement); // Insert the new element into the DOM\n</code></pre> <p></p>"},{"location":"chapter15/#adding-a-node-before-another-one","title":"Adding a node before another one","text":"<p>Sometimes, inserting a new node at the end of its parent's children list is not ideal. In that case, you can use the <code>insertBefore()</code> method. Called on the future parent, this method takes as parameters the new node and the node before which the new one will be inserted.</p> <p>As an example, here's how the Perl language could be inserted before PHP in the list.</p> <pre><code>const perlElement = document.createElement(\"li\"); // Create an \"li\" element\nperlElement.id = \"perl\"; // Define element ID\nperlElement.textContent = \"Perl\"; // Define its text content\n// Insert the new element before the \"PHP\" node\ndocument.getElementById(\"languages\").insertBefore(perlElement, document.getElementById(\"php\"));\n</code></pre> <p></p>"},{"location":"chapter15/#determining-the-exact-position-of-the-new-node","title":"Determining the exact position of the new node","text":"<p>There is a method to more precisely define the position of inserted elements: <code>insertAdjacentHTML()</code>. Call it on an existing element and pass it the position and a string of HTML characters that represent the new content to be added. The new content's position should be either:</p> <ul> <li><code>beforebegin</code>: before the existing element.</li> <li><code>afterbegin</code>: inside the existing element, before its first child.</li> <li><code>beforeend</code>: inside the existing element, after its last child.</li> <li><code>afterend</code>: after the existing element.</li> </ul> <p>Here's how these positions translate relative to an existing <code>&lt;p&gt;</code> tag.</p> <pre><code>&lt;!-- beforebegin --&gt;\n&lt;p&gt;\n  &lt;!-- afterbegin --&gt;\n  foo\n  &lt;!-- beforeend --&gt;\n&lt;/p&gt;\n&lt;!-- afterend --&gt;\n</code></pre> <p>The following example uses <code>insertAdjacentHTML()</code> to add JavaScript at the top of the language list.</p> <pre><code>// Add an element to the beginning of a list\ndocument.getElementById('languages').insertAdjacentHTML(\"afterBegin\", '&lt;li id=\"javascript\"&gt;JavaScript&lt;/li&gt;');\n</code></pre> <p></p>"},{"location":"chapter15/#replacing-or-removing-nodes","title":"Replacing or removing nodes","text":""},{"location":"chapter15/#replacing-a-node","title":"Replacing a node","text":"<p>A DOM element can be replaced with the <code>replaceChild()</code> method. This replaces a child node of the current element with another node. The new node and node-to-be-replaced are passed as parameters (in that order).</p> <p>The example shows replacing the Perl language with Lisp.</p> <pre><code>const lispElement = document.createElement(\"li\"); // Create an li element\nlispElement.id = \"lisp\";          // Define its ID\nlispElement.textContent = \"Lisp\"; // Define its text content\n// Replace the element identified by \"perl\" with the new element\ndocument.getElementById(\"languages\").replaceChild(lispElement, document.getElementById(\"perl\"));\n</code></pre> <p></p>"},{"location":"chapter15/#removing-a-node","title":"Removing a node","text":"<p>Lastly, you can delete a node thanks to a method called <code>removeChild()</code>, to which you'll pass the node-to-be-removed as a parameter.</p> <pre><code>// Remove the element with the \"lisp\" id\ndocument.getElementById(\"languages\").removeChild(document.getElementById(\"lisp\"));\n</code></pre> <p></p>"},{"location":"chapter15/#styling-elements","title":"Styling elements","text":"<p>JavaScript not only lets you interact with your web page structure, but it also lets you change the style of elements. It's time to learn how.</p> <p>Here is the example HTML content used in the next paragraphs.</p> <pre><code>&lt;p&gt;First&lt;/p&gt;\n&lt;p style=\"color: green;\"&gt;Second&lt;/p&gt;\n&lt;p id=\"para\"&gt;Third&lt;/p&gt;\n</code></pre> <p>And here is the associated CSS stylesheet. The rules in a stylesheet determine the appearance of elements on a page. Here, the one element we're adjusting via CSS is the element with the <code>para</code> ID. Its text will be blue and in italics.</p> <pre><code>#para {\n    font-style: italic;\n    color: blue;\n}\n</code></pre> <p></p>"},{"location":"chapter15/#the-style-property","title":"The <code>style</code> property","text":"<p>DOM elements are equipped with a property called <code>style</code>, which returns an object representing the HTML element's <code>style</code> attribute. This object's properties match up to its CSS properties. By defining these properties with JavaScript, you're actually modifying the element's style.</p> <p>The code below selects the page's first paragraph and modifies its text color and margins.</p> <pre><code>const paragraphElement = document.querySelector(\"p\");\nparagraphElement.style.color = \"red\";\nparagraphElement.style.margin = \"50px\";\n</code></pre>"},{"location":"chapter15/#compound-css-properties","title":"Compound CSS properties","text":"<p>Some CSS properties have compound names, meaning they're composed of two words (like <code>background-color</code>). To interact with these properties via JavaScript, you have to ditch the hyphen and capitalize the first letter of following words.</p> <p>This example modifies the same paragraph element's <code>font-family</code> and <code>background-color</code> properties.</p> <pre><code>// ...\nparagraphElement.style.fontFamily = \"Arial\";\nparagraphElement.style.backgroundColor = \"black\";\n</code></pre> <p></p> <p>This naming convention, already encountered in previous chapters, is called camelCase.</p> <p>You can see CSS properties and their JavaScript properties on the Mozilla Developer Network.</p>"},{"location":"chapter15/#the-limits-of-the-style-property","title":"The limits of the <code>style</code> property","text":"<p>Let's try to display the text color of each of our example paragraphs.</p> <pre><code>const paragraphElements = document.getElementsByTagName(\"p\");\nconsole.log(paragraphElements[0].style.color); // \"red\"\nconsole.log(paragraphElements[1].style.color); // \"green\"\nconsole.log(paragraphElements[2].style.color); // Show an empty string\n</code></pre> <p></p> <p>Why is the color of the third paragraph (blue) not showing?</p> <p>Because the <code>style</code> property used in this code only represents the <code>style</code> attribute of the element. Using this property, you cannot access style declarations defined elsewhere, for example in a CSS stylesheet. This explains why the third paragraph's style, defined externally, is not shown here.</p>"},{"location":"chapter15/#access-element-styles","title":"Access element styles","text":"<p>A better solution for accessing element styles is to use a function called <code>getComputedStyle()</code>. This function takes a DOM node as a parameter and returns an object that represents the element's style. You can then see the different CSS properties of the object.</p> <p>The following example will show the style properties of the third paragraph:</p> <pre><code>const paragraphStyle = getComputedStyle(document.getElementById(\"para\"));\nconsole.log(paragraphStyle.fontStyle); // \"italic\"\nconsole.log(paragraphStyle.color);     // color blue in RGB values\n</code></pre> <p></p> <p>The blue color is represented as 3 color values: red, green, and blue (RGB). For each of these primary colors, values will always be between or equal to 0 and 255.</p>"},{"location":"chapter15/#dom-manipulations-and-performance","title":"DOM manipulations and performance","text":"<p>Updating the DOM through JavaScript code causes the browser to compute the new page display. Frequent manipulations can lead to slowdowns and sub-par performance. As such, you should keep DOM access and update operations to a minimum.</p> <p>Creating and setting element properties before they're inserted into the DOM is a good way to preserve performance.</p> <pre><code>// Bad: DOM is updated multiple times\nconst newNode = document.createElement(...); // Create new element\nparentNode.appendChild(newNode); // Add it to the DOM\nnewNode.id = ...; // Set some element properties\nnewNode.textContent = \"...\";\n// ...\n\n// Better: DOM is updated only once\nconst newNode = document.createElement(...); // Create new element\nnewNode.id = ...; // Set some element properties\nnewNode.textContent = \"...\";\n// ...\nparentNode.appendChild(newNode); // Add it to the DOM\n</code></pre>"},{"location":"chapter15/#tldr","title":"TL;DR","text":"<ul> <li> <p>The <code>innerHTML</code>, <code>textContent</code> and <code>classList</code> properties, as well as the <code>setAttribute</code> method, let you modify a DOM element's information.</p> </li> <li> <p>You create new DOM nodes via methods <code>createTextNode()</code> (for, well, text nodes) and <code>createElement()</code> (for elements themselves).</p> </li> <li> <p>The <code>appendChild()</code> method lets you insert a new node as the last child of a DOM element.</p> </li> <li> <p>The <code>insertBefore()</code> and <code>insertAdjacentHTML()</code> methods are alternative possibilities for adding content.</p> </li> <li> <p>You can replace existing nodes with the <code>replaceChild()</code> method or remove them with <code>removeChild()</code>.</p> </li> <li> <p>The JavaScript <code>style</code> property represents the <code>style</code> attribute of a DOM node. It lets you modify the element's style by defining values of its CSS properties.</p> </li> <li> <p>CSS properties that involve multiple words are written in camelCase when dealing with JavaScript. For example, <code>font-family</code> becomes <code>fontFamily</code>.</p> </li> <li> <p>The <code>style</code> property is not intended to access an element's style. You should use the <code>getComputedStyle()</code> function instead.</p> </li> <li> <p>Manipulating the DOM with JavaScript should be done sparingly so that page performance doesn\u2019t suffer.</p> </li> </ul>"},{"location":"chapter15/#coding-time","title":"Coding time!","text":""},{"location":"chapter15/#adding-a-paragraph","title":"Adding a paragraph","text":"<p>Improve the languages example to add a paragraph (<code>&lt;p&gt;</code> tag) containing a link (<code>&lt;a&gt;</code> tag) to the URL https://en.wikipedia.org/wiki/List_of_programming_languages.</p> <p></p>"},{"location":"chapter15/#newspaper-list","title":"Newspaper list","text":"<p>Here is the HTML code of a web page.</p> <pre><code>&lt;h3&gt;Some newspapers&lt;/h3&gt;\n&lt;div id=\"content\"&gt;&lt;/div&gt;\n</code></pre> <p>Write a program that shows on the page a list of newspapers defined in a JavaScript array. Each link must be clickable.</p> <pre><code>// Newspaper list\nconst newspapers = [\"https://www.nytimes.com\", \"https://www.washingtonpost.com\", \"http://www.economist.com\"];\n</code></pre> <p></p>"},{"location":"chapter15/#mini-dictionary","title":"Mini-dictionary","text":"<p>Here is the HTML code of a web page.</p> <pre><code>&lt;h3&gt;A mini-dictionary&lt;/h3&gt;\n&lt;div id=\"content\"&gt;&lt;/div&gt;\n</code></pre> <p>Write a program that shows on the page a list of terms and definitions contained in a JavaScript array.</p> <pre><code>const words = [{\n  term: \"Procrastination\",\n  definition: \"Avoidance of doing a task that needs to be accomplished\"\n}, {\n  term: \"Tautology\",\n  definition: \"logical argument constructed in such a way that it is logically irrefutable\"\n}, {\n  term: \"Oxymoron\",\n  definition: \"figure of speech that juxtaposes elements that appear to be contradictory\"\n}];\n</code></pre> <p>Use the HTML <code>&lt;dl&gt;</code> tag to create the list (more on this tag). Each term of the dictionary should be given more importance with a <code>&lt;strong&gt;</code> tag.</p> <p></p>"},{"location":"chapter15/#updating-colors","title":"Updating colors","text":"<p>The following HTML content defines three paragraphs.</p> <pre><code>&lt;h1&gt;Paragraph 1&lt;/h1&gt;\n&lt;div&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec dignissim fringilla dapibus. Curabitur placerat efficitur molestie. Quisque quis consequat nibh. Aenean feugiat, eros eget aliquam vulputate, leo augue luctus lectus, non lobortis libero quam non sem. Aliquam sit amet tincidunt ex, mollis interdum massa.&lt;/div&gt;\n\n&lt;h1&gt;Paragraph 2&lt;/h1&gt;\n&lt;div&gt;Vivamus at justo blandit, ornare leo id, vehicula urna. Fusce sed felis eget magna viverra feugiat eget nec orci. Duis non massa nibh. Aenean vehicula velit a magna lobortis tempor ut quis felis. Proin vitae dui a eros facilisis fringilla ut ut ante.&lt;/div&gt;\n\n&lt;h1&gt;Paragraph 3&lt;/h1&gt;\n&lt;div&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis sit amet pharetra massa. Nulla blandit erat nulla, et scelerisque libero varius ut. Praesent bibendum eu magna ullamcorper venenatis. Sed ut pellentesque leo. Sed ultrices sapien consequat odio posuere gravida.&lt;/div&gt;\n</code></pre> <p>Write a program that asks the user for the new text color, and then asks for the new background color. The page is then updated accordingly.</p> <p></p>"},{"location":"chapter15/#information-about-an-element","title":"Information about an element","text":"<p>Here is this exercise's HTML code.</p> <pre><code>&lt;div id=\"content\"&gt;ABC\n    &lt;br&gt;Easy as\n    &lt;br&gt;One, two, three\n&lt;/div&gt;\n&lt;div id=\"infos\"&gt;&lt;/div&gt;\n</code></pre> <p>And the associated CSS stylesheet.</p> <pre><code>#content {\n    float: right;\n    margin-top: 100px;\n    margin-right: 50px;\n}\n</code></pre> <p>Write a program that adds to the page a list showing the height and width of the element identified by \"content\".</p> <p></p>"},{"location":"chapter16/","title":"React to events","text":"<p>To make a web page interactive, you have to respond to user actions. Let's discover how to do so.</p>"},{"location":"chapter16/#introduction-to-events","title":"Introduction to events","text":"<p>Up until now, your JavaScript code was executed right from the start. The execution order of statements was determined in advance and the only user interactions were data input through <code>prompt()</code> calls.</p> <p>To add more interactivity, the page should react to the user's actions: clicking on a button, filling a form, etc. In that case, the execution order of statements is not determined in advance anymore, but depends on the user behavior. His actions trigger events that can be handled by writing JavaScript code.</p> <p>This way of writing programs is called event-driven programming. It is often used by user interfaces, and more generally anytime a program needs to interact with a user.</p>"},{"location":"chapter16/#a-first-example","title":"A first example","text":"<p>Here's some starter HTML code.</p> <pre><code>&lt;button id=\"myButton\"&gt;Click me!&lt;/button&gt;\n</code></pre> <p>And here's the associated JavaScript code.</p> <pre><code>const showMessage = () =&gt; {\n  alert(\"Hello!\");\n};\n\n// Access the button\nconst buttonElement = document.getElementById(\"myButton\");\n// Listen to the \"click\" event\nbuttonElement.addEventListener(\"click\", showMessage);\n</code></pre> <p>Clicking on the web page button shows an <code>\"Hello!</code> message.</p> <p></p>"},{"location":"chapter16/#adding-an-event-listener","title":"Adding an event listener","text":"<p>Called on a DOM element, the <code>addEventListener()</code> method adds a handler for a particular event. This method takes as parameter the event type and the associated function. This function gets called whenever an event of the corresponding type appears for the DOM element.</p> <p>The above JavaScript code could be rewritten more concisely using an anonymous function, for an identical result.</p> <pre><code>// Show a message when the user clicks on the button\ndocument.getElementById(\"myButton\").addEventListener(\"click\", () =&gt; {\n  alert(\"Hello!\");\n});\n</code></pre>"},{"location":"chapter16/#removing-an-event-listener","title":"Removing an event listener","text":"<p>In some particular cases, you might want to stop reacting to an event on a DOM element. To achieve this, call the <code>removeEventListener()</code> on the element, passing as a parameter the function which used to handle the event.</p> <pre><code>// Remove the handler for the click event\nbuttonElement.removeEventListener(\"click\", showMessage);\n</code></pre> <p>Note</p> <p>This can only work if the handler function is not anonymous.</p>"},{"location":"chapter16/#the-event-family","title":"The event family","text":"<p>Many types of events can be triggered by DOM elements. Here are the main event categories.</p> Category Examples Keyboard events Pressing or releasing a key Mouse events Clicking on a mouse button, pressing or releasing a mouse button, hovering over a zone Window events Loading or closing a page, resizing, scrolling Form events Changing focus on a form field, submitting a form <p>Every event is associated to an <code>Event</code> object which has both properties (information about the event) and methods (ways to act on the event). This object can be used by the handler function.</p> <p>Many properties of the <code>Event</code> object associated to an event depend on the event type. Some properties are always present, like <code>type</code> that returns the event type and <code>target</code> that return the event target (the DOM element that is the event source).</p> <p>The <code>Event</code> object is passed as a parameter to the handler function. The following code uses this object to show the event type and target in the console.</p> <pre><code>// Show event type and target when the user clicks on the button\ndocument.getElementById(\"myButton\").addEventListener(\"click\", e =&gt; {\n  console.log(`Event type: ${e.type}, target: ${e.target}`);\n});\n</code></pre> <p></p> <p>Note</p> <p>The parameter name chosen for the <code>Event</code> object is generally <code>e</code> or <code>event</code>.</p>"},{"location":"chapter16/#reacting-to-common-events","title":"Reacting to common events","text":""},{"location":"chapter16/#key-presses","title":"Key presses","text":"<p>The most common solution for reacting to key presses on a keyboard involves handling <code>keydown</code> and <code>keyup</code> events that happen on a web page (the DOM <code>body</code> element, which corresponds to the global variable called <code>document</code> in JavaScript).</p> <p>The following example shows in the console the character associated to a pressed key. The string value of the key is given by the <code>key</code> property of the <code>Event</code> object associated to the event.</p> <pre><code>// Show the pressed key\ndocument.addEventListener(\"keyup\", e =&gt; {\n  console.log(`You pressed the ${e.key} key`);\n});\n</code></pre> <p></p> <p>To manage the press and release of any key, you'll use both <code>keydown</code> and <code>keyup</code> events. In the following example, we output the event type and the key's code, using the <code>type</code> and <code>keyCode</code> properties of the <code>Event</code> object.</p> <pre><code>// Show information on a keyboard event\nconst keyboardInfo = e =&gt; {\n  console.log(`Keyboard event: ${e.type}, key: ${e.keyCode}`);\n};\n\n// Integrate this function into key press and release:\ndocument.addEventListener(\"keydown\", keyboardInfo);\ndocument.addEventListener(\"keyup\", keyboardInfo);\n</code></pre> <p></p> <p>This result demonstrates that the launch order of keyboard-related events is as expected: <code>keydown</code> -&gt; <code>keyup</code>.</p> <p>Note</p> <p>The <code>keydown</code> event is fired several times when a key is kept pressed.</p>"},{"location":"chapter16/#mouse-clicks","title":"Mouse clicks","text":"<p>Mouse clicks on any DOM element produce a event of the <code>click</code> type. Tactile interfaces like smartphones and tablets also have <code>click</code> events associated with buttons, which are kicked off by actually pressing a finger on the button.</p> <p>The <code>Event</code> object associated with a <code>click</code> event has a <code>button</code> property which lets you know the mouse button used, as well as <code>clientX</code> and <code>clientY</code> properties that return the horizontal and vertical coordinates of the place where the click happened. These coordinates are defined relative to the page zone currently shown by the browser.</p> <p></p> <p>The below code shows information on all click events that happen on a web page. The <code>mouseInfo()</code> function associated to the event uses another function, called <code>getMouseButton()</code>, to retrieve the clicked mouse button.</p> <pre><code>// Return the name of the mouse button\nconst getMouseButton = code =&gt; {\n  let button = \"unknown\";\n  switch (code) {\n    case 0: // 0 is the code for the left mouse button\n      button = \"left\";\n      break;\n    case 1: // 1 is the code for the middle mouse button\n      button = \"middle\";\n      break;\n    case 2: // 2 is the code for the right button\n      button = \"right\";\n      break;\n  }\n  return button;\n};\n\n// Show info about mouse event\nconst mouseInfo = e =&gt; {\n  console.log(\n    `Mouse event: ${e.type}, button: ${getMouseButton(\n      e.button\n    )}, X: ${e.clientX}, Y: ${e.clientY}`\n  );\n};\n\n// Add mouse click event listener\ndocument.addEventListener(\"click\", mouseInfo);\n</code></pre> <p></p> <p>You can use <code>mousedown</code> and <code>mouseup</code> events similarly to <code>keydown</code> and <code>keyup</code> to deal with mouse buttons' press and release events. The code below associates the same handler to these two events.</p> <pre><code>// Handle mouse button press and release\ndocument.addEventListener(\"mousedown\", mouseInfo);\ndocument.addEventListener(\"mouseup\", mouseInfo);\n</code></pre> <p></p> <p>The appearance order for mouse-related events is: <code>mousedown</code> -&gt; <code>mouseup</code> -&gt; <code>click</code>.</p>"},{"location":"chapter16/#page-loading","title":"Page loading","text":"<p>Depending on how complex it is, a web page can take time to be entirely loaded by the browser. You can add an event listener on the <code>load</code> event produced by the <code>window</code> object (which represents the browser window) to know when this happens. This avoids messy situations where JavaScript interacts with pages that aren\u2019t fully loaded.</p> <p>The following code displays a message in the console once the page is fully loaded.</p> <pre><code>// Web page loading event\nwindow.addEventListener(\"load\", e =&gt; {\n  console.log(\"The page has been loaded!\");\n});\n</code></pre>"},{"location":"chapter16/#page-closing","title":"Page closing","text":"<p>You sometimes want to react to page closing. Closing happens when the user closes the tab displaying the page or navigates to another page in this tab. A frequent use case consists of showing a confirmation dialog to the user. Handling page closing is done by adding a handler for the <code>beforeunload</code> event on the <code>window</code> object.</p> <pre><code>// Handle page closing\nwindow.addEventListener(\"beforeunload\", e =&gt; {\n  const message = \"Should you stay or should you go?\";\n  // Standard way of showing a confirmation dialog\n  e.returnValue = message;\n  // Browser-specific way of showing a confirmation dialog\n  return message;\n});\n</code></pre> <p>Setting the value of the <code>returnValue</code> property on the <code>Event</code> object is the standard way of triggering a confirmation dialog showing this value. However, some browsers use the return value of the event listener instead. The previous code associate the two techniques to be universal.</p>"},{"location":"chapter16/#go-farther-with-events","title":"Go farther with events","text":""},{"location":"chapter16/#event-propagation","title":"Event propagation","text":"<p>The DOM represents a web page as a hierarchy of nodes. Events triggered on a child node are going to get triggered on the parent node, then the parent node of the parent node, up until the root of the DOM (the <code>document</code> variable). This is called event propagation.</p> <p>To see propagation in action, use this HTML code to create a small DOM hierarchy.</p> <pre><code>&lt;p id=\"para\"&gt;A paragraph with a &lt;button id=\"propa\"&gt;button&lt;/button&gt; inside&lt;/p&gt;\n</code></pre> <p>Here's the complementary JavaScript code. It adds <code>click</code> event handlers on the button, its parent (the paragraph), and the parent of that too (the root of the DOM).</p> <pre><code>// Click handler on the document\ndocument.addEventListener(\"click\", e =&gt; {\n  console.log(\"Document handler\");\n});\n// Click handler on the paragraph\ndocument.getElementById(\"para\").addEventListener(\"click\", e =&gt; {\n  console.log(\"Paragraph handler\");\n});\n// Click handler on the button\ndocument.getElementById(\"propa\").addEventListener(\"click\", e =&gt; {\n  console.log(\"Button handler\");\n});\n</code></pre> <p></p> <p>The result in the browser console demonstrates the propagation of <code>click</code> events from the button up to the document level. You clicked the button, which means you also clicked the paragraph, which means you also clicked the document.</p> <p>But maybe you only want an event to kick off once the button is clicked and not count its larger ecosystem? Event propagation can be interrupted at any moment by calling the <code>stopPropagation()</code> method on the <code>Event</code> object from an event handler. This is useful to avoid the same event being handled multiple times.</p> <p>Adding a line in the button's click handler prevents the <code>click</code> event from propagating everywhere in the DOM tree.</p> <pre><code>// Click handler on the button\ndocument.getElementById(\"propa\").addEventListener(\"click\", e =&gt; {\n  console.log(\"Button handler\");\n  e.stopPropagation(); // Stop the event propagation\n});\n</code></pre> <p></p>"},{"location":"chapter16/#cancelling-the-default-behavior-of-an-action","title":"Cancelling the default behavior of an action","text":"<p>Most of the user actions on a page are associated to a default behavior. Clicking on a link navigates to the link target, clicking anywhere with the right mouse button show a contextual menu, etc. Cancelling a default behavior is possible by calling the <code>preventDefault()</code> method on the <code>Event</code> object in an event handler.</p> <p>Let's use the following HTML code to see this possibility in action.</p> <pre><code>&lt;p&gt;Time on your hands? &lt;a id=\"forbidden\" href=\"https://9gag.com/\"&gt;Click here&lt;/a&gt;&lt;/p&gt;\n</code></pre> <pre><code>// Handling clicking on the forbidden link\ndocument.getElementById(\"forbidden\").addEventListener(\"click\", e =&gt; {\n  alert(\"Yes... But no.\");\n  e.preventDefault(); // Cancels the default behavior\n});\n</code></pre> <p>Now clicking on the links shows a dialog instead of navigating to its target.</p> <p></p>"},{"location":"chapter16/#tldr","title":"TL;DR","text":"<ul> <li> <p>You can make a web page interactive by writing JavaScript code tied to events within the browser.</p> </li> <li> <p>Numerous types of events can be handled. Each event type is associated with an <code>Event</code> object that contains properties giving information about the event.</p> </li> <li> <p><code>keypress</code>, <code>keydown</code> and <code>keyup</code> events let you react to keyboard-related events.</p> </li> <li> <p><code>click</code>, <code>mousedown</code> and <code>mouseup</code> events let you react to mouse-related events.</p> </li> <li> <p>Page loading and closing are associated with the events <code>load</code> and <code>beforeunload</code>, respectively.</p> </li> <li> <p>An event propagates within the DOM tree from its node of origin up to the document root. This propagation can be interrupted with the <code>stopPropagation()</code> method.</p> </li> <li> <p>Calling the <code>preventDefault()</code> method on an <code>Event</code> object cancels the default behavior associated with the action that triggered the event.</p> </li> </ul>"},{"location":"chapter16/#coding-time","title":"Coding time!","text":""},{"location":"chapter16/#counting-clicks","title":"Counting clicks","text":"<p>Start with the following HTML content.</p> <pre><code>&lt;button id=\"myButton\"&gt;Click me!&lt;/button&gt;\n&lt;p&gt;You clicked on the button &lt;span id=\"clickCount\"&gt;0&lt;/span&gt; times&lt;/p&gt;\n&lt;button id=\"deactivate\"&gt;D\u00e9sactivate counting&lt;/button&gt;\n</code></pre> <p>Write the JavaScript code that counts the number of clicks on the <code>myButton</code> button by updating the <code>clickCount</code> element. The <code>deactivate</code> button stops the counting.</p> <p></p>"},{"location":"chapter16/#changing-colors","title":"Changing colors","text":"<p>Here is some HTML content to start with.</p> <pre><code>&lt;p&gt;Press the R (red), Y (yellow), G (green) or B (blue) key to change paragraph colors accordingly.&lt;/p&gt;\n\n&lt;h1&gt;Paragraph 1&lt;/h1&gt;\n&lt;div&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec dignissim fringilla dapibus. Curabitur placerat efficitur molestie. Quisque quis consequat nibh. Aenean feugiat, eros eget aliquam vulputate, leo augue luctus lectus, non lobortis libero quam non sem. Aliquam sit amet tincidunt ex, mollis interdum massa.&lt;/div&gt;\n\n&lt;h1&gt;Paragraph 2&lt;/h1&gt;\n&lt;div&gt;Vivamus at justo blandit, ornare leo id, vehicula urna. Fusce sed felis eget magna viverra feugiat eget nec orci. Duis non massa nibh. Aenean vehicula velit a magna lobortis tempor ut quis felis. Proin vitae dui a eros facilisis fringilla ut ut ante.&lt;/div&gt;\n\n&lt;h1&gt;Paragraph 3&lt;/h1&gt;\n&lt;div&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis sit amet pharetra massa. Nulla blandit erat nulla, et scelerisque libero varius ut. Praesent bibendum eu magna ullamcorper venenatis. Sed ut pellentesque leo. Sed ultrices sapien consequat odio posuere gravida.&lt;/div&gt;\n</code></pre> <p>Write the associated JavaScript code that updates the background color of all <code>div</code> tags according to the key (R, Y, G or B) pressed by the user.</p> <p></p>"},{"location":"chapter16/#a-dessert-list","title":"A dessert list","text":"<p>The following HTML code defines a list of desserts, empty for now.</p> <pre><code>&lt;h1&gt;My favourite desserts&lt;/h1&gt;\n\n&lt;ul id=\"desserts\"&gt;\n&lt;/ul&gt;\n\n&lt;button id=\"addButton\"&gt;Add a dessert&lt;/button&gt;\n</code></pre> <p>Write the JavaScript code that adds a new dessert to the list when the user clicks on the button. The dessert name is chosen by the user.</p> <p>Bonus points for adding the possibility of changing a dessert's name when clicking on it.</p> <p></p>"},{"location":"chapter16/#interactive-quiz","title":"Interactive quiz","text":"<p>Here is the starter HTML code.</p> <pre><code>&lt;div id=\"content\"&gt;&lt;/div&gt;\n</code></pre> <p>And the associated JavaScript code that defines a question list.</p> <pre><code>// List of questions (statement + answer)\nconst questions = [\n  {\n    statement: \"2+2?\",\n    answer: \"2+2 = 4\"\n  },\n  {\n    statement: \"In which year did Christopher Columbus discover America?\",\n    answer: \"1492\"\n  },\n  {\n    statement:\n      \"What occurs twice in a lifetime, but once in every year, twice in a week but never in a day?\",\n    answer: \"The E letter\"\n  }\n];\n</code></pre> <p>Complete this code to display the questions in the <code>&lt;div&gt;</code> element of the page, with a <code>\"Show the answer\"</code> button next to each question. Clicking this button replaces it with the answer for this question.</p> <p></p>"},{"location":"chapter17/","title":"Manipulate forms","text":"<p>JavaScript lets you manage forms defined within your web page, in order to further improve interactivity.</p>"},{"location":"chapter17/#javascript-and-forms","title":"JavaScript and forms","text":""},{"location":"chapter17/#form-recap","title":"Form recap","text":"<p>Forms enhance web pages by allowing users to input information through text fields, check boxes, dropdown menus, and more. Inside a web page, a form is defined with a <code>&lt;form&gt;</code> HTML tag, and within this tag, you have your different <code>&lt;input&gt;</code> tags, <code>&lt;select&gt;</code> tags, or <code>&lt;textarea&gt;</code> tags.</p> <p>Tip</p> <p>If forms are totally new to you, the Mozilla Developer Network has a great intro aptly named Your first HTML form. For a more general recap on forms, check out the MDN overview.</p>"},{"location":"chapter17/#handling-forms-with-javascript","title":"Handling forms with JavaScript","text":"<p>Data entered into a form by users is normally sent via a network to a web server that processes and sends a response to the browser as a new web page. To do this, web servers use backend programming languages like PHP or Ruby.</p> <p>Thanks to JavaScript, you can manage forms (and their data) directly within the browser before sending them to an external server. You can notify users of incorrect input data, make suggestions on what they type, and more. Who said forms were boring?</p>"},{"location":"chapter17/#form-fields","title":"Form fields","text":""},{"location":"chapter17/#example-form","title":"Example form","text":"<p>Let's start with a simple form that allows users to sign up for a service.</p> <pre><code>&lt;form&gt;\n  &lt;h1&gt;Signup form&lt;/h1&gt;\n  &lt;p&gt;\n    &lt;label for=\"username\"&gt;Username&lt;/label&gt;:\n    &lt;input type=\"text\" name=\"username\" id=\"username\" required&gt;\n    &lt;span id=\"usernameHelp\"&gt;&lt;/span&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;label for=\"password\"&gt;Password&lt;/label&gt;:\n    &lt;input type=\"password\" name=\"password\" id=\"password\" required&gt;\n    &lt;span id=\"passwordHelp\"&gt;&lt;/span&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;label for=\"emailAddress\"&gt;Email address&lt;/label&gt;:\n    &lt;input type=\"email\" name=\"emailAddress\" id=\"emailAddress\" required placeholder=\"user@domain\"&gt;\n    &lt;span id=\"emailHelp\"&gt;&lt;/span&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;input type=\"checkbox\" name=\"confirmation\" id=\"confirmation\"&gt;\n    &lt;label for=\"confirmation\"&gt;Send me a confirmation email&lt;/label&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;input type=\"radio\" name=\"subscription\" id=\"newsroom\" value=\"newspromo\"&gt;\n    &lt;label for=\"newsroom\"&gt;Subscribe me to newsletters and promotions&lt;/label&gt;\n    &lt;br&gt;\n    &lt;input type=\"radio\" name=\"subscription\" id=\"news\" value=\"news\"&gt;\n    &lt;label for=\"news\"&gt;Subscribe me only to the newsletter&lt;/label&gt;\n    &lt;br&gt;\n    &lt;input type=\"radio\" name=\"subscription\" id=\"no\" value=\"no\" checked&gt;\n    &lt;label for=\"no\"&gt;No subscriptions&lt;/label&gt;\n    &lt;br&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;label for=\"nationality\"&gt;Nationality&lt;/label&gt;:\n    &lt;select name=\"nationality\" id=\"nationality\"&gt;\n      &lt;option value=\"US\" selected&gt;American&lt;/option&gt;\n      &lt;option value=\"FR\"&gt;French&lt;/option&gt;\n      &lt;option value=\"ES\"&gt;Spanish&lt;/option&gt;\n      &lt;option value=\"XX\"&gt;Other&lt;/option&gt;\n    &lt;/select&gt;\n  &lt;/p&gt;\n\n  &lt;input type=\"submit\" value=\"Submit\"&gt;\n  &lt;input type=\"reset\" value=\"Cancel\"&gt;\n&lt;/form&gt;\n</code></pre> <p></p> <p>This example contains multiple input zones: text, checkboxes, radio buttons, a dropdown menu, as well as submit and cancel buttons. We'll learn how to deal with each of these elements with JavaScript.</p> <p>Note</p> <p>You might have noticed that the <code>&lt;form&gt;</code> tag doesn\u2019t have the usual <code>action</code> and <code>method</code> attributes. These attributes allow you to define the requested server resource when the form is submitted by the user. Since our form will only be handled by JavaScript in the browser, they're not necessary here.</p>"},{"location":"chapter17/#text-zones","title":"Text zones","text":""},{"location":"chapter17/#access-input-values","title":"Access input values","text":"<p>A text field allows a user to input text on single or multiple lines. You have two options for defining text fields: a single-line text field is defined in HTML as <code>&lt;input type=\"text\"&gt;</code>, and a multi-line text input field will be defined via <code>&lt;textarea&gt;</code> instead.</p> <p>Here's the extract from the above code that lets users input a username.</p> <pre><code>&lt;label for=\"username\"&gt;Username&lt;/label&gt;:\n&lt;input type=\"text\" name=\"username\" id=\"username\" required&gt;\n&lt;span id=\"usernameHelp\"&gt;&lt;/span&gt;\n</code></pre> <p>In JavaScript, you can access the value of a text field by using the <code>value</code> property of the corresponding DOM element. By setting a new value for this property, you'll modify the value shown in the text field.</p> <p>The following example adds the value \"MyCoolUsername\" to the text field.</p> <pre><code>// Define the value of the \"username\" input field\nconst usernameElement = document.getElementById(\"username\");\nusernameElement.value = \"MyCoolUsername\";\n</code></pre>"},{"location":"chapter17/#handling-focus","title":"Handling focus","text":"<p>When a text zone is selected, it becomes the focused area of the form. You may have noticed field borders turning blue or other effects when you're accessing a particular input area. This helps you know where you are in the form. A user clicking on a text field (or tabbing down into it) kicks off a <code>focus</code> event. Additionally, a <code>focus</code> event triggers a <code>blur</code> event on the field that previously had the focus.</p> <p>You can use these events to show the user tips related to the current text field, as in the following example:</p> <pre><code>// Show a tip associated with a selected text area\nusernameElement.addEventListener(\"focus\", e =&gt; {\n  document.getElementById(\"usernameHelp\").textContent = \"Enter a unique username!\";\n});\n// Hide the advice when the user moves onto a different field\nusernameElement.addEventListener(\"blur\", e =&gt; {\n  document.getElementById(\"usernameHelp\").textContent = \"\";\n});\n</code></pre> <p>By selecting the <code>username</code> input field, you'll see a helpful message in the HTML <code>&lt;span&gt;</code> defined specifically for that purpose and initially empty.</p> <p></p> <p>From JavaScript code, you can modify the input target by calling the <code>focus()</code> (to give focus) and <code>blur()</code> methods (to remove it) on a DOM element.</p> <pre><code>// Give focus to the \"username\" input field\nusernameElement.focus();\n</code></pre> <p>Multi-line text fields (<code>&lt;textarea&gt;</code> tags) work similarly to <code>&lt;input&gt;</code> tags.</p> <p>Note</p> <p>You'll learn how to validate text that a user inputs (to make sure it fits certain criteria) later in this chapter.</p>"},{"location":"chapter17/#choice-elements","title":"Choice elements","text":"<p>You often see form elements that allow users to make a choice among multiple possibilities. A <code>change</code> event will be kicked off once a user changes their choice.</p>"},{"location":"chapter17/#checkboxes","title":"Checkboxes","text":"<p>You can add checkboxes to your HTML form by using the tag <code>&lt;input type=\"checkbox\"&gt;</code>.</p> <p>Here's the code from the example form that offers a user the choice to receive a confirmation email (or not).</p> <pre><code>&lt;input type=\"checkbox\" name=\"confirmation\" id=\"confirmation\"&gt;\n&lt;label for=\"confirmation\"&gt;Send me a confirmation email&lt;/label&gt;\n</code></pre> <p>Whenever the box is checked or unchecked by the user, a <code>change</code> event is kicked off. The <code>Event</code> object associated to this event has a <code>checked</code> boolean property that gives the new state of the field (checked or not checked).</p> <p>The below code handles the <code>change</code> event on the checkbox to show a message in the console.</p> <pre><code>// Show if the email confirmation checkbox is checked\ndocument.getElementById(\"confirmation\").addEventListener(\"change\", e =&gt; {\n  console.log(`Email confirmation request: ${e.target.checked}`);\n});\n</code></pre> <p></p>"},{"location":"chapter17/#radio-buttons","title":"Radio buttons","text":"<p>Radio buttons allow users to make a choice out of multiple possibilities. You create radio buttons with <code>&lt;input type=\"radio\"&gt;</code> tags, which have the same <code>name</code> attribute and different <code>value</code> attributes.</p> <p>Here's the extract from the example form that lets a user select between three radio buttons, each representing a subscription option.</p> <pre><code>&lt;input type=\"radio\" name=\"subscription\" id=\"newsroom\" value=\"newspromo\"&gt;\n&lt;label for=\"newsroom\"&gt;Subscribe me to newsletters and promotions&lt;/label&gt;\n&lt;br&gt;\n&lt;input type=\"radio\" name=\"subscription\" id=\"news\" value=\"news\"&gt;\n&lt;label for=\"news\"&gt;Subscribe me only to the newsletter&lt;/label&gt;\n&lt;br&gt;\n&lt;input type=\"radio\" name=\"subscription\" id=\"no\" value=\"no\" checked&gt;\n&lt;label for=\"no\"&gt;No subscriptions&lt;/label&gt;\n&lt;br&gt;\n</code></pre> <p>The following JavaScript code adds a message to the console when the radio button selection changes.</p> <pre><code>// Show the subscription type selected via radio button\nconst subscriptionElements = Array.from(document.getElementsByName(\"subscription\"));\nsubscriptionElements.forEach(element =&gt; {\n  element.addEventListener(\"change\", e =&gt; {\n    console.log(`Selected subscription: ${e.target.value}`);\n  });\n});\n</code></pre> <p></p> <p>The <code>target.value</code> property of the <code>change</code> event matches the <code>value</code> attribute of the newly selected <code>&lt;input&gt;</code> tag.</p>"},{"location":"chapter17/#dropdown-lists","title":"Dropdown lists","text":"<p>A dropdown list is created using the <code>&lt;select&gt;</code> tag (for the menu overall) in which you can add <code>&lt;option&gt;</code> tags for possible choices.</p> <p>Here's the code extract from above that lets users choose a nationality:</p> <pre><code>&lt;label for=\"nationality\"&gt;Nationality&lt;/label&gt;:\n&lt;select name=\"nationality\" id=\"nationality\"&gt;\n  &lt;option value=\"US\" selected&gt;American&lt;/option&gt;\n  &lt;option value=\"FR\"&gt;French&lt;/option&gt;\n  &lt;option value=\"ES\"&gt;Spanish&lt;/option&gt;\n  &lt;option value=\"XX\"&gt;Other&lt;/option&gt;\n&lt;/select&gt;\n</code></pre> <p>The following code uses the <code>change</code> event triggered on the dropdown list to show the new choice made by the user.</p> <pre><code>// Show the selected nationality\ndocument.getElementById(\"nationality\").addEventListener(\"change\", e =&gt; {\n  console.log(\"Nationality code: \" + e.target.value);\n});\n</code></pre> <p></p> <p>Like with radio buttons, the <code>target.value</code> property of the <code>change</code> event matches the <code>value</code> attribute of the <code>&lt;option&gt;</code> tag associated with the new choice -- not the text shown in the dropdown list!</p>"},{"location":"chapter17/#forms-as-dom-elements","title":"Forms as DOM elements","text":""},{"location":"chapter17/#accessing-form-fields","title":"Accessing form fields","text":"<p>A <code>&lt;form&gt;</code> tag corresponds to a DOM element. This element has an <code>elements</code> property that pulls together all the form input fields. You can use this property to access a field via its <code>name</code> attribute or by its index (order of appearance in the form).</p> <p>The below example shows some information on the input fields of our example form.</p> <pre><code>// Show some info about the first form element\nconst formElement = document.querySelector(\"form\");\nconsole.log(`Number of fields: ${formElement.elements.length}`); // 10\nconsole.log(formElement.elements[0].name);       // \"username\"\nconsole.log(formElement.elements.password.type); // \"password\"\n</code></pre>"},{"location":"chapter17/#submitting-a-form","title":"Submitting a form","text":"<p>A form will be submitted when a user clicks on the submit button, which will have an <code>&lt;input type=\"submit\"&gt;</code> tag. An <code>&lt;input type=\"reset\"&gt;</code> tag shows a button that resets the form data.</p> <p>Here are the two buttons from the sample form.</p> <pre><code>&lt;input type=\"submit\" value=\"Submit\"&gt;\n&lt;input type=\"reset\" value=\"Cancel\"&gt;\n</code></pre> <p>When a user submits a form, the default behavior of the browser is to contact a web server and request the resource identified by the <code>action</code> attribute of the <code>&lt;form&gt;</code> tag, sending form data along the way. Prior to this, a <code>submit</code> event is triggered on the DOM element corresponding to the form. By adding a handler for this type of event, you can access form data before it gets sent. You can cancel the request to the server by calling the <code>preventDefault()</code> method on the <code>Event</code> object associated to the event.</p> <p>The following code shows in the console all user input in the form, then cancels the request to the server.</p> <pre><code>// Shows all user input and cancels form data sending\nformElement.addEventListener(\"submit\", e =&gt; {\n  const username = e.target.elements.username.value;\n  const password = e.target.elements.password.value;\n  const email = e.target.elements.emailAddress.value;\n  console.log(`Username: ${username}, password: ${password}, email: ${email}`);\n\n  if (e.target.elements.confirmation.checked) {\n    console.log(\"You asked for email confirmation\");\n  } else {\n    console.log(\"You didn\u2019t asked for email confirmation\");\n  }\n  switch (e.target.elements.subscription.value) {\n    case \"newspromo\":\n      console.log(\"You are subscribed to newsletters and promotions\");\n      break;\n    case \"news\":\n      console.log(\"You are subscribed to newsletters only\");\n      break;\n    case \"no\":\n      console.log(\"You are not subscribed to anything\");\n      break;\n    default:\n      console.error(\"Unknown subscription code\");\n  }\n  switch (e.target.elements.nationality.value) {\n    case \"US\":\n      console.log(\"Hello! You are a US citizen\");\n      break;\n    case \"FR\":\n      console.log(\"Bonjour! You are a French citizen\");\n      break;\n    case \"ES\":\n      console.log(\"Hola! You are a Spanish citizen\");\n      break;\n    default:\n      console.log(\"Your nationality is unknown\");\n  }\n  e.preventDefault(); // Cancel form data sending\n});\n</code></pre> <p></p>"},{"location":"chapter17/#form-validation","title":"Form validation","text":"<p>Checking data inputted by users before it gets sent to a server is a major use of JavaScript with web forms. Using form validation, you can improve the user's experience by immediately alerting him on problems with their input. This is also an efficient way to prevent useless server requests with wrong data.</p> <p>Validation can happen in several ways:</p> <ul> <li>as input is being entered;</li> <li>after input is entered;</li> <li>when the user submits the form.</li> </ul> <p>This last technique only involves adding validation in the <code>submit</code> event handler for the form: you already know how to do that.  We'll look at the other two techniques one at a time, using the same example form as before.</p>"},{"location":"chapter17/#instant-validation","title":"Instant validation","text":"<p>Validation while a user is inputting information is based on <code>input</code> events, which are triggered on an input zone each time its value changes.</p> <p>The following code example adds an input event handler on the password field. This handler checks the length (number of characters) of the password being typed and shows a message to the user with specific content and color.</p> <pre><code>// Validate password length\ndocument.getElementById(\"password\").addEventListener(\"input\", e =&gt; {\n  const password = e.target.value; // Value of the password field\n  let passwordLength = \"too short\";\n  let messageColor = \"red\"; // Short password =&gt; red\n  if (password.length &gt;= 8) {\n    passwordLength = \"adequate\";\n    messageColor = \"green\"; // Long password =&gt; green\n  } else if (password.length &gt;= 4) {\n    passwordLength = \"moderate\";\n    messageColor = \"orange\"; // Moderate password =&gt; orange\n  }\n  const passwordHelpElement = document.getElementById(\"passwordHelp\");\n  passwordHelpElement.textContent = `Length: ${passwordLength}`; // helper text\n  passwordHelpElement.style.color = messageColor; // helper text color\n});\n</code></pre> <p></p>"},{"location":"chapter17/#post-input-validation","title":"Post-input validation","text":"<p>A text zone's input is considered finished once focus is lost on the zone, which kicks off a <code>blur</code> event that you can use to trigger validation.</p> <p>Let's imagine that you want to validate the presence of an <code>@</code> character in the email address entered by a user. Here's the JavaScript code which shows this validation.</p> <pre><code>// Checking an email address once it's entered\ndocument.getElementById(\"emailAddress\").addEventListener(\"blur\", e =&gt; {\n  let emailAddressValidity = \"\";\n  if (e.target.value.indexOf(\"@\") === -1) {\n    // the email address doesn\u2019t contain @\n    emailAddressValidity = \"Invalid address\";\n  }\n  document.getElementById(\"emailHelp\").textContent = emailAddressValidity;\n});\n</code></pre> <p></p>"},{"location":"chapter17/#regular-expressions","title":"Regular expressions","text":"<p>The previous validations were quite primitive: many strings containing a <code>@</code> character are not valid email addresses. To perform more advanced checks, you can use a powerful tool: regular expressions.</p> <p>A regular expression defines a pattern to which strings are compared, searching for matches. Many programming languages support them. A powerful addition to a programmer's toolbelt, they can nonetheless take quite a bit of time to be comfortable with. What follows is just an introduction to the vast domain of regular expression.</p> <p>Let's get started by trying to create a regular expression checking for the presence of an <code>@</code> character inside a string. Here's the associated JavaScript code.</p> <pre><code>const regex = /@/; // String must contain @\nconsole.log(regex.test(\"\"));  // false\nconsole.log(regex.test(\"@\")); // true\nconsole.log(regex.test(\"sophie&amp;mail.fr\")); // false\nconsole.log(regex.test(\"sophie@mail.fr\")); // true\n</code></pre> <p>A JavaScript regular expression is defined by placing its pattern between a pair of <code>/</code> characters. It's an object whose <code>test()</code> method checks matches between the pattern and the string passed as a parameter. If a match is detected, this method returns <code>true</code>, and <code>false</code> otherwise.</p> <p>The following table presents some of the numerous possibilities offered by regular expressions.</p> Pattern Matches if Match No match <code>abc</code> String contains <code>\"abc\"</code> <code>\"abc\"</code>, <code>\"abcdef\"</code>, <code>\"123abc456\"</code> <code>\"abdc\"</code>, <code>\"1bca\"</code>, <code>\"adbc\"</code>, <code>\"ABC\"</code> <code>[abc]</code> String contains either <code>\"a\"</code>, <code>\"b\"</code> or <code>\"c\"</code> <code>\"abc\"</code>, <code>\"daef\"</code>, <code>\"bbb\"</code>, <code>\"12c34\"</code> <code>\"def\"</code>, <code>\"xyz\"</code>, <code>\"123456\"</code>, <code>\"BBB\"</code> <code>[a-z]</code> String contains a lowercase letter <code>\"abc\"</code>, <code>\"12f43\"</code>, <code>\"_r_\"</code> <code>\"123\"</code>, <code>\"ABC\"</code>, <code>\"_-_\"</code> <code>[0-9]</code> or <code>\\d</code> String contains a digit <code>\"123\"</code>, <code>\"ab4c\"</code>, <code>\"a56\"</code> <code>\"abc\"</code> <code>a.c</code> String contains <code>\"a\"</code>, followed by any character, followed by <code>\"c\"</code> <code>\"abc\"</code>, <code>\"acc\"</code>, <code>\"12a.c34\"</code> <code>\"ac\"</code>, <code>\"abbc\"</code>, <code>\"ABC\"</code> <code>a\\.c</code> String contains <code>\"a.c\"</code> <code>\"a.c\"</code>, <code>\"a.cdef\"</code>, <code>\"12a.c34\"</code> <code>\"ac\"</code>, <code>\"abc\"</code> <code>a.+c</code> String contains <code>\"a\"</code>, followed by at least one character, followed by <code>\"c\"</code> <code>\"abc\"</code>, <code>\"abbc\"</code>, <code>\"12a$\u00f9c34\"</code> <code>\"ac\"</code>, <code>\"bbc\"</code> <code>a.*c</code> String contains <code>\"a\"</code>, followed by zero or more characters, followed by <code>\"c\"</code> <code>\"abc\"</code>, <code>\"abbc\"</code>, <code>\"ac\"</code> <code>\"ABC\"</code>, <code>\"bbc\"</code> <p>Observing these examples leads us to the following rules:</p> <ul> <li> <p>Brackets <code>[]</code> define a character interval. Any string with at least a character in this interval will match the pattern.</p> </li> <li> <p>The <code>[a-z]</code> and <code>[A-Z]</code> patterns are used to search for the presence of any letter, respectively lowercase and uppercase.</p> </li> <li> <p>The <code>[0-9]</code> and <code>\\d</code> patterns are essentially identical and match a digit in a string.</p> </li> <li> <p>The <code>.</code> character replaces any one character.</p> </li> <li> <p>The <code>\\</code> (backslash) character indicates that the following character should be searched as-if. . For example, <code>\\.</code> is used to match the <code>.</code> character itself.</p> </li> <li> <p>The <code>+</code> character matches one or several instances of the preceding expression.</p> </li> <li> <p>The <code>*</code> character matches zero, one, or several instances of the preceding expression.</p> </li> </ul> <p>Tip</p> <p>The site https://regex101.com is useful to understand, test and debug regular expressions.</p> <p>Let's get back to our example and check the email address field. Here's a possible regular expression (among many others) to test it against: <code>/.+@.+\\..+/</code>.</p> <p>Question</p> <p>Before reading further, can you decode this pattern to understand what conditions a string must respect to match it?</p> <p>OK, here is the answer. This pattern matches a string that:</p> <ul> <li>Starts with one or several characters (<code>.+</code>).</li> <li>Next, contains the <code>@</code> character (<code>@</code>).</li> <li>Next, contains one or several characters (<code>.+</code>).</li> <li>Next, contains the <code>.</code> character (<code>\\.</code>).</li> <li>Finishes with one or several characters (<code>.+</code>).</li> </ul> <p>In other words, any string of the form <code>xxx@yyy.zzz</code> will match this pattern. This is not the end-all, be-all way to validate an email address, but it's a start.</p> <p>Check out how to put this solution into practice.</p> <pre><code>// Check email validity when field loses focus\ndocument.getElementById(\"emailAddress\").addEventListener(\"blur\", e =&gt; {\n  // Match a string of the form xxx@yyy.zzz\n  const emailRegex = /.+@.+\\..+/;\n  let validityMessage = \"\";\n  if (!emailRegex.test(e.target.value)) {\n    validityMessage = \"Invalid address\";\n  }\n  document.getElementById(\"emailHelp\").textContent = validityMessage;\n});\n</code></pre> <p></p>"},{"location":"chapter17/#tldr","title":"TL;DR","text":"<ul> <li> <p>A form lets users input data through a web page. Inputted data is usually sent to a web server. Before data gets sent off, you can use JavaScript to interact with the form data and validate it.</p> </li> <li> <p>Text zones (<code>input type=\"text\"&gt;</code> or <code>&lt;textarea&gt;</code>) each have a <code>value</code> property to access the inputted value.</p> </li> <li> <p>When a text field becomes the input target, this field has the focus. The <code>focus</code> and <code>blur</code> events are triggered when the field gets or loses the focus, respectively. The <code>focus()</code> and <code>blur()</code> methods can update the focus target programmatically.</p> </li> <li> <p>Checkboxes, radio buttons, and dropdown lists generate <code>change</code> events whenever a user modifies their choice.</p> </li> <li> <p>The DOM element that corresponds to the form has an <code>elements</code> property that lets you access its input fields programmatically.</p> </li> <li> <p>Submitting a form triggers a <code>submit</code> event on the form DOM element. You can prevent the sending of form data to the server by using the <code>preventDefault()</code> method on the associated <code>Event</code> object.</p> </li> <li> <p>Any modification of a text field triggers an <code>input</code> event, which can be used to validate its data as the user enters it.</p> </li> <li> <p>A regular expression is a pattern to which strings can be compared. Regular expressions are often used to perform fine-grained validations of form data.</p> </li> </ul>"},{"location":"chapter17/#coding-time","title":"Coding time!","text":""},{"location":"chapter17/#password-checker","title":"Password checker","text":"<p>Start with the following HTML code.</p> <pre><code>&lt;form&gt;\n  &lt;p&gt;\n    &lt;label for=\"password1\"&gt;Enter the password&lt;/label&gt;:\n    &lt;input type=\"password\" name=\"password1\" id=\"password1\" required&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;label for=\"password2\"&gt;Confirm the password&lt;/label&gt;:\n    &lt;input type=\"password\" name=\"password2\" id=\"password2\" required&gt;\n  &lt;/p&gt;\n\n  &lt;input type=\"submit\" value=\"Send\"&gt;\n&lt;/form&gt;\n\n&lt;p id=\"passwordHelp\"&gt;&lt;/p&gt;\n</code></pre> <p>Write the JavaScript code that validates the password when the user submits the form. The validation rules are as follow:</p> <ul> <li>The two inputted passwords must be identical.</li> <li>The minimal password length is 6 characters.</li> <li>The password must contain at least one digit.</li> </ul> <p>The validation result must be shown on the page with an appropriate message in each case.</p> <p></p>"},{"location":"chapter17/#character-list","title":"Character list","text":"<p>The TV show Game of Thrones is about the struggle for power between several noble families. In this exercise, you'll have to show characters belonging to the house selected by the user.</p> <p>Here is the associated HTML code.</p> <pre><code>&lt;h1&gt;A few of the Game of Thrones characters&lt;/h1&gt;\n&lt;form&gt;\n  &lt;label for=\"house\"&gt;House&lt;/label&gt;:\n  &lt;select name=\"house\" id=\"house\"&gt;\n      &lt;option value=\"\" selected&gt;Select a house&lt;/option&gt;\n  &lt;/select&gt;\n&lt;/form&gt;\n\n&lt;p&gt;\n  &lt;ul id=\"characters\"&gt;&lt;/ul&gt;\n&lt;/p&gt;\n</code></pre> <p>The starter JavaScript code is as follows.</p> <pre><code>// Character list. Each house has a name and a code\nconst houses = [\n  {\n    code: \"ST\",\n    name: \"Stark\"\n  },\n  {\n    code: \"LA\",\n    name: \"Lannister\"\n  },\n  {\n    code: \"BA\",\n    name: \"Baratheon\"\n  },\n  {\n    code: \"TA\",\n    name: \"Targaryen\"\n  }\n];\n\n// Return an array of characters belonging to a house\nconst getCharacters = houseCode =&gt; {\n  switch (houseCode) {\n    case \"ST\":\n      return [\"Eddard\", \"Catelyn\", \"Robb\", \"Sansa\", \"Arya\", \"Jon Snow\"];\n    case \"LA\":\n      return [\"Tywin\", \"Cersei\", \"Jaime\", \"Tyrion\"];\n    case \"BA\":\n      return [\"Robert\", \"Stannis\", \"Renly\"];\n    case \"TA\":\n      return [\"Aerys\", \"Daenerys\", \"Viserys\"];\n    default:\n      return []; // Empty array\n  }\n};\n</code></pre> <p>Complete this code so that:</p> <ul> <li>The house dropdown list is filled during page load.</li> <li>The list of characters is shown whenever the user selects a new house in the list.</li> </ul> <p></p>"},{"location":"chapter17/#autocomplete","title":"Autocomplete","text":"<p>In this exercise, you'll have to assist the user in selecting a country. As he enters the country name in an input box, the page shows a list of corresponding countries. Clicking on a suggested country replaces the value in the input box.</p> <p>Note</p> <p>To keep things simple, only countries starting with a <code>\"A\"</code> letter are taken into account.</p> <p>Here is the HTML code that creates the input box.</p> <pre><code>&lt;label for=\"country\"&gt;Enter a country name&lt;/label&gt;:\n&lt;input type=\"text\" id=\"country\"&gt;\n&lt;div id=\"suggestions\"&gt;&lt;/div&gt;\n</code></pre> <p>The following CSS code improves the page presentation.</p> <pre><code>/* Add spacing between each country suggestion */\n.suggestion {\n    padding-left: 2px;\n    padding-right: 2px;\n}\n\n/* Change suggestion color when hovering it with the mouse */\n.suggestion:hover {\n    background-color: #adf;\n    cursor: pointer;\n}\n\n/* Position the suggestion list just below the input box */\n#suggestions {\n    position: absolute;\n    border: 1px solid black;\n    left: 155px;\n}\n</code></pre> <p>At last, the starter JavaScript code defines the list of countries.</p> <pre><code>// Country list\nconst countryList = [\n  \"Afghanistan\",\n  \"Albania\",\n  \"Algeria\",\n  \"Andorra\",\n  \"Angola\",\n  \"Anguilla\",\n  \"Antarctica\",\n  \"Antigua-and-Barbuda\",\n  \"Argentina\",\n  \"Armenia\",\n  \"Aruba\",\n  \"Australia\",\n  \"Autria\",\n  \"Azerba\u00efjan\"\n];\n</code></pre> <p>Complete this code to implement country autocompletion.</p> <p></p>"},{"location":"chapter18/","title":"Animate elements","text":"<p>This chapter will get you started with JavaScript for animations! We'll see how to kick off animations that run repeatedly or stop at a certain point.</p>"},{"location":"chapter18/#repeat-an-action-at-regular-intervals","title":"Repeat an action at regular intervals","text":"<p>Let's get started with animations by learning how to repeatedly modify an element's content. Here is the associated HTML code.</p> <pre><code>&lt;h1 id=\"title\"&gt;This page will self-destruct in &lt;span id=\"counter\"&gt;10&lt;/span&gt; second(s)...&lt;/h1&gt;\n</code></pre> <p>And now for the corresponding JavaScript code.</p> <pre><code>// Count down the counter\nconst decreaseCounter = () =&gt; {\n  // Convert counter text to a number\n  const counter = Number(counterElement.textContent);\n  // Decrease counter by one\n  counterElement.textContent = counter - 1;\n};\n\nconst counterElement = document.getElementById(\"counter\");\n\n// Call the decreaseCounter function every second (1000 milliseconds)\nsetInterval(decreaseCounter, 1000);\n</code></pre> <p>Click here to see it in action. It works as expected... Kind of: the countdown never stops. We'll fix this a little later.</p>"},{"location":"chapter18/#kick-off-a-repeated-action","title":"Kick off a repeated action","text":"<p>How did the previous example work? The JavaScript code defines a function called <code>decreaseCounter()</code> that accesses and then decreases one by one the value of the HTML element named <code>counter</code>.</p> <p>Note</p> <p>Calling <code>Number()</code> in the function code is mandatory: it converts the counter string into a number, which endows it with subtraction functionality.</p> <p>The call to <code>setInterval()</code> triggers a repeated action. This function lets you call a function at regular intervals. Its parameters are the function to call and the time in milliseconds between each call. The returned value is an ID for the repeated action, which can be used to further modify it.</p> <pre><code>// Set up a repeated action\nconst intervalId = setInterval(callbackFunction, timeBetweenEachCall);\n</code></pre>"},{"location":"chapter18/#stop-a-repeated-action","title":"Stop a repeated action","text":"<p>Let's try to stop the counter once the countdown is complete. We'll also modify the text of the page. Here's the JavaScript code for our example, updated to produce our desired result:</p> <pre><code>// Count down the counter until 0\nconst decreaseCounter = () =&gt; {\n  // Convert counter text to a number\n  const counter = Number(counterElement.textContent);\n  if (counter &gt; 1) {\n    // Decrease counter by one\n    counterElement.textContent = counter - 1;\n  }\n  else {\n    // Cancel the repeated execution\n    clearInterval(intervalId);\n    // Modify the page title\n    const title = document.getElementById(\"title\");\n    title.textContent = \"BOOM!!\";\n  }\n};\n\nconst counterElement = document.getElementById(\"counter\");\n\n// Call the decreaseCounter function every second (1000 milliseconds)\nconst intervalId = setInterval(decreaseCounter, 1000);\n</code></pre> <p>Click here to see it in action.</p> <p>In the <code>decreaseCounter()</code> function, we only decrease the counter if the current value is higher than 1. If not, we call the function <code>clearInterval()</code> and then modify the title of the page.</p> <p>The <code>clearInterval()</code> function lets you cut off repeated code execution. It takes as a parameter the ID of the action set by the call to <code>setInterval()</code>.</p> <pre><code>// Cancel a repeated action set up with setInterval()\nclearInterval(intervalId);\n</code></pre>"},{"location":"chapter18/#trigger-an-action-after-a-delay","title":"Trigger an action after a delay","text":"<p>Imagine that you want to modify the page text after its \"explosion\" in the previous example. You'd modify our example as follows:</p> <pre><code>// Count down the counter until 0\nconst decreaseCounter = () =&gt; {\n  // Convert counter text to a number\n  const counter = Number(counterElement.textContent);\n  if (counter &gt; 1) {\n    // Decrease counter by one\n    counterElement.textContent = counter - 1;\n  }\n  else {\n    // Cancel the repeated execution\n    clearInterval(intervalId);\n    // Modify the page title\n    const titleElement = document.getElementById(\"title\");\n    titleElement.textContent = \"BOOM!!\";\n    // Modify the title after 2 seconds\n    setTimeout(() =&gt; {\n      titleElement.textContent = \"Everything's broken now :(\";\n    }, 2000);\n  }\n};\n\nconst counterElement = document.getElementById(\"counter\");\n\n// Call the decreaseCounter function every second (1000 milliseconds)\nconst intervalId = setInterval(decreaseCounter, 1000);\n</code></pre> <p>Click here to see it in action.</p> <p>Once the countdown has finished, we call the <code>setTimeout()</code> function to set a new page title after a 2 second (2000 millisecond) delay.</p> <p>The <code>setTimeout()</code> function lets you execute a function once after a particular delay, expressed in milliseconds.</p> <pre><code>// Execute an action once, after a delay\nsetTimeout(callbackFunction, timeBeforeCall);\n</code></pre>"},{"location":"chapter18/#animate-page-elements","title":"Animate page elements","text":"<p>The previous solutions were convenient for making our pages a bit more dynamic, but weren\u2019t enough for adding real-time animation. Let's look at a better-performing solution.</p> <p>Take, for example, the movement of a <code>&lt;div&gt;</code> type element from left to right on the page. We start with the following HTML and CSS code that display a red block on the page.</p> <pre><code>&lt;div id=\"frame\"&gt;\n  &lt;div id=\"block\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <pre><code>#frame {\n  border: 1px solid red;\n}\n\n#block {\n  width: 20px;\n  height: 40px;\n  background: red;\n  position: relative;\n}\n</code></pre> <p></p> <p>And here is the JavaScript code that lets you move the red block.</p> <pre><code>// Move the block to the left\nconst moveBlock = () =&gt; {\n  // Convert the left position of the block (value of the form \"XXpx\") to a number\n  const xBlock = parseFloat(getComputedStyle(blockElement).left);\n  // Move the block to the right\n  blockElement.style.left = (xBlock + movement) + \"px\";\n  // Have the browser call moveBlock as soon as possible\n  requestAnimationFrame(moveBlock);\n};\n\nconst blockElement = document.getElementById(\"block\");\n\n// Movement value in pixels\nconst movement = 7;\n\n// Start the animation\nrequestAnimationFrame(moveBlock);\n</code></pre> <p>Click here to see it in action.</p> <p>Upon page load, the red block moves (indefinitely) from left to right.</p>"},{"location":"chapter18/#start-an-animation","title":"Start an animation","text":"<p>The example code defines a function called <code>moveBlock()</code> which moves the block horizontally to the right. It grabs the current position of the block's left border then adds the value contained in the <code>movement</code> variable. Next, the code calls the <code>requestAnimationFrame()</code> method to keep the animation going.</p> <p>Position values are written in pixels. These are the strings you saw that resemble \"XXpx,\" which requires the use of the JavaScript <code>parseFloat()</code> function to convert numeric values before making calculations.</p> <p>Warning</p> <p>Don\u2019t use <code>Number()</code> to convert a string with <code>\"px\"</code> into a numerical value. This won\u2019t work, and you'll get a <code>NaN</code> value (Not a Number) as a result!</p> <p>The <code>requestAnimationFrame()</code> function lets you ask the browser to execute a function as soon as possible, which updates the animation. It's the browser's job to make the animation as smooth as possible. The returned value of <code>requestAnimationFrame()</code> is an ID for the animation, which can be used to further modify it.</p> <p>Here is how <code>requestAnimationFrame()</code> is used in combination with an animation function.</p> <pre><code>const animate = () =&gt; {\n    // Animation code\n    // ...\n    // At end of animation, request another one\n    animationId = requestAnimationFrame(animate);\n};\n\n// Animation start\nlet animationId = requestAnimationFrame(animate);\n</code></pre>"},{"location":"chapter18/#stop-an-animation","title":"Stop an animation","text":"<p>Let's now see how to stop the block before it reaches the border of the frame that contains it. We'll have to verify that the left border position is less than the width of the frame, bearing in mind the thickness of the block itself.</p> <p>Here's the updated JavaScript code.</p> <pre><code>// Move the block to the right, all the way to the end of the frame\nconst moveBlock = () =&gt; {\n  // Convert the left position of the block (value of the form \"XXpx\") to a number\n  const xBlock = parseFloat(getComputedStyle(blockElement).left);\n  // Convert the width of the frame (value of the form \"XXpx\") to a number\n  const xMax = parseFloat(getComputedStyle(frame).width);\n  // If the block isn\u2019t already to the end of the frame\n  if (xBlock + blockWidth &lt;= xMax) {\n    // Block movement\n    blockElement.style.left = (xBlock + movement) + \"px\";\n    animationId = requestAnimationFrame(moveBlock);\n  }\n  else {\n    // Cancel the animation\n    cancelAnimationFrame(animationId);\n  }\n};\n\nconst blockElement = document.getElementById(\"block\");\n// Convert the block width (value of the form \"XXpx\") to a number\nconst blockWidth = parseFloat(getComputedStyle(block).width);\n\n// Movement value in pixels\nconst movement = 7;\n\n// Start the animation\nlet animationId = requestAnimationFrame(moveBlock);\n</code></pre> <p>Click here to see it in action.</p> <p>The new <code>moveBlock()</code> function checks that the block has arrived at the end of the frame before moving. If that's the case, the animation stops via a call to <code>cancelAnimationFrame()</code>.</p> <p>The <code>cancelAnimationFrame()</code> function stops the animation and takes the ID of the animation set by a prior call to <code>requestAnimationFrame()</code>.</p> <pre><code>// Stop an animation\ncancelAnimationFrame(animationID);\n</code></pre>"},{"location":"chapter18/#an-alternative-css-animations","title":"An alternative: CSS animations","text":"<p>You just learned about the different possibilities that JavaScript offers for animating web pages. Just bear in mind there's an another, non-JS way to obtain similar results: using CSS.</p> <p>This rich topic is outside the scope of thie book. Check out this introductory page to get started with it.</p>"},{"location":"chapter18/#choosing-the-right-animation-technique","title":"Choosing the right animation technique","text":"<p>Now, decision time. How should you choose between <code>setInterval()</code>, <code>requestAnimationFrame()</code>, or CSS to animate your page? The answer depends on how complex your animation is. In theory, CSS animations are more efficient performance-wise, but you can\u2019t do everything with them. You can read a  comparison of JavaScript and CSS animations performance-wise here.</p> <p>Here's how you might want to approach your decision:</p> <ul> <li>Use <code>setInterval()</code> if the animation isn\u2019t in real-time and should just happen at regular intervals.</li> <li>Favor CSS if the animation happens in real-time and is simple enough to be managed with this technique.</li> <li>Use <code>requestAnimationFrame()</code> for any other case.</li> </ul>"},{"location":"chapter18/#tldr","title":"TL;DR","text":"<ul> <li> <p>The <code>setInterval()</code> function kicks off a repeated action and is called at regular intervals. The <code>clearInterval()</code> function stops a repeated action that was launched with <code>setInterval()</code>.</p> </li> <li> <p>The <code>setTimeout()</code> function executes an action once after a certain delay.</p> </li> <li> <p>The <code>requestAnimationFrame()</code> function asks the browser to execute a function that updates the animation as soon as possible. This works well for real-time animations. The <code>cancelAnimationFrame()</code> function stops an in-progress animation that was launched with <code>requestAnimationFrame()</code>.</p> </li> <li> <p>You can also create web animations via CSS.</p> </li> </ul>"},{"location":"chapter18/#coding-time","title":"Coding time!","text":""},{"location":"chapter18/#chronometer","title":"Chronometer","text":"<p>Write an interactive web page with a button to start and stop a chronometer counting the number of elapsed seconds.</p> <p></p>"},{"location":"chapter18/#bouncing-ball","title":"Bouncing ball","text":"<p>The goal of this exercise is to make a basketball bounce across the screen. You can download the ball image here.</p> <p>Start with the following HTML and CSS content.</p> <pre><code>&lt;p&gt;\n  &lt;button id=\"start\"&gt;Start&lt;/button&gt;\n  &lt;button id=\"stop\" disabled&gt;Stop&lt;/button&gt;\n&lt;/p&gt;\n\n&lt;div id=\"frame\"&gt;\n  &lt;!-- Update the \"src\" attribute if you downloaded the image locally --&gt;\n  &lt;img id=\"ball\" src=\"https://raw.githubusercontent.com/bpesquet/thejsway/master/resources/basketball.jpg\"&gt;\n&lt;/div&gt;\n</code></pre> <pre><code>#ball {\n    position: relative;\n    left: 0px;\n}\n</code></pre> <p>Write the JavaScript code that makes the ball bounce horizontally.</p> <p></p> <p>Tip</p> <p>You may create a variable with values 1 or -1 that dictates the direction in which the ball should move.</p>"},{"location":"chapter19/","title":"Project: a social news web page","text":"<p>You know enough JavaScript and DOM to go ahead and create interactive web pages for real!</p>"},{"location":"chapter19/#objective","title":"Objective","text":"<p>This project builds upon the social news program you created previously. This time, the objective is to make a social news web page.</p> <p>Note</p> <p>The general idea and page layout for this project are inspired by the example application for the book Discover Meteor.</p>"},{"location":"chapter19/#functional-requirements","title":"Functional requirements","text":"<ul> <li>A link is defined by its title, its URL and its author (submitter).</li> <li>If a new link URL does not start with <code>\"http://\"</code> or <code>\"https://\"</code>, <code>\"http://\"</code> is automatically added at its beginning.</li> <li>The web page displays a list of at least three already existing links.</li> <li>A button exists for the user to submit a new link. When clicked, a form appears before the link list to input the new link properties (author, title and URL).</li> <li>In this form, all link fields are mandatory.</li> <li>When the new link is validated by the user, it is displayed at the top of the link list, replacing the form. A message indicates the success of the operation, then disappears after two seconds.</li> </ul>"},{"location":"chapter19/#technical-requirements","title":"Technical requirements","text":"<ul> <li>You should reuse any useful code from the previous project.</li> <li>All your code should be correctly indented.</li> <li>Names should be wisely chosen and adhere to the camelCase convention.</li> <li>Code duplication should be avoided.</li> </ul>"},{"location":"chapter19/#starter-code","title":"Starter code","text":"<p>Because this is first and foremost a JavaScript project, here is the complete HTML/CSS code of the web page. It is also online as a CodePen.</p> <p>Info</p> <p>This web page uses the Bootstrap framework to improve presentation and make it responsive. However, no prior Bootstrap knowledge is necessary to achieve the desired result. You can pretty much ignore it and code ahead.</p> <pre><code>&lt;!doctype html&gt;\n&lt;html&gt;\n\n&lt;head&gt;\n  &lt;meta charset=\"utf-8\"&gt;\n  &lt;!-- Latest compiled and minified CSS --&gt;\n  &lt;link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\"&gt;\n  &lt;link href=\"../css/publink.css\" rel=\"stylesheet\" type=\"text/css\"&gt;\n  &lt;title&gt;A social news web page&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n  &lt;div class=\"container\"&gt;\n\n    &lt;!-- Bootstrap navigation bar --&gt;\n    &lt;nav class=\"navbar navbar-default\"&gt;\n      &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"navbar-header\"&gt;\n          &lt;button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#bs-example-navbar-collapse-1\" aria-expanded=\"false\"&gt;\n            &lt;span class=\"sr-only\"&gt;Toggle navigation&lt;/span&gt;\n            &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n            &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n            &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n        &lt;/button&gt;\n          &lt;a class=\"navbar-brand\" href=\"#\"&gt;&lt;span class=\"glyphicon glyphicon-link\" aria-hidden=\"true\"&gt;&lt;/span&gt; PubLink&lt;/a&gt;\n        &lt;/div&gt;\n        &lt;div class=\"collapse navbar-collapse\" id=\"bs-example-navbar-collapse-1\"&gt;\n          &lt;button type=\"button\" id=\"submitButton\" class=\"btn btn-default navbar-btn\"&gt;Submit&lt;/button&gt;\n          &lt;p class=\"navbar-text navbar-right\"&gt;A social news web page built with \u2764 and JavaScript&lt;/p&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/nav&gt;\n\n    &lt;div id=\"content\"&gt;\n      &lt;!-- Dynamic content goes here --&gt;\n    &lt;/div&gt;\n\n  &lt;/div&gt;\n\n  &lt;!-- JavaScript code goes into this file --&gt;\n  &lt;script src=\"../js/publink.js\"&gt;&lt;/script&gt;\n\n  &lt;!-- jQuery (necessary for Bootstrap's JavaScript plugins) --&gt;\n  &lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js\"&gt;&lt;/script&gt;\n  &lt;!-- Include all compiled plugins (below), or include individual files as needed --&gt;\n  &lt;script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre> <pre><code>body {\n  background-color: #eee;\n}\n\n/* Main link element (&lt;div&gt; tag) */\n.link {\n  background: white;\n  padding: 10px;\n  margin-bottom: 10px;\n}\n\n/* Link title (&lt;a&gt; tag) */\n.linkTitle {\n  color: #428bca;\n  text-decoration: none;\n  margin-right: 5px;\n}\n.linkTitle:hover {\n  text-decoration: none;\n}\n\n/* Link URL (&lt;span&gt; tag) */\n.linkUrl {\n  font-weight: normal;\n  font-size: 80%;\n}\n\n/* Link headline containing title &amp; URL (&lt;h4&gt; tag) */\n.linkHeadline {\n  margin: 0;\n}\n\n/* Link author (&lt;span&gt; tag) */\n.linkAuthor {\n  font-weight: normal;\n  font-size: 80%;\n}\n\n.linkForm {\n  margin-bottom: 20px;\n}\n</code></pre>"},{"location":"chapter19/#expected-result","title":"Expected result","text":"<p>Here are a few screenshots of the expected result.</p> <p></p> <p></p> <p></p> <p></p>"},{"location":"chapter20/","title":"Web development 101","text":"<p>Understanding the fundamentals of web development is crucial for every JavaScript developer. Let's dive into this topic.</p> <p>Note</p> <p>Some of this chapter is inspired by the Symfony PHP framework documentation.</p>"},{"location":"chapter20/#how-the-web-works","title":"How the Web works","text":"<p>Surfing the web is easy as pie. Let's say you want to read today's comic from the popular web site xkcd. You type the text <code>\"xkcd.com\"</code> in your browser's address bar and voila, the comic appears (assuming no network issues).</p> <p>Let's try to understand what's going on behind the scene.</p>"},{"location":"chapter20/#web-servers","title":"Web servers","text":"<p>To be online, a web site has to be published on a server. This is a special kind of machine whose task is to listen and answer to the demands of clients. A server that publishes resources on the Web is logically called a web server.</p> <p>More precisely, a web server machine runs a particular software program (also called a web server) able to publish web sites. The most popular ones are Apache, Microsoft IIS and nginx.</p>"},{"location":"chapter20/#web-clients","title":"Web clients","text":"<p>The machine asking a server for a resource is called a web client. Actually, the real client is a software program running on the machine. A well-known type of web client is the browser, a program specialized in displaying web pages. Famous web browsers include Mozilla Firefox, Chrome, Safari and Opera.</p> <p>Not all web clients are browsers, through. For example, search engines robots and mobile applications also contact servers and ask them for content.</p>"},{"location":"chapter20/#communications-between-clients-and-servers","title":"Communications between clients and servers","text":"<p>Data exchanges on the Web follow a request/response paradigm.</p> <p></p> <ol> <li>The exchange is started by the client, which sends a request to the server to access a particular web resource.</li> <li>The server prepares a result for the request.</li> <li>The server send backs this result to the client.</li> </ol> <p>To understand each other, web clients and servers use a common protocol: HTTP.</p>"},{"location":"chapter20/#http-the-web-protocol","title":"HTTP, the web protocol","text":"<p>HTTP, which stands for HyperText Transfer Protocol, is the technical foundation of the World Wide Web. It is a protocol, a language that allows two machines to communicate with each other. HTTPS is the secured version of HTTP where exchanged data is encrypted.</p> <p>Technically speaking, HTTP is a pretty simple protocol based on textual commands.</p>"},{"location":"chapter20/#anatomy-of-an-http-request","title":"Anatomy of an HTTP request","text":"<p>Let's study the first part of the web exchange described previously: the request.</p> <p></p> <p>This HTTP request comes under the form of a multi-line piece of text similar to the following one:</p> <pre><code>GET / HTTP/1.1\nHost: xkcd.com\nAccept: text/html\nUser-Agent: Mozilla/5.0 (Macintosh)\n...\n</code></pre> <p>The most important line is the first one. It contains:</p> <ul> <li>The HTTP method (the request type, also named command). Here, the <code>GET</code> method indicates a resource access request.</li> <li>The requested resource. Here, <code>/</code> (root symbol) indicates a request for the default document.</li> <li>The HTTP protocol version, here 1.1.</li> </ul> <p>The other lines of text are called header fields. They give more information about the client request: server name (<code>Host</code>), accepted content types (<code>Accept</code>), client software details (<code>User-Agent</code>). There are many other possible header fields.</p> <p>The main HTTP methods are <code>GET</code> to access a resource and <code>POST</code> to push some information on the server. Other ones exist, such as <code>HEAD</code>, <code>PUT</code> or <code>DELETE</code>.</p>"},{"location":"chapter20/#anatomy-of-an-http-response","title":"Anatomy of an HTTP response","text":"<p>When receiving an HTTP request, the server looks inside for information. It then builds an appropriate answer and sends it back.</p> <p></p> <p>The HTTP response sent by the server looks something like this.</p> <pre><code>HTTP/1.1 200 OK\nDate: Fri, 22 Apr 2017 18:05:05 GMT\nServer: Apache/2.2\nContent-Type: text/html\n\n&lt;html&gt;\n&lt;!-- HTML code of the page --&gt;\n&lt;!-- ... --&gt;\n&lt;/html&gt;\n</code></pre> <p>The first line contains the response status: a three-digit number indicating the request result. Other lines are header fields (<code>Date</code>, <code>Content-Type</code>, etc) giving additional info about the response.</p> <p>An HTTP response might also include data. In this example, it contains the HTML code of the web page corresponding to the requested resource.</p>"},{"location":"chapter20/#http-status-codes","title":"HTTP status codes","text":"<p>The HTTP status codes belong to different families, depending on their first digit.</p> Family Meaning Examples 1xx Information 2xx Success 200: request handled successfully 3xx Redirection 4xx Client error 404: resource not found 5xx Server error 500: internal server error <p>Note</p> <p>For a more in-depth presentation of the HTTP protocol, head over to the Mozilla Developer Network.</p>"},{"location":"chapter20/#addressing-a-resource-with-a-url","title":"Addressing a resource with a URL","text":"<p>Web sites are usually accessed using their address, a piece of text of the form: http://www.sitename.com/path/to/resource</p> <p>This address can be split into several subparts:</p> <ul> <li><code>http://</code> means an access through the HTTP protocol.</li> <li><code>www.sitename.com</code> is the domain name of the web site.</li> <li><code>/path/to/resource</code> is the path of the requested resource.</li> </ul> <p>An address like this one is called a URL, or Uniform Resource Locator. A URL uniquely describes a web resource and the way to request it.</p>"},{"location":"chapter20/#from-web-sites-to-web-apps","title":"From web sites to web apps","text":""},{"location":"chapter20/#the-web-development-models","title":"The web development models","text":"<p>In a traditional web development scenario, when you click a link or submit a form, your browser sends to the server a request that returns a full new web page tailored to your request. This model is subject to longer load times and limited interactivity.</p> <p>Another web development model aims to avoid transmitting a whole new page for each user action. Here's how things works in that model:</p> <ul> <li>User actions on the page are intercepted through JavaScript event handlers.</li> <li>HTTP requests are sent to the server without interrupting the navigation on the page.</li> <li>Only the needed portions of the page are updated with the requests' results.</li> </ul> <p>Albeit more challenging, this web development model can lead to limited resource loads, improved interactivity and a user experience nearly on par with native applications.</p> <p>The set of technologies enabling the creation of web applications is codenamed AJAX (Asynchronous JavaScript and XML). An AJAX call is an asynchronous HTTP request made to retrieve or send data from/to a server.</p>"},{"location":"chapter20/#synchronous-vs-asynchronous-requests","title":"Synchronous vs asynchronous requests","text":"<p>In a synchronous exchange, the asker waits until he gets the needed info. A telephone call is an example of a synchronous exchange.</p> <p>On the contrary, the asker in an asynchronous exchange can do something else while waiting for the completion of his request. Email is an example of an asynchronous exchange.</p> <p>The traditional web development model uses synchronous requests: the web client is blocked while waiting for the server to complete its request. The AJAX model uses asynchronous requests: data is fetched when needed in the background.</p>"},{"location":"chapter20/#cross-domain-requests","title":"Cross-domain requests","text":"<p>For security reasons, many websites have a conservative policy regarding AJAX requests. This same origin policy states that requests are limited to their origin domain: <code>\"http://mysite\"</code> cannot send a request to <code>\"http://anothersite\"</code>. This prevents some servers to be accessible via AJAX calls.</p> <p>Enabling cross-domain requests is done by setting on cross-origin resource sharing (CORS) in the server configuration.</p> <p>Note</p> <p>For more information about this topic, check out this article.</p>"},{"location":"chapter20/#json-a-data-format-for-the-web","title":"JSON, a data format for the web","text":"<p>The <code>\"X\"</code> letter in AJAX stands for XML, a generic markup language that used to be the standard for cross-platform data exchanges. While still in use, XML is quite verbose and tends to be replaced by JSON as the standard data format on the web.</p> <p>JSON, or JavaScript Object Notation, is a textual syntax for describing structured information. As you'll see in the following example, JSON borrows heavily from the JavaScript object syntax.</p> <pre><code>{\n  \"cars\": [\n    {\n      \"model\": \"Peugeot\",\n      \"color\": \"blue\",\n      \"registration\": 2012,\n      \"checkups\": [2015, 2017]\n    },\n    {\n      \"model\": \"Citro\u00ebn\",\n      \"color\": \"white\",\n      \"registration\": 1999,\n      \"checkups\": [2003, 2005, 2007, 2009, 2011, 2013]\n    }\n  ]\n}\n</code></pre> <p>A JSON document is a set of name/value pairs. Names are always within double quotes <code>\"\"</code>. Values can be numbers, strings, booleans, arrays or objects.</p> <p>Many programming languages have native support for the JSON format... Including JavaScript, of course!</p>"},{"location":"chapter20/#tldr","title":"TL;DR","text":"<ul> <li> <p>Data exchanges on the Web follow a request/response paradigm. A client issues a request to a server, which process it and sends back its result to the client.</p> </li> <li> <p>HTTP (HyperText Transfer Protocol), is the protocol that allows two machines to communicate with each other on the web. Its secured version is HTTPS.</p> </li> <li> <p>HTTP is based on textual commands. The HTTP method defines the type of the request. The main HTTP methods are <code>GET</code> to access a resource and <code>POST</code> to push some information on the server.</p> </li> <li> <p>An HTTP response contains a status code indicating the result of the request: 200 for success, 404 for a resource not found, etc.</p> </li> <li> <p>Web resources are uniquely addressed by their URL (Uniform resource locator). A URL is a text of the form <code>http://www.mywebsite.com/myresourcepath/myresource</code>.</p> </li> <li> <p>In a traditional web development scenario, user actions on a page trigger a full reload after a synchronous request to a server. Another web development model, nicknamed AJAX (Asynchronous JavaScript and XML), uses JavaScript and asynchronous HTTP requests to fetch data when needed and update only the desired portions of the page. This enables the creation of web applications, aiming to offer the user experience of a native app.</p> </li> <li> <p>Cross-domain AJAX requests are only possible if the server has been configured to accept them by setting on cross-origin resource sharing (CORS).</p> </li> <li> <p>JSON (JavaScript Object Notation), a textual syntax for describing structured information, has replaced XML as the data format of the web. A JSON document is a set of name/value pairs.</p> </li> </ul>"},{"location":"chapter21/","title":"Query a web server","text":"<p>This chapter will teach you how to retrieve data from a web server through HTTP requests.</p>"},{"location":"chapter21/#creating-asynchronous-http-requests-in-javascript","title":"Creating asynchronous HTTP requests in JavaScript","text":"<p>In the previous chapter, we discussed synchronous vs asynchronous requests. Since synchronous requests block the calling process until their result is received, only asynchronous HTTP requests should be used when building a web application. However, asynchronous code can be tricky to write and to understand, since statements won\u2019t be executed in a linear and sequential fashion like with synchronous operations.</p>"},{"location":"chapter21/#the-fetch-method","title":"The <code>fetch()</code> method","text":"<p>The standard way to send asynchronous HTTP requests in JavaScript is to use the <code>fetch()</code> method. Here is its general usage form.</p> <pre><code>// Sends an asynchronous HTTP request to the target url\nfetch(url)\n  .then(() =&gt; {\n    // Code called in the future when the request ends successfully\n  })\n  .catch(() =&gt; {\n    // Code called in the future when an errors occurs during the request\n  });\n</code></pre> <p>Info</p> <p>You might encounter JavaScript code that uses an object called <code>XMLHttpRequest</code> to perform HTTP operations. This is a more ancient technique now replaced by <code>fetch()</code>.</p>"},{"location":"chapter21/#under-the-hood-promises","title":"Under the hood: promises","text":"<p>When the <code>fetch()</code> method is executed, it immediately returns a promise, which is a wrapper for an operation whose result might be available in the future. A promise is in one of these states:</p> <ul> <li>pending: initial state, not fulfilled or rejected.</li> <li>fulfilled: meaning that the operation completed successfully.</li> <li>rejected: meaning that the operation failed.</li> </ul> <p>A JavaScript promise is an object with <code>then()</code> and <code>catch()</code> methods. <code>then()</code> is called when the promise is fulfilled. It takes the operation result as a parameter. On the contrary, <code>catch()</code> is called when the promise is rejected.</p> <p>What's great about promises is that they can be chained together. Here's how you could perform a series of asynchronous operations in JavaScript.</p> <pre><code>getData()\n  .then(a =&gt; filterData(a)) // Called asynchronously when getData() returns\n  .then(b =&gt; processData(b)) // Called asynchronously when filterData() returns\n  .then(c =&gt; displayData(c)) // Called asynchronously when processData() returns\n  // ...\n</code></pre>"},{"location":"chapter21/#example-retrieving-a-text-file","title":"Example: retrieving a text file","text":"<p>Let's start with a very basic example: displaying the content of a text file located on a web server. The file is hosted on GitHub and it has the following content.</p> <pre><code>C++;Java;C#;PHP\n</code></pre> <p>Here's how to do this in JavaScript using <code>fetch()</code>.</p> <pre><code>fetch(\n  \"https://raw.githubusercontent.com/bpesquet/thejsway/master/resources/languages.txt\"\n)\n  .then(response =&gt; response.text()) // Access and return response's text content\n  .then(text =&gt; {\n    console.log(text); // Display file content in the console\n  });\n</code></pre> <p></p> <p>The result of the asynchronous HTTP request created by <code>fetch()</code> comes under the the form of a <code>Response</code> object. This object has several methods to deal with the response of the HTTP call. The <code>text()</code> method used in this example reads the response's text content and returns another promise. Its result is managed by the second <code>then()</code> method, which simply displays the file's textual content in the console.</p> <p>Note</p> <p>To learn more about the <code>Response</code> object, consult, as usual, the Mozilla Developer Network.</p>"},{"location":"chapter21/#dealing-with-errors","title":"Dealing with errors","text":"<p>By nature, external HTTP requests are subject to errors: network failure, missing resource, etc. Handling these errors is done by adding a <code>catch()</code> method to the <code>fetch()</code> call. A basic level of error handling is to log the error message in the console.</p> <pre><code>fetch(\"http://non-existent-resource\")\n  .catch(err =&gt; {\n    console.error(err.message);\n  });\n</code></pre> <p></p>"},{"location":"chapter21/#handling-json-data","title":"Handling JSON data","text":"<p>Let's advance to a more interesting and realistic scenario. Very often, data available on web servers are published under the JSON format.</p>"},{"location":"chapter21/#json-and-javascript","title":"JSON and JavaScript","text":"<p>The JavaScript language offers native support for the JSON format:</p> <ul> <li>The <code>JSON.parse()</code> method transforms a JSON string into a JavaScript object.</li> <li>On the contrary, the <code>JSON.stringify()</code> method transforms a JavaScript object into a JSON string.</li> </ul> <pre><code>// Define a JavaScript object\nconst plane = {\n  manufacturer: \"Airbus\",\n  model: \"A320\"\n};\nconsole.log(plane); // Display the object\n\nconst planeText = JSON.stringify(plane);\nconsole.log(planeText); // Display the object as a JSON string\n\nconsole.log(JSON.parse(planeText)); // Display the object\n</code></pre> <p></p> <p>These methods can also handle JSON arrays.</p> <pre><code>// Define an array containing two objects\nconst planes = [\n  {\n    manufacturer: \"Airbus\",\n    model: \"A320\"\n  },\n  {\n    manufacturer: \"Boeing\",\n    model: \"737\"\n  }\n];\nconsole.log(planes); // Display the array of objects\n\nconst planesText = JSON.stringify(planes);\nconsole.log(planesText); // Display the array as a JSON string\n\nconsole.log(JSON.parse(planesText)); // Display the array of objects\n</code></pre> <p></p>"},{"location":"chapter21/#example-retrieving-json-content","title":"Example: retrieving JSON content","text":"<p>For example, the following JSON file <code>movies.json</code> contains information about some movies. This file defines an array containing three objects.</p> <pre><code>[\n  {\n    \"title\": \"The Wolf of Wall Street\",\n    \"year\": \"2013\",\n    \"author\": \"Martin Scorsese\"\n  },\n  {\n    \"title\": \"Inside Out\",\n    \"year\": \"2015\",\n    \"author\": \"Pete Docter\"\n  },\n  {\n    \"title\": \"Babysitting\",\n    \"year\": \"2013\",\n    \"author\": \"Philippe Lacheau and Nicolas Benamou\"\n  }\n]\n</code></pre> <p>Here's how to retrieve this file from its URL and display each movie title in the console.</p> <pre><code>fetch(\n  \"https://raw.githubusercontent.com/bpesquet/thejsway/master/resources/movies.json\"\n)\n  .then(response =&gt; response.json()) // Access and return response's JSON content\n  .then(movies =&gt; {\n    // Iterate on the movie array\n    movies.forEach(movie =&gt; {\n      // Display title of each movie\n      console.log(movie.title);\n    });\n  })\n  .catch(err =&gt; {\n    console.error(err.message);\n  });\n</code></pre> <p></p> <p>The <code>json()</code> method of the HTTP <code>Response</code> object returns a promise that resolves with the result of parsing the response text as JSON. As such, the <code>movies</code> parameter of the second <code>then()</code> is a plain JavaScript array that can be iterated upon.</p>"},{"location":"chapter21/#tldr","title":"TL;DR","text":"<ul> <li> <p>HTTP requests sent to a web server need to be asynchronous to prevent blocking the client application while waiting for the server's response.</p> </li> <li> <p>The JavaScript <code>fetch()</code> method is replacing <code>XMLHttpRequest</code> as the go-to way of creating an asynchronous request. Its <code>then()</code> and <code>catch()</code> methods respectively handle the success and failure of the request.</p> </li> </ul> <pre><code>// Sends an asynchronous HTTP request to the target url\nfetch(url)\n  .then(() =&gt; {\n    // Code called in the future when the request ends successfully\n  })\n  .catch(() =&gt; {\n    // Code called in the future when an errors occurs during the request\n  });\n</code></pre> <ul> <li> <p>The <code>fetch()</code> method demonstrates the use of promises to write asynchronous code in JavaScript. A promise is a wrapper for an operation whose result might be available in the future. It is either pending (initial state),  fulfilled (operation completed successfully) or rejected (operation failed).</p> </li> <li> <p>JavaScript deals with JSON content with the <code>JSON.parse()</code> (to transform a JSON text into an object) and <code>JSON.stringify()</code> method (to do the opposite).</p> </li> <li> <p>The result of a call to <code>fetch()</code> is an HTTP <code>Response</code> object. Its <code>text()</code> and <code>json()</code> methods are used to read content as plain text or JSON data. These two methods return a promise that resolves either as a string or as JSON.</p> </li> </ul>"},{"location":"chapter21/#coding-time","title":"Coding time!","text":""},{"location":"chapter21/#language-list","title":"Language list","text":"<p>The objective of this exercise is to display the languages of the previous file languages.txt on a web page. Here is the starter HTML code.</p> <pre><code>&lt;h2&gt;A few programming languages&lt;/h2&gt;\n&lt;ul id=\"languageList\"&gt;\n&lt;/ul&gt;\n</code></pre> <p>Write the JavaScript code that fetches the file from the web server and fills the HTML list.</p> <p></p>"},{"location":"chapter21/#famous-paintings","title":"Famous paintings","text":"<p>In this exercise, you'll show information about some famous paintings on a web page table. JSON data is available here.</p> <p>It has the following content.</p> <pre><code>[\n  {\n    \"name\": \"The Starry Night\",\n    \"year\": \"1889\",\n    \"artist\": \"Vincent Van Gogh\"\n  },\n  {\n    \"name\": \"The Scream\",\n    \"year\": \"1893\",\n    \"artist\": \"Edvard Munch\"\n  },\n  {\n    \"name\": \"Guernica\",\n    \"year\": \"1937\",\n    \"artist\": \"Pablo Picasso\"\n  }\n]\n</code></pre> <p>Start from the following HTML code.</p> <pre><code>&lt;h2&gt;Some famous paintings&lt;/h2&gt;\n&lt;table id=\"paintings\"&gt;\n    &lt;tr&gt;\n        &lt;th&gt;Name&lt;/th&gt;\n        &lt;th&gt;Year&lt;/th&gt;\n        &lt;th&gt;Artist&lt;/th&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre> <p>Write the JavaScript code that fills a table with details about the paintings.</p> <p></p>"},{"location":"chapter22/","title":"Use web APIs","text":"<p>In this chapter, you'll learn how to leverage real-world web services in your applications.</p>"},{"location":"chapter22/#introducing-web-apis","title":"Introducing web APIs","text":"<p>The API acronym stands for Application Programming Interface. An API is an entry point offered by a software program or service to other programs. It defines a set of well-defined methods of communication. Through APIs, developers can easily integrate external technologies or services into their applications.</p> <p>Note</p> <p>APIs exist under a wide variety of forms. As an example, the Document Object Model is itself an API for interacting programmatically with a web page: it defines methods for navigating and updating the page structure.</p> <p>A web API is an API available on the Web and accessible through web technologies, namely the HTTP protocol or its secured counterpart HTTPS. Web APIs are a key technology for software interactions: whenever you authenticate into a website using your Google account, or click a button to post something on your favorite social network, you're using them. A ever growing number of services are exposed through web APIs, forming a thriving ecosystem for building digital products.</p>"},{"location":"chapter22/#consuming-a-web-api","title":"Consuming a web API","text":"<p>To be able to use a web API, you have to know its address and its usage mode. Most of web APIs are accessible via an URL and use the JSON format for data exchanges.</p>"},{"location":"chapter22/#checking-out-an-api","title":"Checking out an API","text":"<p>The first web API you'll use here simulates a blog and exposes a series of articles. Its URL is https://thejsway-server.herokuapp.com/api/articles. Opening it in a browser shows the JSON data returned by the API.</p> <p></p> <p>Tip</p> <p>For an easier interaction with web API, using a specialized tool like Postman or RESTClient is recommended.</p> <p>This web API returns an array containing some articles. Each article corresponds to a JavaScript object with <code>id</code>, <code>title</code> and <code>content</code> properties.</p> <p>Info</p> <p>Curious about creating such an API? You'll learn how to build this very service (and others) in an upcoming chapter.</p> <p>Real-world APIs are almost always accompanied by an online documentation showing how to use it. Studying this documentation is essential for using the API flawlessly.</p>"},{"location":"chapter22/#calling-an-api-with-javascript","title":"Calling an API with JavaScript","text":"<p>Now that we know the address and data format of our example API, let's try to show its result on a web page. To do so, we'll leverage our AJAX knowledge from the previous chapter. Check out the following example, which shows how to access the article list from the API.</p> <p>Here's the HTML code for the page.</p> <pre><code>&lt;h2&gt; Some blog articles&lt;/h2&gt;\n&lt;div id=\"articles\"&gt;&lt;/div&gt;\n</code></pre> <p>And here's the associated JavaScript code.</p> <pre><code>// Fetch data from the API\nfetch(\"https://thejsway-server.herokuapp.com/api/articles\")\n  .then(response =&gt; response.json()) // Translate JSON into JavaScript\n  .then(articles =&gt; {\n    articles.forEach(article =&gt; {\n      // Create title element\n      const titleElement = document.createElement(\"h3\");\n      titleElement.textContent = article.title;\n      // Create content element\n      const contentElement = document.createElement(\"p\");\n      contentElement.textContent = article.content;\n      // Add title and content to the page\n      const articlesElement = document.getElementById(\"articles\");\n      articlesElement.appendChild(titleElement);\n      articlesElement.appendChild(contentElement);\n    });\n  })\n  .catch(err =&gt; {\n    console.error(err.message);\n  });\n</code></pre> <p>Using a web API works just like querying a web server: fetching the API URL, translating the JSON response into a JavaScript array and iterating on it.</p> <p>Here is the resulting web content.</p> <p></p>"},{"location":"chapter22/#web-apis-and-authentication","title":"Web APIs and authentication","text":"<p>Web APIs can be classified into two categories:</p> <ul> <li>Open APIs that don\u2019t need any authentication to be used.</li> <li>APIs requiring the consumer to authenticate himself through various methods.</li> </ul>"},{"location":"chapter22/#open-apis","title":"Open APIs","text":"<p>These APIs are free to use by anyone, anyhow. To prevent abuse, they often use rate limiting instead: the number of calls from one specific source (identified by its IP address) is capped.</p> <p>Many public institutions like the British Police or the French government publish data to citizens using open APIs.</p> <p>There is also a lot of fun little APIs out there. For example, the Punk API lets you search into a huge catalog of beers. Here's how to renew your drinking habits by getting a random one from this API.</p> <pre><code>&lt;button id=\"grabButton\"&gt;Grab a beer&lt;/button&gt;\n&lt;div id=\"beer\"&gt;&lt;/div&gt;\n</code></pre> <pre><code>// Anonymous function for retrieving and displaying a random beer\nconst grabRandomBeer = () =&gt; {\n  // Fetching random beer data from API\n  fetch(\"https://api.punkapi.com/v2/beers/random\")\n    .then(response =&gt; response.json())\n    .then(beers =&gt; {\n      // API returns an array containg only one element: we get it\n      const beer = beers[0];\n      // Creating DOM element for some beer properties\n      const nameElement = document.createElement(\"h2\");\n      nameElement.textContent = beer.name;\n      const descriptionElement = document.createElement(\"p\");\n      descriptionElement.textContent = beer.description;\n      // Clear previous beer data\n      const beerElement = document.getElementById(\"beer\");\n      beerElement.innerHTML = \"\";\n      // Add beer info to the page\n      beerElement.appendChild(nameElement);\n      beerElement.appendChild(descriptionElement);\n    })\n    .catch(err =&gt; {\n      console.error(err.message);\n    });\n};\n\n// Grab a new beer when clicking the button\ndocument.getElementById(\"grabButton\").addEventListener(\"click\", grabRandomBeer);\n</code></pre> <p>Each time the <code>\"Grab a beer\"</code> button is clicked on the web page, an anonymous function is called to retrieve and display a random beer.</p> <p></p>"},{"location":"chapter22/#key-based-authentication","title":"Key-based authentication","text":"<p>Another class of APIs requires the client to authenticate himself when accessing the service. Authentication can be done via several techniques. In this paragraph, we'll use the simplest one: access key. An access key is a generated string containing characters and digits and associated to a user.</p> <p>Note</p> <p>Of course, authentication-based APIs often also have rate limits.</p> <p>There is no universal standard regarding access keys. Each service is free to use its own custom format. The client must provide its access key when accessing the API, generally by adding it at the end of the API URL. A prerequisite for using any key-based web API is thus to generate oneself an access key for this particular service.</p> <p>Let's put this into practice for obtaining about the current weather in your area. To do so, you could simply look outside the window, but it's way cooler to use a web-based service like OpenWeather instead ;).</p> <p>This service has a key-based API for retrieving the weather in any place. To obtain it, you'll have to sign up as a user (it's free) and a new API key will be generated and associated to your account. Once you've done this, weather data is available through an URL of the form http://api.openweathermap.org/data/2.5/weather?q=LOCATION&amp;appid=API_KEY. Replace <code>LOCATION</code> and <code>API_KEY</code> with your own settings, and you should obtain the weather in your surroundings.</p> <p>Before using any API in our code, a necessary first step is to check out and understand its data format. The result looks like this when getting weather info for Bordeaux, France.</p> <pre><code>{\n  \"coord\": {\n    \"lon\": -0.5805,\n    \"lat\": 44.8404\n  },\n  \"weather\": [\n    {\n      \"id\": 803,\n      \"main\": \"Clouds\",\n      \"description\": \"broken clouds\",\n      \"icon\": \"04d\"\n    }\n  ],\n  \"base\": \"stations\",\n  \"main\": {\n    \"temp\": 20.15,\n    \"feels_like\": 19.89,\n    \"temp_min\": 19.08,\n    \"temp_max\": 20.15,\n    \"pressure\": 1020,\n    \"humidity\": 64\n  },\n  \"visibility\": 10000,\n  \"wind\": {\n    \"speed\": 2.57,\n    \"deg\": 120\n  },\n  \"clouds\": {\n    \"all\": 75\n  },\n  \"dt\": 1654506765,\n  \"sys\": {\n    \"type\": 1,\n    \"id\": 6450,\n    \"country\": \"FR\",\n    \"sunrise\": 1654489047,\n    \"sunset\": 1654544687\n  },\n  \"timezone\": 7200,\n  \"id\": 3031582,\n  \"name\": \"Bordeaux\",\n  \"cod\": 200\n}\n</code></pre> <p>Now we just have to call the API from our JavaScript code and display the weather information on a web page.</p> <pre><code>// Replace YOUR_API_KEY with your own OpenWeather API key. \n// You may also change the location (here: Bordeaux, France) to your liking.\nfetch(\n  \"http://api.openweathermap.org/data/2.5/weather?q=Bordeaux,fr&amp;appid=YOUR_API_KEY&amp;units=metric\"\n)\n  .then((response) =&gt; response.json())\n  .then((weatherData) =&gt; {\n    // Extract some weather properties from API call result\n    const location = weatherData.name;\n    const temperature = weatherData.main.temp;\n    const humidity = weatherData.main.humidity;\n\n    // Create DOM elements for these properties\n    const summaryElement = document.createElement(\"div\");\n    summaryElement.textContent = `Temperature is ${temperature} \u00b0C with ${humidity}% humidity.`;\n    // Add location to title\n    document.querySelector(\"h2\").textContent += ` ${location}`;\n    // Add elements to the page\n    const weatherElement = document.getElementById(\"weather\");\n    weatherElement.appendChild(summaryElement);\n  })\n  .catch((err) =&gt; {\n    console.error(err.message);\n  });\n</code></pre> <p></p>"},{"location":"chapter22/#tldr","title":"TL;DR","text":"<ul> <li> <p>An API or Application Programming Interface is a set of well-defined services offered by a software program or service to others. Developers use them to integrate external technologies or services into their applications.</p> </li> <li> <p>A web API is an API accessible through web technologies (HTTP or HTTPS). They often use JSON as their data format.</p> </li> <li> <p>A web API can be consumed programmatically using an AJAX call. Before that, the API must be checked out and its documentation studied in order to understand how it works and what it returns.</p> </li> </ul> <pre><code>// Fetch data from the API\nfetch(\"http://my-api-url\")\n  .then(response =&gt; response.json()) // Translate JSON into JavaScript\n  .then(content =&gt; {\n    // Use returned content\n    // ...\n  })\n  .catch(err =&gt; {\n    console.error(err.message);\n  });\n</code></pre> <ul> <li>A ever growing number of services are exposed through web APIs. Some are open, others require the authentication of the client, for example with an access key.</li> </ul>"},{"location":"chapter22/#coding-time","title":"Coding time!","text":""},{"location":"chapter22/#more-beer-please","title":"More beer please","text":"<p>Improve the previous Punk API example to display additional information about the showcased beer : alcohol by volume (ABV), volume and date of first brewage.</p> <p></p>"},{"location":"chapter22/#github-profile","title":"GitHub profile","text":"<p>The ubiquitous code sharing platform GitHub has a public API. The goal of this exercise is to display some information about a GitHub user, identified by his login. The API documentation is available here.</p> <p>Use this API to show the profile picture, name and website address of a GitHub user whose login is entered in a text box.</p> <p></p> <p>Note</p> <p>You can test your code by using the GitHub logins of prominent JS community members like <code>brendaneich</code> (JavaScript's father), <code>douglascrockford</code> or <code>vjeux</code>.</p>"},{"location":"chapter22/#star-wars-planets","title":"Star Wars planets","text":"<p>The open Star Wars API has all the Star Wars data you've ever wanted. In this exercise, you'll show information about some of the planets in the  universe.</p> <p>Here is the starting HTML code.</p> <pre><code>&lt;h2&gt;Some Star Wars planets&lt;/h2&gt;\n&lt;div id=\"links\"&gt;&lt;/div&gt;\n&lt;div id=\"infos\"&gt;&lt;/div&gt;\n</code></pre> <p>Write the associated JavaScript code so that a list of links for the first ten planets identifiers (from 1 to 10) is generated automatically. Clicking on a planet link shows information about it.</p> <p></p>"},{"location":"chapter23/","title":"Send data to a web server","text":"<p>You just learnt how to retrieve some data from web servers or APIs. This chapter will teach you how to send data to them.</p>"},{"location":"chapter23/#sending-data-the-basics","title":"Sending data: the basics","text":"<p>Sending data to a server is usually done via an HTTP request using the <code>POST</code> method. In that case, the request body contains the data to be sent.</p> <p>The data format depends on what the server expects. It can either be:</p> <ul> <li>Key/value pairs like when a form is directly submitted.</li> <li>JSON for more structured data.</li> </ul>"},{"location":"chapter23/#sending-form-data","title":"Sending form data","text":"<p>If the web server expects direct form data, you can use the JavaScript <code>FormData</code> object to encapsulate the information to be sent.</p> <p>Here's an example form for choosing the strongest animal of all.</p> <pre><code>&lt;h2&gt;Which one is the strongest?&lt;/h2&gt;\n&lt;form&gt;\n    &lt;p&gt;\n        &lt;input type=\"radio\" name=\"strongest\" id=\"elephant\" value=\"ELE\" checked&gt;\n        &lt;label for=\"elephant\"&gt;The elephant&lt;/label&gt;\n        &lt;br&gt;\n        &lt;input type=\"radio\" name=\"strongest\" id=\"rhinoceros\" value=\"RHI\"&gt;\n        &lt;label for=\"rhinoceros\"&gt;The rhinoceros&lt;/label&gt;\n        &lt;br&gt;\n        &lt;input type=\"radio\" name=\"strongest\" id=\"hippopotamus\" value=\"HIP\"&gt;\n        &lt;label for=\"hippopotamus\"&gt;The hippopotamus&lt;/label&gt;\n        &lt;br&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;label for=\"name\"&gt;Your name&lt;/label&gt;:\n        &lt;input type=\"text\" name=\"name\" id=\"name\" required&gt;\n    &lt;/p&gt;\n    &lt;input type=\"submit\" value=\"Vote\"&gt;\n&lt;/form&gt;\n&lt;p id=\"result\"&gt;&lt;/p&gt;\n</code></pre> <p></p> <p>And here is the associated JavaScript code which handles the form submission.</p> <pre><code>// Handle form submission\ndocument.querySelector(\"form\").addEventListener(\"submit\", e =&gt; {\n  // Cancel default behavior of sending a synchronous POST request\n  e.preventDefault();\n  // Create a FormData object, passing the form as a parameter\n  const formData = new FormData(e.target);\n  // Send form data to the server with an asynchronous POST request\n  fetch(\"https://thejsway-server.herokuapp.com/animals\", {\n    method: \"POST\",\n    body: formData\n  })\n    .then(response =&gt; response.text())\n    .then(result =&gt; {\n      document.getElementById(\"result\").textContent = result;\n    })\n    .catch(err =&gt; {\n      console.error(err.message);\n    });\n});\n</code></pre> <p>The event listener starts by disabling the default form submission behavior, which is to send a synchronous HTTP <code>POST</code> request to a server. Instead, a <code>FormData</code> object is created with the form itself (the <code>e.target</code> expression) as a parameter. All form fields are automatically added as key/value pairs in this object.</p> <p>Once the form fields are encapsulated in the <code>FormData</code> object, the <code>fetch()</code> method seen previously is used to send an asynchronous request to the <code>https://thejsway-server.herokuapp.com/animals</code> URL. The second parameter of the <code>fetch()</code> call sets the HTTP method as <code>POST</code> and adds the form data into the body of the request.</p> <p>Lastly, the page's <code>result</code> element is updated when the server responds to the asynchronous request.</p> <p></p> <p>The <code>FormData</code> object can also be used independently of any form, to send custom key/value pairs to a server. Here is a very basic example form containing only a button.</p> <pre><code>&lt;button id=\"buyButton\"&gt;Buy a new t-shirt&lt;/button&gt;\n&lt;p id=\"result\"&gt;&lt;/p&gt;\n</code></pre> <p>When the user clicks on the button, custom data is added to a <code>FormData</code> object and sent to the server through an asynchronous <code>POST</code> request.</p> <pre><code>document.getElementById(\"buyButton\").addEventListener(\"click\", () =&gt; {\n    // Create a new, empty FormData object\n    const formData = new FormData();\n    // Fill the object with key/value pairs\n    formData.append(\"size\", \"L\");\n    formData.append(\"color\", \"blue\");\n    // Send data to the server\n    fetch(\"https://thejsway-server.herokuapp.com/tshirt\", {\n      method: \"POST\",\n      body: formData\n    })\n    .then(response =&gt; response.text())\n    .then(result =&gt; {\n      document.getElementById(\"result\").textContent = result;\n    })\n    .catch(err =&gt; {\n      console.error(err.message);\n    });\n});\n</code></pre> <p></p>"},{"location":"chapter23/#sending-json-data","title":"Sending JSON data","text":"<p>When the information expected by the web server is more structured (with complex types, nested fields, etc), it's often a better choice to send it as JSON data.</p> <p>For example, check out how to send a JavaScript array as JSON data to a web server.</p> <pre><code>// Create an array containing two objects\nconst cars = [\n  {\n    model: \"Peugeot\",\n    color: \"blue\",\n    registration: 2012,\n    checkups: [2015, 2017]\n  },\n  {\n    model: \"Citro\u00ebn\",\n    color: \"white\",\n    registration: 1999,\n    checkups: [2003, 2005, 2007, 2009, 2011, 2013]\n  }\n];\n\n// Send this array as JSON data to the server\nfetch(\"https://thejsway-server.herokuapp.com/api/cars\", {\n  method: \"POST\",\n  headers: {\n    Accept: \"application/json\",\n    \"Content-Type\": \"application/json\"\n  },\n  body: JSON.stringify(cars)\n})\n  .then(response =&gt; response.text())\n  .then(result =&gt; {\n    console.log(result);\n  })\n  .catch(err =&gt; {\n    console.error(err.message);\n  });\n</code></pre> <p></p> <p>The second parameter of the <code>fetch()</code> call sets <code>POST</code> as the HTTP method to use, updates the request headers to indicate that the data format is JSON, and adds the JSON representation of the JavaScript array into the body of the request.</p>"},{"location":"chapter23/#tldr","title":"TL;DR","text":"<ul> <li> <p>You can send information to a web server through an AJAX call translating into an HTTP <code>POST</code> request using the <code>fetch()</code> method.</p> </li> <li> <p>For sending HTML form data or key/value pairs, you use the <code>FormData</code> object.</p> </li> </ul> <pre><code>// Create a FormData object containing the HTML form data\nconst formData = new FormData(myForm);\n// Send form data to the server with an asynchronous POST request\nfetch(\"https://my-server-url\", {\n  method: \"POST\",\n  body: formData\n})\n  .then();\n</code></pre> <ul> <li>The <code>FormData</code> object can also be used to send arbitrary key/value pairs to a server.</li> </ul> <pre><code>// Create a new, empty FormData object\nconst formData = new FormData();\n// Fill the object with key/value pairs\nformData.append(\"size\", \"L\");\nformData.append(\"color\", \"blue\");\n// ...\n</code></pre> <ul> <li>When the information expected by the server is more structured, sending it as JSON data is more convenient.</li> </ul> <pre><code>// Create some JavaScript data\nconst myData = {\n  // ...\n};\n\n// Send this data as JSON to the server\nfetch(\"https://https://my-server-url\", {\n  method: \"POST\",\n  headers: {\n    Accept: \"application/json\",\n    \"Content-Type\": \"application/json\"\n  },\n  body: JSON.stringify(myData)\n})\n  .then();\n</code></pre>"},{"location":"chapter23/#coding-time","title":"Coding time!","text":""},{"location":"chapter23/#new-article","title":"New article","text":"<p>Write the HTML code that shows input fields for creating a new blog article by entering its title and content.</p> <p>Then, write the associated JavaScript code to send the article fields as form data to the URL <code>https://thejsway-server.herokuapp.com/articles</code>. You should receive a confirmation message from the server and display it on the page.</p> <p></p> <p>Warning</p> <p>The server only accepts <code>POST</code> requests at this URL.</p>"},{"location":"chapter23/#visited-countries","title":"Visited countries","text":"<p>The goal of this exercise is to send your traveling info to a server. Data is expected as a JSON object containing two fields:</p> <ul> <li>A <code>name</code> field representing your name. Its value is a string.</li> <li>A <code>countries</code> field representing the countries you already visited. Its value is an array of objects. Each object has a <code>name</code> field (string) for the country name, and a <code>year</code> field (integer) for the year you last visited it.</li> </ul> <p>Here is an example of submitted data.</p> <pre><code>const traveler = {\n  name: \"Sam\",\n  countries: [\n    {\n      name: \"Italy\",\n      year: 2022\n    },\n    {\n      model: \"Ireland\",\n      color: 2021\n    },\n    {\n      model: \"USA\",\n      color: 2021\n    }\n  ]\n};\n</code></pre> <p>This data must be sent to the URL <code>https://thejsway-server.herokuapp.com/api/countries</code>. You should receive a confirmation message from the server and display it in the console.</p> <p></p>"},{"location":"chapter24/","title":"Discover Node.js","text":"<p>In this chapter, you'll discover how to create JavaScript applications outside the browser thanks to a technology called Node.js.</p>"},{"location":"chapter24/#introducing-nodejs","title":"Introducing Node.js","text":""},{"location":"chapter24/#a-bit-of-history","title":"A bit of history","text":"<p>To understand what Node.js (or Node for short) is, we have to travel back in time to the 2000's. As JavaScript was becoming increasingly important for improving the user experience on the web, web browser designers spent a considerable amount of resources on executing JS code as fast as possible. In particular, the Chrome JavaScript engine, codenamed V8, became open source in 2008 and was a huge step forward in general performance and optimization.</p> <p></p> <p>The core idea behind Node.js was simple yet visionary: since the V8 engine is so good at executing code, why not leverage its power to create efficient JavaScript applications outside the browser? And thus Node.js was born in 2009, originally written by Ryan Dahl. Its project quickly became very popular and Node is now one of the top technologies for building apps and creating APIs with JavaScript.</p> <p></p> <p>Node also made it easier for developers to publish, share and reuse code. Today, hundreds of thousands of ready-to-use JavaScript libraries, called packages, are available and easy to integrate in any Node-based project (more on that later). This rich ecosystem is one of Node's greatest strengths.</p>"},{"location":"chapter24/#a-first-example","title":"A first example","text":"<p>Note</p> <p>This chapter assumes a working Node environnement. Refer to the introduction for setting one up.</p> <p>The simplest possible Node program is as follows.</p> <pre><code>console.log(\"Hello from Node!\");\n</code></pre> <p>As you see, the <code>console.log()</code> command is also available in Node. Just like in a web browser, it outputs the value passed as parameter to the console. Assuming this code is saved into a file named <code>hello.js</code>, here's how to execute it through Node in a terminal.</p> <pre><code>node hello.js\n</code></pre> <p></p> <p>An in-depth study of the Node platform is out of this book's scope. Let's focus on two of its defining features: modules and packages.</p>"},{"location":"chapter24/#nodejs-modules","title":"Node.js modules","text":""},{"location":"chapter24/#the-benefits-of-modularity","title":"The benefits of modularity","text":"<p>The general idea behind modules is pretty straightforward and similar to the one behind functions. Instead of writing all the code in one place, thus creating a monolithic application, it's often better to split the functionalities into smaller, loosely coupled parts. Each part should focus on a specific task, making it far easier to understand and reuse. The general application's behavior results from the interactions between these building blocks.</p> <p>These smaller parts are sometimes referred to as components in other environments. In Node, they are called modules and can come under different forms. The general definition of a module is: anything that can be loaded using Node's <code>require()</code> function. The Node.js platform adheres to the CommonJS module format.</p>"},{"location":"chapter24/#creating-a-module","title":"Creating a module","text":"<p>The simplest form of module is a single JavaScript file, containing special commands to export specific pieces of code. The rest of the code is private to the module and won\u2019t be visible outside of it.</p> <p>For example, a <code>greetings.js</code> module could contain the following code.</p> <pre><code>// Create three functions\nconst sayHello = name =&gt; `Hello, ${name}`;\nconst flatter = () =&gt; `Look how gorgeous you are today!`;\nconst sayGoodbye = name =&gt; `Goodbye, ${name}`;\n\n// Export two of them\nmodule.exports.sayHello = sayHello;\nmodule.exports.flatter = flatter;\n</code></pre> <p>In Node, functions can be exported (made accessible outside) by specifying additional properties on the special <code>module.exports</code> object. Here, two functions are exported under the names <code>sayHello</code> and <code>flatter</code>. The third one is not exported.</p> <p>This module could have been written in a slightly more concise way by directly defining the functions as properties of the <code>module.exports</code> object.</p> <pre><code>// Create and export two functions\nmodule.exports.sayHello = name =&gt; `Hello, ${name}`;\nmodule.exports.flatter = () =&gt; `Look how gorgeous you are today!`;\n\n// Create a non-exported function\nconst sayGoodbye = name =&gt; `Goodbye, ${name}`;\n</code></pre>"},{"location":"chapter24/#loading-a-module","title":"Loading a module","text":"<p>Assuming both files are located in the same directory, another JavaScript file could load the previously created module by using the <code>require()</code> function provided by Node.js.</p> <pre><code>// Load the module \"greetings.js\"\nconst greetings = require(\"./greetings.js\");\n\n// Use exported functions\nconsole.log(greetings.sayHello(\"Baptiste\")); // \"Hello, Baptiste\"\nconsole.log(greetings.flatter()); // \"Look how gorgeous you are today!\"\nconsole.log(greetings.sayGoodbye(\"Baptiste\")); // Error: sayGoodbye doesn\u2019t exist\n</code></pre> <p>The parameter passed to <code>require()</code> identifies the module to load. Here, the <code>\"./\"</code> substring at the beginning indicates a relative path: the module should be searched for in the same directory as the file that loads it.</p> <p>The result of the call to <code>require()</code> is an object, named <code>greetings</code> here. This object references the value of the <code>module.exports</code> object defined inside the module. Thus, the <code>greetings</code> object has two functions <code>sayHello</code> and <code>flatter</code> as properties. Trying to access its non-existent <code>sayGoodbye</code> property triggers an error during execution.</p> <p>Tip</p> <p>Giving the object resulting from a call to <code>require()</code> the same name as the loaded module's name, through not mandatory, is a common practice.</p>"},{"location":"chapter24/#exporting-only-a-specific-object","title":"Exporting only a specific object","text":"<p>Numerous modules in the Node.js ecosystem export only a single object aggregating all of the module's functionality. To do so, they reassign the <code>module.exports</code> object instead of adding properties to it.</p> <p>For example, check out how the following module <code>calculator.js</code> is defined.</p> <pre><code>// Declare a factory function that returns an object literal\nconst createCalc = () =&gt; {\n  // The returned object has 4 methods\n  return {\n    add(x, y) {\n      return x + y;\n    },\n    subtract(x, y) {\n      return x - y;\n    },\n    multiply(x, y) {\n      return x * y;\n    },\n    divide(x, y) {\n      return x / y;\n    }\n  };\n};\n\n// Export the factory function\nmodule.exports = createCalc;\n</code></pre> <p>In this module, the only exported element is a function that returns an object literal. Using it in another file (located in the same folder) is as follows.</p> <pre><code>const calculator = require(\"./calculator.js\");\n\n// Create an object by calling the exported function of this module\nconst calc = calculator();\n\n// Use the object's methods\nconsole.log(`2 + 3 = ${calc.add(2, 3)}`); // \"2 + 3 = 5\"\n</code></pre> <p>The result of the call to <code>require()</code> is a function stored in the <code>calculator</code> variable, referencing the <code>createCalc()</code> function. Calling this function returns an object with several methods, which can be subsequently used.</p>"},{"location":"chapter24/#exporting-only-a-class","title":"Exporting only a class","text":"<p>When you want a module to only export a specific class, you can also reassign the <code>module.exports</code> object.</p> <p>Here is a module <code>user.js</code> that defines and exports a <code>User</code> class.</p> <pre><code>// Export a User class\nmodule.exports = class User {\n  constructor(firstName, lastName) {\n    this.firstName = firstName;\n    this.lastName = lastName;\n    // Create user login by combining first letter of first name + last name\n    this.login = (firstName[0] + lastName).toLowerCase();\n  }\n  describe() {\n    return `${this.firstName} ${this.lastName} (login: ${this.login})`;\n  }\n};\n</code></pre> <p>Here's how to use this class in another file (located in the same folder).</p> <pre><code>// Notice the first uppercase letter, since User is a class\nconst User = require(\"./user.js\");\n\n// Create an object from this class\nconst johnDoe = new User(\"John\", \"Doe\");\n\n// Use the created object\nconsole.log(johnDoe.describe());\n</code></pre> <p></p>"},{"location":"chapter24/#nodejs-packages","title":"Node.js packages","text":"<p>The Node platform provides a way to structure an application under the form of a package.</p>"},{"location":"chapter24/#anatomy-of-a-package","title":"Anatomy of a package","text":"<p>Technically, a package is a folder containing the following elements:</p> <ul> <li>A <code>package.json</code> file which describes the application and its dependencies.</li> <li>A entry point into the application, defaulting to the <code>index.js</code> file.</li> <li>A <code>node_modules/</code> subfolder, which is the default place where Node looks for modules to be loaded into the application.</li> <li>All the other files forming the source code of the application.</li> </ul>"},{"location":"chapter24/#the-packagejson-file","title":"The <code>package.json</code> file","text":"<p>This JSON file describes the application and its dependencies: you can think of it as the app's ID document. It has a well-defined format consisting of many fields, most of them optional. The two mandatory fields are:</p> <ul> <li><code>name</code> (all lowercase letters without dots, underscores and any non-URL safe character in it).</li> <li><code>version</code> (following the semantic versioning format - more on that later).</li> </ul> <p>Below is an example of a typical <code>package.json</code> file.</p> <pre><code>{\n  \"name\": \"thejsway-node-example\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Node example for the book \\\"The JavaScript Way\\\"\",\n  \"scripts\": {\n    \"start\": \"node index.js\"\n  },\n  \"dependencies\": {\n    \"semver\": \"^7.3.8\",\n    \"moment\": \"^2.29.4\"\n  },\n  \"keywords\": [\n    \"javascript\",\n    \"node\",\n    \"thejsway\"\n  ],\n  \"author\": \"Baptiste Pesquet\"\n}\n</code></pre>"},{"location":"chapter24/#semantic-versioning","title":"Semantic versioning","text":"<p>Node packages are versioned using a format called semantic versioning. A version number is a three-digit string of the form <code>MAJOR.MINOR.PATCH</code> (example : <code>2.29.4</code>).</p> <p>Here are the rules for defining a version number:</p> <ul> <li>The very first version should be <code>1.0.0</code>.</li> <li>Bug fixes and minor changes should increment the <code>PATCH</code> digit.</li> <li>New features added in a backwards-compatible way should increment the <code>MINOR</code> digit.</li> <li>Breaking changes should increment the <code>MAJOR</code> digit.</li> </ul> <p>These strict rules exist to facilitate the management of dependencies between packages.</p>"},{"location":"chapter24/#dependencies","title":"Dependencies","text":"<p>In the <code>package.json</code> file definition, the <code>dependencies</code> field is used to declared the external packages needed by the current package. Each dependency is created with the package name followed by a version range. This version range specifies the package versions that are acceptable to use.</p> <p>There are many ways to define a version range. The most commonly used ones are:</p> <ul> <li>Targeting a very specific version. Example: <code>2.18.1</code>.</li> <li>Using the <code>~</code> operator to allow patch-level changes. For example, the <code>~2.18.1</code> version range accepts version <code>2.18.7</code>, but not <code>2.19.0</code> nor <code>3.0.0</code>.</li> <li>Using the <code>^</code> operator to allow changes that do not modify the left-most non-zero digit in the version. Examples:</li> <li>The <code>^2.18.1</code> version range accepts versions <code>2.18.7</code> and <code>2.19.0</code>, but not <code>3.0.0</code>.</li> <li>The <code>^0.2.3</code> version range accepts version <code>0.2.5</code> but not <code>0.3.0</code> nor <code>1.0.0</code>.</li> </ul> <p>Fine-tuning the targeted versions of external packages though version ranges helps limiting the risk of breaking the application apart when updating its dependencies.</p>"},{"location":"chapter24/#package-management-with-npm-or-yarn","title":"Package management with npm or yarn","text":"<p>Soon after the creation of Node.js, it became apparent that something was missing to orchestrate code sharing and reuse through modules. So npm (Node Package Manager) was born in 2010. It is still the standard package manager for the Node ecosystem, even if it is being challenged by yarn, a more recent alternative. It consists of a command line client, also called npm, and an online database of public packages, called the npm registry and accessed by the client.</p> <p></p> <p>Over 477,000 packages are now available on the registry, ready to reuse and covering various needs. This makes npm the largest ecosystem of open source libraries in the world.</p> <p>The npm client is used by typing commands in a terminal open in the package's folder. It offers numerous possibilities for managing packages. Let's study two of the most important ones.</p>"},{"location":"chapter24/#installing-dependencies","title":"Installing dependencies","text":"<p>To install all the dependencies of a package, you type the following npm command.</p> <pre><code>npm install\n</code></pre> <p>This will read the <code>package.json</code> file, look for the packages satisfying the version ranges declared in the <code>dependencies</code> field, and download and install them (and their own dependencies) in the <code>node_modules/</code> subfolder.</p>"},{"location":"chapter24/#adding-a-new-dependency","title":"Adding a new dependency","text":"<p>There are two ways for adding a new dependency to a package. The first one is to manually edit the <code>package.json</code> to declare the dependency and its associated version range. The next step is to run the following npm command.</p> <pre><code>npm update\n</code></pre> <p>This will update all the packages listed to the latest version respecting their version range, and install missing packages.</p> <p>The other way is to run the following command.</p> <pre><code>npm install &lt;package-id&gt;\n</code></pre> <p>This command will fetch a specific package from the registry, download it in the <code>node/modules/</code> subfolder and (since npm 5) update the <code>package.json</code> file to add it as a new dependency. The <code>&lt;package-id&gt;</code> parameter is usually the dependency's package name.</p>"},{"location":"chapter24/#using-a-dependency","title":"Using a dependency","text":"<p>Once external packages have been installed in <code>node_modules/</code>, the application can load them as modules with the <code>require()</code> function.</p> <p>For example, the npm registry has a semver package that handles semantic versioning. Assuming this package has been installed as a dependency, it can be used to perform manual version range checks.</p> <pre><code>// Load the npm semver package as a module\n// Notice the omission of \"./\" since the package was installed in node_modules/\nconst semver = require(\"semver\");\n\n// Check if specific versions satisfy a range\nconsole.log(semver.satisfies(\"2.19.0\", \"^2.18.1\")); // true\nconsole.log(semver.satisfies(\"3.0.0\", \"^2.18.5\")); // false\n</code></pre>"},{"location":"chapter24/#relationship-between-packages-and-modules","title":"Relationship between packages and modules","text":"<p>Let's recap what you learned so far:</p> <ul> <li>A module is anything that can be loaded with <code>require()</code>.</li> <li>A package is a Node application described by a <code>package.json</code> file.</li> </ul> <p>A package used in another Node application is loaded with <code>require()</code>, making it a module. To be loaded as a module, a package must contain an <code>index.js</code> file or a <code>main</code> field in <code>package.json</code> defining a specific entry point.</p> <p>Some packages only contain an executable command and thus cannot be loaded as modules. On the other hand, a single JavaScript file loaded with <code>require()</code> is a module but not a package, since it doesn\u2019t have a <code>package.json</code> file.</p> <p>Check out the npm documentation for more details on this aspect.</p> <p>Note</p> <p>ES modules is a newer syntax for defining and loading modules, available in recent (v15.3+) versions of Node.js. It should eventually replace CommonJS as the standard way.</p>"},{"location":"chapter24/#tldr","title":"TL;DR","text":"<ul> <li> <p>Node.js (or simply Node) is a platform built on Chrome's JavaScript engine (V8) to create JavaScript applications outside the browser.</p> </li> <li> <p>Node emphasizes modularity: instead of being monolithic, applications are designed as a set of small, focused modules working together to achieve the desired behavior.</p> </li> <li> <p>Node adheres to the CommonJS module format. It provides a <code>require()</code> for loading a module.</p> </li> <li> <p>Inside a module, the <code>module.exports</code> object is used to export pieces of code. You can add properties to it to export element. You can also reassign <code>module.exports</code> to export only a specific element.</p> </li> <li> <p>Node provides a way to structure an application under the form of a package. A package is a folder containing an application described by a <code>package.json</code> file. The default entry point of a package is the <code>index.js</code> file.</p> </li> <li> <p>Package versions are defined using the semantic versioning format: a three-digit string of the form <code>MAJOR.MINOR.PATCH</code>. This format facilitates the management of dependencies between packages.</p> </li> <li> <p>npm (Node Package Manager) is the standard package manager for the Node ecosystem. It consists of a command line client and an online registry of public packages accessed by the client. This registry is the largest ecosystem of open source libraries in the world.</p> </li> <li> <p>The main npm commands are <code>npm install</code> (to install all the dependencies of a package or adding a new one) and <code>npm update</code> (to update all the packages and install missing ones according to <code>package.json</code>).</p> </li> <li> <p>Once installed through npm, packages defined as dependencies are stored in the <code>node_modules/</code> subfolder and can be loaded as modules using <code>require()</code>.</p> </li> <li> <p>Some packages (containing only executable files or no entry point) cannot be loaded as modules. Some modules (single JavaScript files) are not packages.</p> </li> </ul>"},{"location":"chapter24/#coding-time","title":"Coding time!","text":""},{"location":"chapter24/#circles-again","title":"Circles again","text":"<p>Create a <code>circle.js</code> module exporting two functions <code>circumference()</code> and <code>area()</code>, each taking the circle radius as a parameter.</p> <p>Load this module in a <code>index.js</code> file and test the two functions.</p> <p></p>"},{"location":"chapter24/#accounting","title":"Accounting","text":"<p>Create a <code>accounting.js</code> module exporting an <code>Account</code> class containing:</p> <ul> <li>a constructor accepting an <code>owner</code>parameter;</li> <li>a <code>credit()</code> method for crediting a sum of money on the account;</li> <li>a <code>describe()</code> method for describing the account.</li> </ul> <p>Load this module in a <code>index.js</code> file and test the class.</p> <pre><code>// TODO: load the \"accounting.js\" module\n\n// Create object from the exported class\nconst myAccount = new Account(\"Jeff\");\nmyAccount.credit(150);\nconsole.log(myAccount.describe());\n</code></pre> <p></p>"},{"location":"chapter24/#playing-with-dates","title":"Playing with dates","text":"<p>The npm package moment is very popular for managing dates and times.</p> <p>Create a Node package and install the current <code>moment</code> version as a dependency. Then, load this package and use it to:</p> <ul> <li>Display the current date.</li> <li>Compute the number of years since 1976, November 26th.</li> </ul> <p></p> <p>Tip</p> <p>Use the moment documentation to discover how to use this package.</p>"},{"location":"chapter25/","title":"Create a web server","text":"<p>It's time to put your Node.js knowledge into practice and create a real-world web server in JavaScript. This is often called back-end programming.</p> <p>In this chapter, you will build exactly the server that was used in the previous chapters dealing with client-side web development.</p> <p>Tip</p> <p>To test your server code, you can go back to code examples from chapters 22 and 23, and only change the start of the server URL from <code>https://thejsway-server.herokuapp.com</code> to your own server URL (which would be <code>http://localhost:3000</code> if your server runs on your local machine).</p>"},{"location":"chapter25/#using-a-framework","title":"Using a framework","text":"<p>We saw in the previous chapter that Node.js is a platform for building JavaScript applications outside the browser. as such, Node is well suited for creating web servers in JavaScript. As a reminder, a web server is a machine dedicated to publishing resources on the Web.</p>"},{"location":"chapter25/#about-frameworks","title":"About frameworks","text":"<p>It's entirely possible to build a web server from scratch with Node, but we'll take a different approach and use a framework for it.</p> <p>In computer programming, a framework provides a standard way to design and structure an application. It typically takes care of many low-level details so that the developer can concentrate on high-level, business-related tasks.</p>"},{"location":"chapter25/#choosing-a-framework","title":"Choosing a framework","text":"<p>Among the many possible frameworks for creating a web server in JavaScript, we'll use one of the most well-known: Express. To paraphrase its website, Express is \"a minimal and flexible Node.js web application framework that provides a robust set of features for web and mobile applications\".</p> <p>In other words, Express provides a foundation on which you can easily and quickly build a web server.</p>"},{"location":"chapter25/#installing-express","title":"Installing Express","text":"<p>The Express framework is available as an npm package and its installation is straightforward. First, you'll need an existing Node application with a  <code>package.json</code> file it. Run the following command in a terminal open in your application folder to install Express as a dependency.</p> <pre><code>npm install express\n</code></pre> <p>As an alternative, you can directly add Express as a dependency in your <code>package.json</code> file and run the <code>npm install</code> command.</p> <pre><code>\"dependencies\": {\n  \"express\": \"^4.18.2\"\n},\n</code></pre>"},{"location":"chapter25/#responding-to-requests","title":"Responding to requests","text":"<p>The main job of a web server is to respond to HTTP requests. Here's the JavaScript code for a minimal Express-based web server that returns <code>\"Hello from Express!\"</code> for a request to the root URL.</p> <pre><code>// Load the Express package as a module\nconst express = require(\"express\");\n\n// Access the exported service\nconst app = express();\n\n// Return a string for requests to the root URL (\"/\")\napp.get(\"/\", (request, response) =&gt; {\n  response.send(\"Hello from Express!\");\n});\n\n// Start listening to incoming requests\n// If process.env.PORT is not defined, port number 3000 is used\nconst listener = app.listen(process.env.PORT || 3000, () =&gt; {\n  console.log(`Your app is listening on port ${listener.address().port}`);\n});\n</code></pre> <p>You can launch your server with either <code>node index.js</code> or <code>npm start</code>, then type its root URL (http://localhost:3000 if your server runs on your local machine) in a browser. You should see the message <code>\"Hello from Express!\"</code> appear.</p> <p></p> <p>Let's dissect this example.</p>"},{"location":"chapter25/#accessing-express-services","title":"Accessing Express services","text":"<p>Once Express is installed, you can load its package in your main application file and access the exported services provided by the framework. The beginning of the server code does just that.</p> <pre><code>// Load the Express package as a module\nconst express = require(\"express\");\n\n// Access the main Express object\nconst app = express();\n</code></pre>"},{"location":"chapter25/#defining-routes","title":"Defining routes","text":"<p>In web development terminology, a route is an entry point into an application. It is relative to the application URL. The <code>\"/\"</code> route matches the root of the application.</p> <pre><code>// Return a string for requests to the root URL (\"/\")\napp.get(\"/\", (request, response) =&gt; {\n  response.send(\"Hello from Express!\");\n});\n</code></pre> <p>When an HTTP request is made to the route URL, the associated callback function is executed. This function takes as parameters objects representing the HTTP request and response. Here, the function body sends a text response with the content <code>\"Hello from Express!\"</code>.</p>"},{"location":"chapter25/#listening-to-requests","title":"Listening to requests","text":"<p>To process incoming request, a web server must listen on a specific port. A port is a communication endpoint on a machine.</p> <p>The main Express object has a <code>listen()</code> method that tasks as parameter the listening port and a callback function called for each request. The last part of the server code calls this method to start listening.</p> <pre><code>// Start listening to incoming requests\n// If process.env.PORT is not defined, 3000 is used\nconst listener = app.listen(process.env.PORT || 3000, () =&gt; {\n  console.log(`Your app is listening on port ${listener.address().port}`);\n});\n</code></pre>"},{"location":"chapter25/#creating-an-api","title":"Creating an API","text":"<p>Your web server is pretty limited for now, handling only one route and always returning the same string. Let's create your own little API by publishing some data in JSON format.</p>"},{"location":"chapter25/#enabling-ajax-requests","title":"Enabling AJAX requests","text":"<p>In a previous chapter, we talked about cross-origin requests (from one domain to another). Authorizing them on your server is mandatory to accept AJAX calls from clients.</p> <p>Enabling CORS on an Express web server is done by adding the following code in your main application file.</p> <pre><code>// Enable CORS (see https://enable-cors.org/server_expressjs.html)\napp.use((req, res, next) =&gt; {\n  res.header(\"Access-Control-Allow-Origin\", \"*\");\n  res.header(\n    \"Access-Control-Allow-Headers\",\n    \"Origin, X-Requested-With, Content-Type, Accept\"\n  );\n  next();\n});\n</code></pre> <p>This is an example of a middleware: code that runs somewhere between the reception of the HTTP request and the sending of the HTTP response.</p>"},{"location":"chapter25/#exposing-data","title":"Exposing data","text":"<p>To match what was done on the client side in a previous chapter, we'll publish some blog articles. The API route is <code>\"/api/articles\"</code>, and the associated callback return a list of JavaScript objects.</p> <p>Here's the code to be added to the server just before the last part (the one that starts the listening).</p> <pre><code>// Define an article list\nconst articles = [\n  { id: 1, title: \"First article\", content: \"Hello World!\" },\n  {\n    id: 2,\n    title: \"Lorem ipsum\",\n    content:\n      \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut hendrerit mauris ac porttitor accumsan. Nunc vitae pulvinar odio, auctor interdum dolor. Aenean sodales dui quis metus iaculis, hendrerit vulputate lorem vestibulum.\"\n  },\n  {\n    id: 3,\n    title: \"Lorem ipsum in French\",\n    content:\n      \"J\u2019en dis autant de ceux qui, par mollesse d\u2019esprit, c\u2019est-\u00e0-dire par la crainte de la peine et de la douleur, manquent aux devoirs de la vie. Et il est tr\u00e8s facile de rendre raison de ce que j\u2019avance.\"\n  }\n];\n\n// Return the articles list in JSON format\napp.get(\"/api/articles\", (request, response) =&gt; {\n  response.json(articles);\n});\n</code></pre> <p>When accessing the <code>\"/api/articles\"</code> route (http://localhost:3000/api/articles if your server runs locally) with a browser or a specialized tool like Postman or RESTClient, you should see the article list in JSON format.</p> <p></p>"},{"location":"chapter25/#accepting-data","title":"Accepting data","text":"<p>So far, your web server offers a read-only service: it publishes some data but doesn\u2019t accept any... Until now!</p> <p>As you saw in a previous chapter, information submitted to a web server can be either form data or JSON data.</p>"},{"location":"chapter25/#handling-form-data","title":"Handling form data","text":"<p>Form data comes encapsulated into the HTTP <code>POST</code> request sent by the client to the server. The first server task is to extract this information from the request. The simplest way to do this is to use a specialized npm package, such as multer. Install it with the <code>npm install multer</code> command or directly in your app dependencies.</p> <pre><code>\"dependencies\": {\n  ...\n  \"multer\": \"^1.4.5-lts.1\"\n},\n</code></pre> <p>Once multer is installed, add the following code towards the beginning of your server main file.</p> <pre><code>// Load the multer package as a module\nconst multer = require(\"multer\");\n\n// Access the exported service\nconst upload = multer();\n</code></pre> <p>The following route accepts form data sent to the <code>\"/animals\"</code> route. Notice the use of <code>app.post()</code> instead of <code>app.get()</code> to handle <code>POST</code> HTTP requests, and the addition of <code>upload.array()</code> as a second parameter to add a <code>body</code> object containing the fields of the form to the <code>request</code> object.</p> <pre><code>// Handle form data submission to the \"/animals\" route\napp.post(\"/animals\", upload.array(), (request, response) =&gt; {\n  const name = request.body.name;\n  const vote = request.body.strongest;\n  response.send(`Hello ${name}, you voted: ${vote}`);\n});\n</code></pre> <p>The values of the <code>name</code> and <code>vote</code> variables are extracted from the request body, and a string is constructed and sent back to the client.</p> <p></p>"},{"location":"chapter25/#handling-json-data","title":"Handling JSON data","text":"<p>Managing incoming JSON data requires parsing it from the received <code>POST</code> request. Using an npm package like body-parser is the easiest solution. Install it with the <code>npm install body-parser</code> command or directly in your app dependencies.</p> <pre><code>\"dependencies\": {\n  ...\n  \"body-parser\": \"^1.20.1\"\n},\n</code></pre> <p>Then, add the following code towards the beginning of your server main file.</p> <pre><code>// Load the body-parser package as a module\nconst bodyParser = require(\"body-parser\");\n\n// Access the JSON parsing service\nconst jsonParser = bodyParser.json();\n</code></pre> <p>The following code handle <code>POST</code> requests to the <code>\"/api/cars\"</code> route. JSON data is parsed by <code>jsonParser</code> and defined as the request body.</p> <pre><code>// Handle submission of a JSON car array\napp.post(\"/api/cars\", jsonParser, (request, response) =&gt; {\n  const cars = request.body;\n  response.send(`You sent me a list of cars: ${JSON.stringify(cars)}`);\n});\n</code></pre> <p></p>"},{"location":"chapter25/#publishing-web-pages","title":"Publishing web pages","text":"<p>Finally, let's learn how to serve HTML content so that your web server can come into its own.</p> <p>For example, <code>GET</code> HTTP requests to the <code>\"/hello\"</code> route should show a basic web page. A naive way to do so would be to simply return an HTML string.</p> <pre><code>// Return HTML content for requests to \"/hello\"\napp.get(\"/hello\", (request, response) =&gt; {\n  const htmlContent = `&lt;!doctype html&gt;\n    &lt;html&gt;\n    &lt;head&gt;\n      &lt;meta charset=\"utf-8\"&gt;\n      &lt;title&gt;Hello web page&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n      Hello!\n    &lt;/body&gt;\n    &lt;/html&gt;`;\n  response.send(htmlContent);\n});\n</code></pre> <p>However, things would quickly get out of hands as the complexity of the web page grows. A better solution is to define the HTML content in an external file stored in a dedicated subfolder, and return that file as a result of the request.</p> <p>For example, create a subfolder named <code>views</code> and a file named <code>hello.html</code> inside it. Give the HTML file the following content.</p> <pre><code>&lt;!doctype html&gt;\n&lt;html&gt;\n\n&lt;head&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;title&gt;Hello web page&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;h2&gt;Hello web page&lt;/h2&gt;\n    &lt;div id=\"content\"&gt;Hello!&lt;/div&gt;\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre> <p>Then, update the callback for the <code>\"/hello\"</code> route to send the HTML file as the request response.</p> <pre><code>// Return a web page for requests to \"/hello\"\napp.get(\"/hello\", (request, response) =&gt; {\n  response.sendFile(`${__dirname}/views/hello.html`);\n});\n</code></pre> <p>Pointing your browser to the <code>\"/hello\"</code> URL (http://localhost:3000/hello if your server runs locally) should now display the web page.</p> <p></p> <p>Most web pages will need to load client-side resources such as images, CSS and JavaScript files. A common practice is to put these assets in a dedicated subfolder.</p> <p>For example, create a <code>public</code> subfolder and a <code>hello.js</code> JavaScript file inside it with the following content.</p> <pre><code>// Update the \"content\" DOM element\ndocument.getElementById(\"content\").textContent = \"Hello from JavaScript!\";\n</code></pre> <p>You should now have the following folder structure for your server.</p> <p></p> <p>Update the <code>hello.html</code> to load this JavaScript file.</p> <pre><code>&lt;script src=\"/hello.js\"&gt;&lt;/script&gt;\n</code></pre> <p>Lastly, you must tell Express that client assets are located in the <code>public</code> subfolder, so that the server can serve them directly. Add the following code towards the beginning of your main application file.</p> <pre><code>// Serve content of the \"public\" subfolder directly\napp.use(express.static(\"public\"));\n</code></pre> <p>Accessing the <code>\"/hello\"</code> URL shows you a slightly different result. The <code>hello.js</code> file was loaded and executed by the browser, updating the web page content.</p> <p></p> <p>In this example, JavaScript was used both for back-end (server side) and front-end (client side) programming. This is one of its core strengths: knowing only one programming language empowers you to create complete web applications. How great is that?</p>"},{"location":"chapter25/#tldr","title":"TL;DR","text":"<ul> <li> <p>The Node.js platform is well suited for creating web servers in JavaScript, with or without the help of a framework.</p> </li> <li> <p>A framework provides a standard way to design and structure an application. Express is a common choice for building a web server with Node.</p> </li> <li> <p>In order to respond to requests, an Express app defines routes (entry points associated to URLs) and listens to incoming HTTP requests.</p> </li> <li> <p>The main Express method are <code>get()</code> to handle a <code>GET</code> request, <code>post()</code> to handle a <code>POST</code> request and <code>use()</code> to define a middleware (code that runs during the request/response cycle).</p> </li> <li> <p>Incoming form or JSON data can be managed through specialized packages like multer and body-parser.</p> </li> <li> <p>JavaScript can be used on both the client side (browser) and the server side of a web application. This empowers you to create complete web applications.</p> </li> </ul>"},{"location":"chapter25/#coding-time","title":"Coding time!","text":""},{"location":"chapter25/#t-shirt-color","title":"T-shirt color","text":"<p>Add a <code>\"/tshirt\"</code> route to your server for handling the submission of form data containing a <code>size</code> and a <code>color</code> field, like in a previous example. In the route callback, send back a confirmation message to the client.</p> <p></p>"},{"location":"chapter25/#visited-countries","title":"Visited countries","text":"<p>Add a <code>\"/api/countries\"</code> route to your server to manager traveler information received as JSON data, like in a previous exercise. In the route callback, send back a confirmation message to the client.</p> <p></p>"},{"location":"chapter25/#new-article","title":"New article","text":"<p>Add a <code>\"/articles\"</code> route to your server. This route should accept a new blog article as form data and add it to the server's article list, like in the chapter 23 exercise. The new article ID must be equal to the maximum ID among existing articles plus one.</p> <p></p>"},{"location":"chapter26/","title":"Project: a social news web app","text":"<p>This final project is the culmination of the book. You can check out the expected result. Good luck!</p>"},{"location":"chapter26/#objective","title":"Objective","text":"<p>This project builds upon the social news program and web page you created previously. This time, the objective is to make a social news application based on a Node.js server.</p>"},{"location":"chapter26/#functional-requirements","title":"Functional requirements","text":"<ul> <li>A link is defined by its title, its URL and its author (submitter).</li> <li>If a new link URL does not start with <code>\"http://\"</code> or <code>\"https://\"</code>, <code>\"http://\"</code> is automatically added at its beginning.</li> <li>The web app displays a list of at least three already existing links, fetched from the server through an AJAX request.</li> <li>A button exists for the user to submit a new link. When clicked, a form appears before the link list to input the new link properties (author, title and URL).</li> <li>In this form, all link fields are mandatory.</li> <li>When the new link is validated by the user, it is sent as form data to the server. If the operation is successful, the server returns the new link as JSON data. The new link is added at the top of the link list, replacing the form. A message indicates the success of the operation, then disappears after two seconds.</li> </ul>"},{"location":"chapter26/#technical-requirements","title":"Technical requirements","text":"<ul> <li>The server must use a user-defined module exporting link-related code.</li> <li>You should reuse any useful code from the previous projects.</li> <li>All your code should be correctly indented.</li> <li>Names should be wisely chosen and adhere to the camelCase convention.</li> <li>Code duplication should be avoided.</li> </ul>"},{"location":"chapter26/#expected-result","title":"Expected result","text":"<p>Here are a few screenshots of the expected result.</p> <p></p> <p></p> <p></p> <p></p>"},{"location":"concl01/","title":"Summary and perspectives","text":"<p>You made it to the end of this book. Congratulations! So what's next?</p>"},{"location":"concl01/#key-takeaways","title":"Key takeaways","text":"<p>This book covers a lot of ground. Here are the essential points you should understand and remember.</p> <ul> <li> <p>JavaScript is a programming language created in 1995 for adding interactivity to web pages. Still the language of the web, it has also pervaded many other environments: servers, mobile devices, connected objects, etc.</p> </li> <li> <p>JavaScript has been standardized under the name ECMAScript and is continuously improved. Its latest major version is ES2015, previously known as ES6. The language is yearly improved ever since.</p> </li> <li> <p>JavaScript is dynamically typed: the type of a variable is deduced from the value stored in it.</p> </li> <li> <p>JavaScript is a multi-paradigm language: you can write programs using an imperative, object-oriented or functional programming style.</p> </li> <li> <p>JavaScript's object-oriented model is based on prototypes.</p> </li> <li> <p>When run into a browser for front-end programming, JavaScript can use the DOM (Document Object Model) to access and update dynamically the structure of a web page.</p> </li> <li> <p>JavaScript can send AJAX calls (asynchronous HTTP requests) to exchange data with web servers or use web APIs, enabling the creation of web applications through back-end programming.</p> </li> <li> <p>The Node.js platform, created in 2009 and built on Chrome's V8 engine, brought JavaScript outside the browser.</p> </li> <li> <p>Node emphasizes modularity. Its npm package registry is the largest ecosystem of open source libraries in the world.</p> </li> </ul>"},{"location":"concl01/#the-road-ahead","title":"The road ahead","text":"<p>This book is designed to be the first step of a JavaScript-centered learning path. I hope it inspired you to go further. If so, you are only at the beginning of a long and exciting journey!</p> <p>If you feel overwhelmed for now, take heart: Rome wasn\u2019t built in a day. Grasping the concepts of programming takes time and practice. Don\u2019t get discouraged and be sure to follow the guidelines provided in the next few paragraphs.</p> <p>Note</p> <p>All external resources listed in thie chapter are freely available online, although some of them require registration or are also sold in another format. They were picked for their relevance, without any affiliation.</p>"},{"location":"concl01/#keep-on-practicing","title":"Keep on practicing","text":"<p>This is by far the most important advice. Nothing will sharpen your skills and make you more confident as a JavaScript developer than practicing your craft on a regular basis.</p> <p>In particular, I urge you to start building a personal project right now. This is the best solution to stay focused and create something meaningful while having fun along the way.</p> <p>You may already have a project idea in the back of your mind. If not, here are a few things you could build:</p> <ul> <li>An interactive quiz application.</li> <li>A client for your favorite social network.</li> <li>A contact or TODO list manager.</li> <li>A simple game, like the famous Connect 4.</li> <li>(Many more ideas here).</li> </ul> <p>Still undecided or looking for more? Take Wes Bos' JavaScript30 coding challenge and build 30 things in 30 days. Yes you can!</p>"},{"location":"concl01/#get-a-deeper-understanding-of-the-language","title":"Get a deeper understanding of the language","text":"<p>You hopefully learnt a lot already, but JavaScript is a surprisingly deep language that still has a lot in store for you. Some prominent resources to strengthen your knowledge are:</p> <ul> <li>Kyle Simpson's You Don\u2019t Know JS Yet, a book series diving deep into the core mechanisms of the language.</li> <li>Axel Rauschmayer's authoritative blog and books.</li> <li>Marijn Haverbeke's Eloquent JavaScript, a reference book in the JS world.</li> <li>Ilya Kantor's javascript.info, an online tutorial with a lot of interesting content.</li> <li>The JavaScript section of the Mozilla Developer Network, full of reference material, guides and tutorials.</li> </ul>"},{"location":"concl01/#get-social","title":"Get social","text":"<p>JavaScript's popularity is peaking. Why not becoming a part of its huge developer community?</p> <p>Thanks to code sharing platforms like GitHub, you can easily look for examples of code, see how other developers work and even get involved in a project. That's the beauty of open source!</p> <p>When facing a problem, knowing how to find the best answers is a critical skill. Stack Overflow is your best bet for asking questions and sharing knowledge with tons or other developers.</p> <p>Lastly, you could join a learning community in order to share experiences (good or bad) and build relationships. There are JavaScript user groups in many cities of the world, look for one in your neighborhood. Should you prefer socializing online, Quincy Larson's freeCodeCamp features a broad curriculum including many projects and a helpful, beginner-friendly community.</p> <p>Whichever road you may take, I wish you a great journey into the wonderful world of JavaScript!</p>"},{"location":"concl02/","title":"Acknowledgments","text":"<p>This book was built upon two online courses I authored for the french EdTech company OpenClassrooms. Thanks to Jessica Mautref for her watchful eye during the writing process, and to Emily Reese for the initial English translation. Both also contributed many good ideas.</p> <p>I've been inspired by JavaScript experts who decided to publish their books in an open way: Kyle Simpson, Nicholas C. Zakas, Axel Rauschmayer and Marijn Haverbeke.</p> <p>Thanks to everyone who contributed to this content. I am especially grateful to the wonderful translation team: roxerto (Spanish) and Adi Setiawan (Indonesian).</p> <p>The following individuals helped improve the book quality: Gilad Penn, NewMountain, Emre Akbudak, opheron, Theo Armour, Filip Bia\u0142ek, KeelyBird, Juhani Niinimaa, Louis Rainier, Chandan Rai, ScottyRotten, SrZorro, Frank Paulo Filho, Ryan Lindsey, Michael Dilger, Ramil Muratov, Ganesh Kumar Kattamuri, Samuel Fuller Thomas, Florian Loch, Daniel Sorichetti, Jake Ingman, John Hassell, Conrad Knapp, Ahmed Shamim, Vse Mozhet Byt, AGCB, William Friesen, Robert Morrison, Derek Houck, Zac Walberer, Tom Paoletti, Luk\u00e1\u0161 Bacig\u00e1l, Annie Baraban, alee156, Ahmed Zeeshan, Matthew Loseke, M Afiq, Justin Crabtree, Marco Dahms, Miguel T Rivera, Alfonso Millan, Josue Daniel Guerrero Ballestero, dantelyon, harubi, SuchirAgarwal, barbaralaw, kriskoeh, resourcefulmind, roxerto, FoleyDom, abgutmann, Mike93.</p> <p>Illustration credits:</p> <ul> <li>Cover photo by Julian Hochgesang.</li> <li>ECMAScript Releases: The Deep Roots of Javascript Fatigue.</li> </ul>"},{"location":"intro01/","title":"About this book","text":"<p>First thing first: thanks for having chosen this book. I hope reading it will be both beneficial and pleasurable to you.</p>"},{"location":"intro01/#who-this-book-is-for","title":"Who this book is for","text":"<p>This book is primarily designed for beginners. Having taught programming basics to hundreds of students, I tried to write it in the most friendly and accessible way possible. My goal was that no matter their background, everyone interested in programming should be able to follow along without too much difficulty.</p> <p>However, this book can also be useful to people having some experience in software development. The JavaScript language is kind of a strange beast. It shares some similarities with other well-known programming languages such as Java or C#, starting with its syntax. On the other hand, JavaScript has a lot of unique characteristics that are worth learning. This book covers a fair number of them. As such, it will be of interest to those wanting to get serious with JavaScript or needing their skills refreshed with the latest language evolutions.</p>"},{"location":"intro01/#book-structure","title":"Book structure","text":"<p>This book is divided into three main parts. The first one teaches the basics of programming with JavaScript. The second one explains how to use JavaScript to create interactive web pages. The third one deals with web application development on both the client and server sides. Each part depends on the previous ones, but there's no other prerequisite to reading.</p> <p>Each chapter ends with a TL;DR paragraph which summarizes it, so you'll be able to skip ahead if you already know a chapter's content.</p> <p>At the end of each chapter, a series of short and focused exercises will make you put your newly acquired skills into practice. Each part ends with a project guiding you in the creation of a social news web application.</p>"},{"location":"intro02/","title":"Welcome to programming","text":"<p>You're about to begin a great journey! Let's start it by talking about programming and the programmer's role.</p>"},{"location":"intro02/#whats-in-a-program","title":"What's in a program?","text":"<p>Since their invention in the 1950s, computers have revolutionized our daily lives. Calculating a route from a website or a GPS, booking a train or plane ticket, or seeing and chatting with friends on the other side of the world: all these actions are possible thanks to computers.</p> <p>What is a computer?</p> <p>Let's take the term \"computer\" in its broadest sense, meaning a machine that can perform arithmetic and logical operations. It could mean either a desktop or laptop computer (PC, Mac), a computing server, or a mobile device like a tablet or smartphone.</p> <p>Nonetheless, a computer can only perform a series of simple operations when instructed to do so. They normally have no ability to learn, judge, or improvise. They simply do what they're told to do! Their value comes from how they can quickly handle and process huge amounts of information.</p> <p>A computer often requires human intervention. That's where programmers and developers come in! They write programs that result in instructions to a computer.</p> <p>A computer program (also called an application or software) is usually comprised of one or more text files containing commands in the form of code. This is why developers are also called coders.</p> <p>A programming language is a way to give orders to a computer. It's a bit like a human language! Each programming language has vocabulary (keywords that each play a specific role) and grammar (rules defining how to write programs in that language).</p>"},{"location":"intro02/#how-do-you-create-programs","title":"How do you create programs?","text":""},{"location":"intro02/#closest-to-the-hardware-assembly-language","title":"Closest to the hardware: assembly language","text":"<p>The only programming language directly understandable by a computer is machine language. A more human-readable representation of machine language is assembly language. It is a set of very primitive operations linked to a specific family of processors (the computer's \"brain\") and manipulating its memory.</p> <p>Here's an example of a basic program written in assembly language. It displays <code>\"Hello\"</code> to the user.</p> <pre><code>str:\n    .ascii \"Hello\\n\"\n    .global _start\n\n_start:\nmovl $4, %eax\nmovl $1, %ebx\nmovl $str, %ecx\nmovl $8, %edx\nint $0x80\nmovl $1, %eax\nmovl $0, %ebx\nint $0x80\n</code></pre> <p>Pretty scary, isn\u2019t it? Fortunately, other programming languages are much simpler and convenient to use than assembly language.</p>"},{"location":"intro02/#the-large-family-of-programming-languages","title":"The large family of programming languages","text":"<p>There are a large number of programming languages, each adapted to different uses and with its own syntax. However, there are similarities between the most popular programming languages. For example, here's a simple program written in Python:</p> <pre><code>print(\"Hello\")\n</code></pre> <p>You can also write the same thing in PHP:</p> <pre><code>&lt;?php echo(\"Hello\\n\"); ?&gt;\n</code></pre> <p>Or even C#:</p> <pre><code>Console.WriteLine(\"Hello\");\n</code></pre> <p>What about Java?</p> <pre><code>System.out.println(\"Hello\");\n</code></pre> <p>All these programs display <code>\"Hello\"</code> through a different set of instructions.</p>"},{"location":"intro02/#program-execution","title":"Program execution","text":"<p>The fact of asking a computer to process the orders contained in a program is called execution. Regardless of which programming language is used, a program must be translated into assembly code in order to be executed. The translation process depends on the language used.</p> <p>With some languages, the translation into assembly code happens line by line in real time. In this case, the program is executed like a human reads a book, starting at the top and working down line-by-line. These languages are said to be interpreted. Python and PHP are examples of interpreted languages.</p> <p>Another possibility is to read and check for errors throughout the whole source code before execution. If no errors are detected, an executable targeting one specific hardware platform is generated. The intermediate step is called compilation, and the programming languages which use it are said to be compiled.</p> <p>Lastly, some languages are pseudo-compiled in order to be executed on different hardware platforms. This is the case for the Java language and also for those of the Microsoft .NET family (VB.NET, C#, etc).</p>"},{"location":"intro02/#learn-to-code","title":"Learn to code","text":""},{"location":"intro02/#introduction-to-algorithms","title":"Introduction to algorithms","text":"<p>Except in very simple cases, you don\u2019t create programs by writing source code directly. You'll first need to think about the instructions you'll want to convey.</p> <p>Take a concrete example from everyday life: I want to make a burrito. What are the steps that will enable me to achieve my goal?</p> <pre><code>Begin\n    Get out the rice cooker\n    Fill it with rice\n    Fill it with water\n    Cook the rice\n    Chop the vegetables\n    Stir-fry the vegetables\n    Taste-test the vegetables\n        If the veggies are good\n            Remove them from the stove\n        If the veggies aren\u2019t good\n            Add more pepper and spices\n        If the veggies aren\u2019t cooked enough\n            Keep stir-frying the veggies\n    Heat the tortilla\n    Add rice to tortilla\n    Add vegetables to tortilla\n    Roll tortilla\nEnd\n</code></pre> <p></p> <p>You reach your goal by combining a set of actions in a specific order. There are different types of actions:</p> <ul> <li>Simple actions (\"get out the rice cooker\")</li> <li>Conditional actions (\"if the veggies are good\")</li> <li>Actions that are repeated (\"keep stir-frying the veggies\")</li> </ul> <p>We used a simple writing style, not a specific programming language. In fact, we just wrote what is called an algorithm. We can define an algorithm as an ordered sequence of operations for solving a given problem. An algorithm breaks down a complex problem into a series of simple operations.</p>"},{"location":"intro02/#the-role-of-the-programmer","title":"The role of the programmer","text":"<p>Writing programs that can reliably perform expected tasks is a programmer's goal. A beginner can learn to quickly create simple programs. Things get more complicated when the program evolves and becomes more complex. It takes experience and a lot of practice before you feel like you'll control this complexity! Once you have the foundation, the only limit is your imagination!</p> <p>Quote</p> <p>\u201cThe computer programmer is a creator of universes for which he alone is the lawgiver. No playwright, no stage director, no emperor, however powerful, has ever exercised such absolute authority to arrange a stage or field of battle and to command such unswervingly dutiful actors or troops.\u201c (Joseph Weizenbaum)</p>"},{"location":"intro02/#tldr","title":"TL;DR","text":"<ul> <li> <p>A computer is a machine whose role is to execute quickly and flawlessly a series of actions given to it.</p> </li> <li> <p>A program is a list of actions given to a computer. These actions take the form of textual commands. All these commands form the program's source code.</p> </li> <li> <p>The programmer's task is to create programs. To accomplish this goal, he can use different programming languages.</p> </li> <li> <p>Before writing code, one must think ahead and decompose the problem to be addressed in a series of elementary operations forming an algorithm.</p> </li> </ul>"},{"location":"intro03/","title":"Introducing JavaScript","text":"<p>It's time to get acquainted with the main topic of this whole book: JavaScript!</p>"},{"location":"intro03/#a-brief-history-of-javascript","title":"A brief history of JavaScript","text":"<p>JavaScript is first and foremost the programming language of the web. It was invented in 1995 by Brendan Eich, who at the time worked for Netscape Communications, the company which created the first popular web browser by the same name.</p> <p>Info</p> <p>A web browser is the software you use to visit webpages and use web applications.</p> <p>Warning</p> <p>JavaScript should not be confused with Java, another programming language invented at the same time. Both share a similar syntax, but their use cases and design principles are very different.</p> <p>The idea behind JavaScript was to create a simple language to make web pages dynamic and interactive. Back then, pages were very simple.</p> <p></p> <p>Web builders started gradually enriching their pages by adding JavaScript code. For this code to work, the recipient web browser (the software used to surf the web) had to be able to process JavaScript. This language has been progressively integrated into browsers, and now all browsers are able to handle it!</p> <p>Because of the explosion of the Web and the advent of the web 2.0 (based on rich, interactive pages), JavaScript has become increasingly popular. Web browser designers have optimized the execution speed of JavaScript, which means it's now a very fast language.</p> <p>This led to the emergence of the Node.js platform, which allows you to create JavaScript applications outside the browser. Thanks to a software called MongoDB, JavaScript has even entered the database world (software whose role is to store information).</p> <p>Finally, the popularity of smartphones and tablets with different systems (iOS, Android, Windows Phone) has led to the emergence of so-called cross-platform development tools. They allow you to write a single mobile application that's compatible with these systems. These tools are almost always based on... JavaScript!</p>"},{"location":"intro03/#javascript-an-essential-language","title":"JavaScript: an essential language","text":"<p>In short, JavaScript is everywhere. It sits on top of a rich ecosystem of components (small software bricks that you can easily plug into your project) and a vibrant developer community. Knowing it will open the doors of the web browser-side programming (known as front-end development), server side development (back-end), and mobile development. A number of people see JavaScript as the most important technology in software development nowadays.</p> <p>Both ubiquitous and still relatively easy to learn, JavaScript is also a good choice as a first language for learning programming.</p>"},{"location":"intro03/#version-used-in-this-book","title":"Version used in this book","text":"<p>JavaScript was standardized in 1997 under the name ECMAScript. Since then, the language has undergone several rounds of improvements to fix some awkwardness and support new features.</p> <p></p> <p>In 2015, JavaScript versions began to be named by year. That year's release (ES2015, initially named ES6), introduced a lot of interesting novelties, many of them quickly adopted by the JavaScript developer community.</p> <p>Moving away from big, infrequent releases, the JavaScript language since receives incremental updates on a yearly basis. New language features are gradually baked in JavaScript platforms through subsequent software updates. This is one of the reasons your web browser keeps updating itself!</p> <p>This book targets the ES2016 language version. It is now well supported by most environments and platforms.</p>"},{"location":"intro03/#tldr","title":"TL;DR","text":"<ul> <li> <p>Originally created to animate web pages, the JavaScript language can now be used almost everywhere, from servers to mobile apps and connected devices.</p> </li> <li> <p>JavaScript is becoming essential for many software developers. It is a good choice as a first language for learning programming.</p> </li> <li> <p>It's been standardized under the name ECMAScript and is continuously improved ever since.</p> </li> <li> <p>The JavaScript version used in this book is ES2016. It is well supported by most environments.</p> </li> </ul>"},{"location":"intro04/","title":"Environment setup","text":"<p>Let's make you able to get your feet wet with JavaScript by setting up your work environment.</p> <p>Tip</p> <p>You should read the whole chapter before going ahead and deciding on a setup method.</p> <p>Depending on how eager you are to get into the action and how comfortable you feel setting up your local machine, you may follow along this book by either:</p> <ul> <li>coding online, leveraging free and feature-packed JavaScript playgrounds;</li> <li>using a local development environment.</li> </ul> <p>First option is the easiest and quickest; second one is more powerful and will probably become necessary as you tackle bigger programming challenges in a not-so-distant future.</p> <p>Tip</p> <p>Simply reading along the book is not enough: coding along is mandatory to get a real grasp of how things work and become a capable programmer. So be sure to test every code sample and search every exercise and project!</p>"},{"location":"intro04/#prerequisite-a-modern-browser","title":"Prerequisite: a modern browser","text":"<p>Whichever option you may choose for your work environment, you'll need a web browser able to run code written in recent flavors of JavaScript.</p> <p>The safest bet is to choose either Google Chrome or Mozilla Firefox, two \"evergreen\" (self-updated) browsers with excellent JavaScript support. Other capable browsers include Opera, Brave and Microsoft Edge. On the contrary, stay away from all versions of Internet Explorer which will have serious issues with ES2016+ code.</p>"},{"location":"intro04/#solution-1-coding-online","title":"Solution 1: coding online","text":"<p>Maybe you're a little bit of the impatient type, or maybe you'd rather not (or haven\u2019t the right privileges to) set up your local machine right now. Fortunately, several online services, often called playgrounds, allow you to type and run JavaScript code directly from your browser. All you'll need in addition is an active Internet connection.</p> <p>For chapters 1 to 23, you'll need a front-end coding playground able to understand and combine HTML, CSS and JavaScript code. There is a handful of free front-end playgrounds online. Good examples are CodePen, JSFiddle and JS Bin.</p> <p>About CodePen</p> <p>If you choose to use CodePen, you really should start by visiting Welcome to CodePen. It introduces the platform in a very friendly way and gives you everything you need to get started.</p> <p>Starting with chapter 24, a back-end playground will be necessary to create Node.js applications.</p> <p>What is Node.js?</p> <p>Node.js (or simply Node) is a platform for running JavaScript code outside the browser. We'll cover this topic in detail in the third part of this book.</p> <p>A prominent choice for tinkering with Node.js online is Glitch, a platform for quickly building Node-based web applications. Glitch emulates a local Node setup and automates things like code execution, package management, hosting and deployment. You can also remix (clone) any Glitch app to personalize it for your needs. You can learn more about Glitch here and start by remixing this project.</p> <p>Another valuable option is Replit, an online coding environment with which you can create front-end and back-end applications with JavaScript (among many other platforms). The Replit documentation is a good place to start.</p>"},{"location":"intro04/#solution-2-using-a-local-development-environment","title":"Solution 2: using a local development environment","text":"<p>Setting up your local machine takes a bit of work, but will ultimately give you a tailored and powerful environment. This is also your only choice if you need to work offline.</p>"},{"location":"intro04/#install-a-code-editor","title":"Install a code editor","text":"<p>At heart, programming is typing code as text in a number of files. To actually program, you'll need to use a code editor on your machine.</p> <p>The choice is vast here, and you may already have previous experience and personal preferences. A few highlights are Visual Studio Code (used as reference in this book), Brackets, Atom and Sublime Text.</p> <p>Once you have a code editor installed on your local machine, you can either:</p> <ul> <li>build your own JavaScript environment;</li> <li>start with a ready-made environment specifically crafted for this book.</li> </ul> <p>Let's discuss these two methods.</p>"},{"location":"intro04/#solution-a-build-your-own-development-environment","title":"Solution a: build your own development environment","text":"<p>In this scenario, you'll install and configure each piece of your JavaScript development toolchain manually.</p>"},{"location":"intro04/#install-nodejs-and-npm","title":"Install Node.js and npm","text":"<p>To set up Node on your local machine, download the latest version here, execute the downloaded file then follow the instructions.  The npm package manager is automatically installed along with Node.</p>"},{"location":"intro04/#install-a-code-formatter-and-a-linter","title":"Install a code formatter and a linter","text":"<p>Over the years, a lot of tools have been created to ease a JavaScript developer's life. In particular, two kinds of tools are of great interest to any JavaScript professional:</p> <ul> <li>A code formatter frees you from the burden of formatting your code manually and improves consistency. Prettier is the current standard.</li> <li>A linter can greatly improve your code's quality, detecting bugs and enforcing good practices. ESLint is a common choice.</li> </ul> <p>The easiest way to set up these tools is to add them as extensions (sometimes named add-ons) to your code editor. For Visual Studio Code, use the following links for Prettier and ESLint. Follow the instructions provided in their documentation to setup them.</p> <p>Info</p> <p>Refer to the style guide for more information about configuring ESLint.</p>"},{"location":"intro04/#organize-your-code","title":"Organize your code","text":"<p>It's important to set up your basic folder and file structure before actually starting to code. That way, your project will be organized, and you'll be starting off with some good programming habits.</p> <p>You should have a folder in your storage disk dedicated to coding along this book. The folder name doesn\u2019t matter, <code>thejsway-code</code> will do nicely. All local files you subsequently create will be stored in subfolders of this root folder. The most logical solution is to create a subfolder for each chapter of the book.</p> <p>You can either use a predefined folder structure or follow the next few paragraphs to create this folder structure by hand.</p>"},{"location":"intro04/#for-chapters-1-to-23","title":"For chapters 1 to 23","text":"<p>In these chapters, you'll execute your JavaScript code through the browser. Your files will be stored according to their type: HTML files (the ones with an <code>.html</code> extension) in an <code>html</code> subfolder, CSS files (<code>.css</code>) in a <code>css</code> subfolder and JavaScript files (<code>.js</code>) in a <code>js</code> subfolder. Each chapter is set up in a series of folders as follows.</p> <p></p> <p>For examples and each exercise of a chapter, create an HTML file in the <code>html</code> subfolder of the chapter folder. In these HTML files, a <code>&lt;script&gt;</code> will load the associated JavaScript code.</p> <pre><code>&lt;!doctype html&gt;\n&lt;html&gt;\n\n&lt;head&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;title&gt;Code examples&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;!-- If necessary, HTML code goes here --&gt;\n    &lt;!-- ... --&gt;\n\n    &lt;!-- Load the JavaScript code located in the examples.js file&gt;\n    &lt;script src=\"../js/examples.js\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre> <p>This <code>&lt;script&gt;</code> tag asks the browser to load the <code>examples.js</code> JavaScript file, located at path <code>../js/examples.js</code>. The two dots (<code>..</code>) at the beginning of the path indicate you're going back one level in the directory structure relative to the HTML file itself before looking in the <code>js</code> subfolder for a file named <code>examples.js</code>.</p> <p>Opening the HTML file in your web browser will trigger the execution of the JavaScript code stored in the <code>.js</code> file. Its result will be shown in the browser console (see below).</p>"},{"location":"intro04/#from-chapter-24-onwards","title":"From chapter 24 onwards","text":"<p>In these chapters, you'll create Node.js applications to execute your JavaScript code. Each Node app must sit in its own folder and is described by a <code>package.json</code> file located at the root of this folder. Subdirectories may be used to store specific files:</p> <ul> <li><code>node_modules</code> (automatically created) for external dependencies.</li> <li><code>public</code> for client assets loaded by the browser, like CSS and JavaScript files.</li> <li><code>views</code> for HTML files.</li> <li><code>modules</code> for internal modules.</li> </ul>"},{"location":"intro04/#solution-b-start-with-a-ready-made-environment","title":"Solution b: start with a ready-made environment","text":"<p>Note</p> <p>The following process is only available with Visual Studio Code.</p> <p>Rather than installing and configuring every piece of software manually, you can obtain a ready to use, fine-tuned JavaScript environment in a few pretty easy steps. Black magic? No, Docker combined with VS Code.</p> <p>Docker is a tool for running applications and services in small, lightweight \"containers\" which do not interfere with your local machine's installed software or configuration. This means you don\u2019t have to worry about configuring or setting up complicated development tools on your local machine. The general idea is given by the following schema. See here for a more detailed overview of Docker.</p> <p></p> <p>To use this solution, you need to install and configure Docker Desktop on your local machine.</p> <p>Next, simply follow this link to kickstart a containerized JavaScript development environment using Visual Studio Code. Clicking it will cause VS Code to automatically install the Dev Containers extension if needed, clone the environment source code into a container volume, and spin up a dev container for you to use.</p> <p>The newly created container packs everything you need to code alongside this book:</p> <ul> <li> <p>A recent version of Node.js;</p> </li> <li> <p>A lightweight web server needed to expose the JavaScript code that lies inside the container;</p> </li> <li> <p>The Prettier and ESLint VS Code extensions, already configured in accordance with the language flavor used throughout the book;</p> </li> <li>The predefined folder structure described above, and the initial code for all book exercises.</li> </ul> <p>Pretty neat, isn\u2019t it?</p> <p>You'll find more information about this solution here.</p>"},{"location":"intro04/#use-the-browsers-development-tools","title":"Use the browser's development tools","text":"<p>In a local development scenario, you'll often interact with your code through your browser's developer tools.</p> <p>Designed to help with web development, these tools are included in all modern browsers (with minor differences between them). They tools usually include a JavaScript console (to show JS output and optionally type commands), a page inspector (to browse the page structure) and many more!</p> <p></p> <p>To discover more about browser developer tools, you might want to check out the following resources: Using the browser developer\u00a0tools, Optimize your website with DevTools, DevTools Overview (Chrome), DevTools User Docs (Firefox).</p>"},{"location":"intro04/#tldr","title":"TL;DR","text":"<ul> <li> <p>You have two options for coding along this book: leveraging online services or using a development environment on your local machine.</p> </li> <li> <p>First option is the fastest, second one is more interesting in the long run.</p> </li> <li> <p>Your local machine can be set up for JavaScript coding either by installing everything yourself or exploit a preconfigured, containerized environment.</p> </li> <li> <p>In all cases, testing the code examples and searching the exercises is mandatory for a successful learning!</p> </li> </ul>"}]}